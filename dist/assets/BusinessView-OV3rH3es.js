const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browser-ksd3QbiQ.js","assets/index.esm-CzBTzke4.js","assets/index-C2feBXyE.js","assets/index-CWk-rKme.css","assets/index-2zW4GwZ4.css"])))=>i.map(i=>d[i]);
import{E as wn,_ as fi}from"./ElButton-Bjk7ThkH.js";import{B as M,i as ca,j as Ie,k as ua,m as w,l as or,p as de,s as da,q as ha,v as pi,x as it,y as fa,z as ir,o as $,A as H,C as W,D as he,F as pa,G as lr,a as ft,c as X,w as F,b as E,t as ae,H as pt,I as gt,J as mt,K as Sn,T as Ir,L as kn,r as Me,d as On,e as V,u as U,f as Ue,n as Ae,g as Oe,_ as Xt,M as bt,N as gi,O as Tn,P as ps,Q as mi,R as gs,S as bi,U as Hn,V as ms,W as bs,X as vi,Y as yi,Z as _i,$ as wi,a0 as Si,a1 as ga,a2 as cr,a3 as ma}from"./index-C2feBXyE.js";import{I as ki,E as ba,Q as $i}from"./banner-items-Behcs-7K.js";import{c as Pi,a as Ve,g as Ci,b as fe,u as xi,E as We,F as Ai}from"./index.esm-CzBTzke4.js";var sn={};function Rr(r="pui_id_"){return sn.hasOwnProperty(r)||(sn[r]=0),sn[r]++,`${r}${sn[r]}`}function vt(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"pv_id_";return Rr(r)}var Ne={_loadedStyleNames:new Set,getLoadedStyleNames:function(){return this._loadedStyleNames},isStyleNameLoaded:function(e){return this._loadedStyleNames.has(e)},setLoadedStyleName:function(e){this._loadedStyleNames.add(e)},deleteLoadedStyleName:function(e){this._loadedStyleNames.delete(e)},clearLoadedStyleNames:function(){this._loadedStyleNames.clear()}},vs=M.extend({name:"common"});function Ft(r){"@babel/helpers - typeof";return Ft=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ft(r)}function Oi(r){return _a(r)||Ti(r)||ya(r)||va()}function Ti(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function Ct(r,e){return _a(r)||Ei(r,e)||ya(r,e)||va()}function va(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ya(r,e){if(r){if(typeof r=="string")return ys(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ys(r,e):void 0}}function ys(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function Ei(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,s,a,o,i=[],l=!0,c=!1;try{if(a=(t=t.call(r)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=a.call(t)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw s}}return i}}function _a(r){if(Array.isArray(r))return r}function _s(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),t.push.apply(t,n)}return t}function A(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?_s(Object(t),!0).forEach(function(n){Ot(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):_s(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Ot(r,e,t){return(e=Ii(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Ii(r){var e=Ri(r,"string");return Ft(e)=="symbol"?e:e+""}function Ri(r,e){if(Ft(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(Ft(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var pe={name:"BaseComponent",props:{pt:{type:Object,default:void 0},ptOptions:{type:Object,default:void 0},unstyled:{type:Boolean,default:void 0},dt:{type:Object,default:void 0}},inject:{$parentInstance:{default:void 0}},watch:{isUnstyled:{immediate:!0,handler:function(e){e||(this._loadCoreStyles(),this._themeChangeListener(this._loadCoreStyles))}},dt:{immediate:!0,handler:function(e){var t=this;e?(this._loadScopedThemeStyles(e),this._themeChangeListener(function(){return t._loadScopedThemeStyles(e)})):this._unloadScopedThemeStyles()}}},scopedStyleEl:void 0,rootEl:void 0,$attrSelector:void 0,beforeCreate:function(){var e,t,n,s,a,o,i,l,c,u,d,h=(e=this.pt)===null||e===void 0?void 0:e._usept,f=h?(t=this.pt)===null||t===void 0||(t=t.originalValue)===null||t===void 0?void 0:t[this.$.type.name]:void 0,p=h?(n=this.pt)===null||n===void 0||(n=n.value)===null||n===void 0?void 0:n[this.$.type.name]:this.pt;(s=p||f)===null||s===void 0||(s=s.hooks)===null||s===void 0||(a=s.onBeforeCreate)===null||a===void 0||a.call(s);var g=(o=this.$primevueConfig)===null||o===void 0||(o=o.pt)===null||o===void 0?void 0:o._usept,m=g?(i=this.$primevue)===null||i===void 0||(i=i.config)===null||i===void 0||(i=i.pt)===null||i===void 0?void 0:i.originalValue:void 0,S=g?(l=this.$primevue)===null||l===void 0||(l=l.config)===null||l===void 0||(l=l.pt)===null||l===void 0?void 0:l.value:(c=this.$primevue)===null||c===void 0||(c=c.config)===null||c===void 0?void 0:c.pt;(u=S||m)===null||u===void 0||(u=u[this.$.type.name])===null||u===void 0||(u=u.hooks)===null||u===void 0||(d=u.onBeforeCreate)===null||d===void 0||d.call(u),this.$attrSelector=Rr("pc")},created:function(){this._hook("onCreated")},beforeMount:function(){this.rootEl=ca(this.$el,'[data-pc-name="'.concat(Ie(this.$.type.name),'"]')),this.rootEl&&(this.$attrSelector&&!this.rootEl.hasAttribute(this.$attrSelector)&&this.rootEl.setAttribute(this.$attrSelector,""),this.rootEl.$pc=A({name:this.$.type.name,attrSelector:this.$attrSelector},this.$params)),this._loadStyles(),this._hook("onBeforeMount")},mounted:function(){this._hook("onMounted")},beforeUpdate:function(){this._hook("onBeforeUpdate")},updated:function(){this._hook("onUpdated")},beforeUnmount:function(){this._hook("onBeforeUnmount")},unmounted:function(){this._unloadScopedThemeStyles(),this._hook("onUnmounted")},methods:{_hook:function(e){if(!this.$options.hostName){var t=this._usePT(this._getPT(this.pt,this.$.type.name),this._getOptionValue,"hooks.".concat(e)),n=this._useDefaultPT(this._getOptionValue,"hooks.".concat(e));t==null||t(),n==null||n()}},_mergeProps:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return ua(e)?e.apply(void 0,n):w.apply(void 0,n)},_loadStyles:function(){var e=this,t=function(){Ne.isStyleNameLoaded("base")||(M.loadCSS(e.$styleOptions),e._loadGlobalStyles(),Ne.setLoadedStyleName("base")),e._loadThemeStyles()};t(),this._themeChangeListener(t)},_loadCoreStyles:function(){var e,t;!Ne.isStyleNameLoaded((e=this.$style)===null||e===void 0?void 0:e.name)&&(t=this.$style)!==null&&t!==void 0&&t.name&&(vs.loadCSS(this.$styleOptions),this.$options.style&&this.$style.loadCSS(this.$styleOptions),Ne.setLoadedStyleName(this.$style.name))},_loadGlobalStyles:function(){var e=this._useGlobalPT(this._getOptionValue,"global.css",this.$params);or(e)&&M.load(e,A({name:"global"},this.$styleOptions))},_loadThemeStyles:function(){var e,t;if(!(this.isUnstyled||this.$theme==="none")){if(!de.isStyleNameLoaded("common")){var n,s,a=((n=this.$style)===null||n===void 0||(s=n.getCommonTheme)===null||s===void 0?void 0:s.call(n))||{},o=a.primitive,i=a.semantic,l=a.global,c=a.style;M.load(o==null?void 0:o.css,A({name:"primitive-variables"},this.$styleOptions)),M.load(i==null?void 0:i.css,A({name:"semantic-variables"},this.$styleOptions)),M.load(l==null?void 0:l.css,A({name:"global-variables"},this.$styleOptions)),M.loadTheme(A({name:"global-style"},this.$styleOptions),c),de.setLoadedStyleName("common")}if(!de.isStyleNameLoaded((e=this.$style)===null||e===void 0?void 0:e.name)&&(t=this.$style)!==null&&t!==void 0&&t.name){var u,d,h,f,p=((u=this.$style)===null||u===void 0||(d=u.getComponentTheme)===null||d===void 0?void 0:d.call(u))||{},g=p.css,m=p.style;(h=this.$style)===null||h===void 0||h.load(g,A({name:"".concat(this.$style.name,"-variables")},this.$styleOptions)),(f=this.$style)===null||f===void 0||f.loadTheme(A({name:"".concat(this.$style.name,"-style")},this.$styleOptions),m),de.setLoadedStyleName(this.$style.name)}if(!de.isStyleNameLoaded("layer-order")){var S,v,b=(S=this.$style)===null||S===void 0||(v=S.getLayerOrderThemeCSS)===null||v===void 0?void 0:v.call(S);M.load(b,A({name:"layer-order",first:!0},this.$styleOptions)),de.setLoadedStyleName("layer-order")}}},_loadScopedThemeStyles:function(e){var t,n,s,a=((t=this.$style)===null||t===void 0||(n=t.getPresetTheme)===null||n===void 0?void 0:n.call(t,e,"[".concat(this.$attrSelector,"]")))||{},o=a.css,i=(s=this.$style)===null||s===void 0?void 0:s.load(o,A({name:"".concat(this.$attrSelector,"-").concat(this.$style.name)},this.$styleOptions));this.scopedStyleEl=i.el},_unloadScopedThemeStyles:function(){var e;(e=this.scopedStyleEl)===null||e===void 0||(e=e.value)===null||e===void 0||e.remove()},_themeChangeListener:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};Ne.clearLoadedStyleNames(),da.on("theme:change",e)},_getHostInstance:function(e){return e?this.$options.hostName?e.$.type.name===this.$options.hostName?e:this._getHostInstance(e.$parentInstance):e.$parentInstance:void 0},_getPropValue:function(e){var t;return this[e]||((t=this._getHostInstance(this))===null||t===void 0?void 0:t[e])},_getOptionValue:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return ha(e,t,n)},_getPTValue:function(){var e,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,o=/./g.test(n)&&!!s[n.split(".")[0]],i=this._getPropValue("ptOptions")||((e=this.$primevueConfig)===null||e===void 0?void 0:e.ptOptions)||{},l=i.mergeSections,c=l===void 0?!0:l,u=i.mergeProps,d=u===void 0?!1:u,h=a?o?this._useGlobalPT(this._getPTClassValue,n,s):this._useDefaultPT(this._getPTClassValue,n,s):void 0,f=o?void 0:this._getPTSelf(t,this._getPTClassValue,n,A(A({},s),{},{global:h||{}})),p=this._getPTDatasets(n);return c||!c&&f?d?this._mergeProps(d,h,f,p):A(A(A({},h),f),p):A(A({},f),p)},_getPTSelf:function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return w(this._usePT.apply(this,[this._getPT(e,this.$name)].concat(n)),this._usePT.apply(this,[this.$_attrsPT].concat(n)))},_getPTDatasets:function(){var e,t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",s="data-pc-",a=n==="root"&&or((e=this.pt)===null||e===void 0?void 0:e["data-pc-section"]);return n!=="transition"&&A(A({},n==="root"&&A(A(Ot({},"".concat(s,"name"),Ie(a?(t=this.pt)===null||t===void 0?void 0:t["data-pc-section"]:this.$.type.name)),a&&Ot({},"".concat(s,"extend"),Ie(this.$.type.name))),pi()&&Ot({},"".concat(this.$attrSelector),""))),{},Ot({},"".concat(s,"section"),Ie(n)))},_getPTClassValue:function(){var e=this._getOptionValue.apply(this,arguments);return it(e)||fa(e)?{class:e}:e},_getPT:function(e){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",s=arguments.length>2?arguments[2]:void 0,a=function(i){var l,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,u=s?s(i):i,d=Ie(n),h=Ie(t.$name);return(l=c?d!==h?u==null?void 0:u[d]:void 0:u==null?void 0:u[d])!==null&&l!==void 0?l:u};return e!=null&&e.hasOwnProperty("_usept")?{_usept:e._usept,originalValue:a(e.originalValue),value:a(e.value)}:a(e,!0)},_usePT:function(e,t,n,s){var a=function(g){return t(g,n,s)};if(e!=null&&e.hasOwnProperty("_usept")){var o,i=e._usept||((o=this.$primevueConfig)===null||o===void 0?void 0:o.ptOptions)||{},l=i.mergeSections,c=l===void 0?!0:l,u=i.mergeProps,d=u===void 0?!1:u,h=a(e.originalValue),f=a(e.value);return h===void 0&&f===void 0?void 0:it(f)?f:it(h)?h:c||!c&&f?d?this._mergeProps(d,h,f):A(A({},h),f):f}return a(e)},_useGlobalPT:function(e,t,n){return this._usePT(this.globalPT,e,t,n)},_useDefaultPT:function(e,t,n){return this._usePT(this.defaultPT,e,t,n)},ptm:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this._getPTValue(this.pt,e,A(A({},this.$params),t))},ptmi:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return w(this.$_attrsWithoutPT,this.ptm(e,t))},ptmo:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this._getPTValue(e,t,A({instance:this},n),!1)},cx:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.isUnstyled?void 0:this._getOptionValue(this.$style.classes,e,A(A({},this.$params),t))},sx:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(t){var s=this._getOptionValue(this.$style.inlineStyles,e,A(A({},this.$params),n)),a=this._getOptionValue(vs.inlineStyles,e,A(A({},this.$params),n));return[a,s]}}},computed:{globalPT:function(){var e,t=this;return this._getPT((e=this.$primevueConfig)===null||e===void 0?void 0:e.pt,void 0,function(n){return ir(n,{instance:t})})},defaultPT:function(){var e,t=this;return this._getPT((e=this.$primevueConfig)===null||e===void 0?void 0:e.pt,void 0,function(n){return t._getOptionValue(n,t.$name,A({},t.$params))||ir(n,A({},t.$params))})},isUnstyled:function(){var e;return this.unstyled!==void 0?this.unstyled:(e=this.$primevueConfig)===null||e===void 0?void 0:e.unstyled},$inProps:function(){var e,t=Object.keys(((e=this.$.vnode)===null||e===void 0?void 0:e.props)||{});return Object.fromEntries(Object.entries(this.$props).filter(function(n){var s=Ct(n,1),a=s[0];return t==null?void 0:t.includes(a)}))},$theme:function(){var e;return(e=this.$primevueConfig)===null||e===void 0?void 0:e.theme},$style:function(){return A(A({classes:void 0,inlineStyles:void 0,load:function(){},loadCSS:function(){},loadTheme:function(){}},(this._getHostInstance(this)||{}).$style),this.$options.style)},$styleOptions:function(){var e;return{nonce:(e=this.$primevueConfig)===null||e===void 0||(e=e.csp)===null||e===void 0?void 0:e.nonce}},$primevueConfig:function(){var e;return(e=this.$primevue)===null||e===void 0?void 0:e.config},$name:function(){return this.$options.hostName||this.$.type.name},$params:function(){var e=this._getHostInstance(this)||this.$parent;return{instance:this,props:this.$props,state:this.$data,attrs:this.$attrs,parent:{instance:e,props:e==null?void 0:e.$props,state:e==null?void 0:e.$data,attrs:e==null?void 0:e.$attrs}}},$_attrsPT:function(){return Object.entries(this.$attrs||{}).filter(function(e){var t=Ct(e,1),n=t[0];return n==null?void 0:n.startsWith("pt:")}).reduce(function(e,t){var n=Ct(t,2),s=n[0],a=n[1],o=s.split(":"),i=Oi(o),l=i.slice(1);return l==null||l.reduce(function(c,u,d,h){return!c[u]&&(c[u]=d===h.length-1?a:{}),c[u]},e),e},{})},$_attrsWithoutPT:function(){return Object.entries(this.$attrs||{}).filter(function(e){var t=Ct(e,1),n=t[0];return!(n!=null&&n.startsWith("pt:"))}).reduce(function(e,t){var n=Ct(t,2),s=n[0],a=n[1];return e[s]=a,e},{})}}},ji=function(e){var t=e.dt;return`
.p-steplist {
    position: relative;
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin: 0;
    padding: 0;
    list-style-type: none;
    overflow-x: auto;
}

.p-step {
    position: relative;
    display: flex;
    flex: 1 1 auto;
    align-items: center;
    gap: `.concat(t("stepper.step.gap"),`;
    padding: `).concat(t("stepper.step.padding"),`;
}

.p-step:last-of-type {
    flex: initial;
}

.p-step-header {
    border: 0 none;
    display: inline-flex;
    align-items: center;
    text-decoration: none;
    cursor: pointer;
    transition: background `).concat(t("stepper.transition.duration"),", color ").concat(t("stepper.transition.duration"),", border-color ").concat(t("stepper.transition.duration"),", outline-color ").concat(t("stepper.transition.duration"),", box-shadow ").concat(t("stepper.transition.duration"),`;
    border-radius: `).concat(t("stepper.step.header.border.radius"),`;
    outline-color: transparent;
    background: transparent;
    padding: `).concat(t("stepper.step.header.padding"),`;
    gap: `).concat(t("stepper.step.header.gap"),`;
}

.p-step-header:focus-visible {
    box-shadow: `).concat(t("stepper.step.header.focus.ring.shadow"),`;
    outline: `).concat(t("stepper.step.header.focus.ring.width")," ").concat(t("stepper.step.header.focus.ring.style")," ").concat(t("stepper.step.header.focus.ring.color"),`;
    outline-offset: `).concat(t("stepper.step.header.focus.ring.offset"),`;
}

.p-stepper.p-stepper-readonly .p-step {
    cursor: auto;
}

.p-step-title {
    display: block;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 100%;
    color: `).concat(t("stepper.step.title.color"),`;
    font-weight: `).concat(t("stepper.step.title.font.weight"),`;
    transition: background `).concat(t("stepper.transition.duration"),", color ").concat(t("stepper.transition.duration"),", border-color ").concat(t("stepper.transition.duration"),", box-shadow ").concat(t("stepper.transition.duration"),", outline-color ").concat(t("stepper.transition.duration"),`;
}

.p-step-number {
    display: flex;
    align-items: center;
    justify-content: center;
    color: `).concat(t("stepper.step.number.color"),`;
    border: 2px solid `).concat(t("stepper.step.number.border.color"),`;
    background: `).concat(t("stepper.step.number.background"),`;
    min-width: `).concat(t("stepper.step.number.size"),`;
    height: `).concat(t("stepper.step.number.size"),`;
    line-height: `).concat(t("stepper.step.number.size"),`;
    font-size: `).concat(t("stepper.step.number.font.size"),`;
    z-index: 1;
    border-radius: `).concat(t("stepper.step.number.border.radius"),`;
    position: relative;
    font-weight: `).concat(t("stepper.step.number.font.weight"),`;
}

.p-step-number::after {
    content: " ";
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: `).concat(t("stepper.step.number.border.radius"),`;
    box-shadow: `).concat(t("stepper.step.number.shadow"),`;
}

.p-step-active .p-step-header {
    cursor: default;
}

.p-step-active .p-step-number {
    background: `).concat(t("stepper.step.number.active.background"),`;
    border-color: `).concat(t("stepper.step.number.active.border.color"),`;
    color: `).concat(t("stepper.step.number.active.color"),`;
}

.p-step-active .p-step-title {
    color: `).concat(t("stepper.step.title.active.color"),`;
}

.p-step:not(.p-disabled):focus-visible {
    outline: `).concat(t("focus.ring.width")," ").concat(t("focus.ring.style")," ").concat(t("focus.ring.color"),`;
    outline-offset: `).concat(t("focus.ring.offset"),`;
}

.p-step:has(~ .p-step-active) .p-stepper-separator {
    background: `).concat(t("stepper.separator.active.background"),`;
}

.p-stepper-separator {
    flex: 1 1 0;
    background: `).concat(t("stepper.separator.background"),`;
    width: 100%;
    height: `).concat(t("stepper.separator.size"),`;
    transition: background `).concat(t("stepper.transition.duration"),", color ").concat(t("stepper.transition.duration"),", border-color ").concat(t("stepper.transition.duration"),", box-shadow ").concat(t("stepper.transition.duration"),", outline-color ").concat(t("stepper.transition.duration"),`;
}

.p-steppanels {
    padding: `).concat(t("stepper.steppanels.padding"),`;
}

.p-steppanel {
    background: `).concat(t("stepper.steppanel.background"),`;
    color: `).concat(t("stepper.steppanel.color"),`;
}

.p-stepper:has(.p-stepitem) {
    display: flex;
    flex-direction: column;
}

.p-stepitem {
    display: flex;
    flex-direction: column;
    flex: initial;
}

.p-stepitem.p-stepitem-active {
    flex: 1 1 auto;
}

.p-stepitem .p-step {
    flex: initial;
}

.p-stepitem .p-steppanel-content {
    width: 100%;
    padding: `).concat(t("stepper.steppanel.padding"),`;
    margin-inline-start: 1rem;
}

.p-stepitem .p-steppanel {
    display: flex;
    flex: 1 1 auto;
}

.p-stepitem .p-stepper-separator {
    flex: 0 0 auto;
    width: `).concat(t("stepper.separator.size"),`;
    height: auto;
    margin: `).concat(t("stepper.separator.margin"),`;
    position: relative;
    left: calc(-1 * `).concat(t("stepper.separator.size"),`);
}

.p-stepitem .p-stepper-separator:dir(rtl) {
    left: calc(-9 * `).concat(t("stepper.separator.size"),`);
}

.p-stepitem:has(~ .p-stepitem-active) .p-stepper-separator {
    background: `).concat(t("stepper.separator.active.background"),`;
}

.p-stepitem:last-of-type .p-steppanel {
    padding-inline-start: `).concat(t("stepper.step.number.size"),`;
}
`)},Li={root:function(e){var t=e.props;return["p-stepper p-component",{"p-readonly":t.linear}]},separator:"p-stepper-separator"},Di=M.extend({name:"stepper",theme:ji,classes:Li}),Ni={name:"BaseStepper",extends:pe,props:{value:{type:[String,Number],default:void 0},linear:{type:Boolean,default:!1}},style:Di,provide:function(){return{$pcStepper:this,$parentInstance:this}}},wa={name:"Stepper",extends:Ni,inheritAttrs:!1,emits:["update:value"],data:function(){return{id:this.$attrs.id,d_value:this.value}},watch:{"$attrs.id":function(e){this.id=e||vt()},value:function(e){this.d_value=e}},mounted:function(){this.id=this.id||vt()},methods:{updateValue:function(e){this.d_value!==e&&(this.d_value=e,this.$emit("update:value",e))},isStepActive:function(e){return this.d_value===e},isStepDisabled:function(){return this.linear}}};function Bi(r,e,t,n,s,a){return $(),H("div",w({class:r.cx("root"),role:"tablist"},r.ptmi("root")),[r.$slots.start?W(r.$slots,"start",{key:0}):he("",!0),W(r.$slots,"default"),r.$slots.end?W(r.$slots,"end",{key:1}):he("",!0)],16)}wa.render=Bi;var Ui={root:"p-steplist"},Mi=M.extend({name:"steplist",classes:Ui}),Fi={name:"BaseStepList",extends:pe,style:Mi,provide:function(){return{$pcStepList:this,$parentInstance:this}}},Sa={name:"StepList",extends:Fi,inheritAttrs:!1};function Vi(r,e,t,n,s,a){return $(),H("div",w({class:r.cx("root")},r.ptmi("root")),[W(r.$slots,"default")],16)}Sa.render=Vi;var Wi={root:"p-steppanels"},qi=M.extend({name:"steppanels",classes:Wi}),Hi={name:"BaseStepPanels",extends:pe,style:qi,provide:function(){return{$pcStepPanels:this,$parentInstance:this}}},ka={name:"StepPanels",extends:Hi,inheritAttrs:!1};function Ji(r,e,t,n,s,a){return $(),H("div",w({class:r.cx("root")},r.ptmi("root")),[W(r.$slots,"default")],16)}ka.render=Ji;var zi={root:function(e){var t=e.instance;return["p-step",{"p-step-active":t.active,"p-disabled":t.isStepDisabled}]},header:"p-step-header",number:"p-step-number",title:"p-step-title"},Gi=M.extend({name:"step",classes:zi}),$a={name:"StepperSeparator",hostName:"Stepper",extends:pe};function Ki(r,e,t,n,s,a){return $(),H("span",w({class:r.cx("separator")},r.ptm("separator")),null,16)}$a.render=Ki;var Xi={name:"BaseStep",extends:pe,props:{value:{type:[String,Number],default:void 0},disabled:{type:Boolean,default:!1},asChild:{type:Boolean,default:!1},as:{type:[String,Object],default:"DIV"}},style:Gi,provide:function(){return{$pcStep:this,$parentInstance:this}}},Pa={name:"Step",extends:Xi,inheritAttrs:!1,inject:{$pcStepper:{default:null},$pcStepList:{default:null},$pcStepItem:{default:null}},data:function(){return{isSeparatorVisible:!1}},mounted:function(){if(this.$el&&this.$pcStepList){var e=pa(this.$el,lr(this.$pcStepper.$el,'[data-pc-name="step"]')),t=lr(this.$pcStepper.$el,'[data-pc-name="step"]').length;this.isSeparatorVisible=e!==t-1}},methods:{getPTOptions:function(e){var t=e==="root"?this.ptmi:this.ptm;return t(e,{context:{active:this.active,disabled:this.isStepDisabled}})},onStepClick:function(){this.$pcStepper.updateValue(this.activeValue)}},computed:{active:function(){return this.$pcStepper.isStepActive(this.activeValue)},activeValue:function(){var e;return this.$pcStepItem?(e=this.$pcStepItem)===null||e===void 0?void 0:e.value:this.value},isStepDisabled:function(){return!this.active&&(this.$pcStepper.isStepDisabled()||this.disabled)},id:function(){var e;return"".concat((e=this.$pcStepper)===null||e===void 0?void 0:e.id,"_step_").concat(this.activeValue)},ariaControls:function(){var e;return"".concat((e=this.$pcStepper)===null||e===void 0?void 0:e.id,"_steppanel_").concat(this.activeValue)},a11yAttrs:function(){return{root:{role:"presentation","aria-current":this.active?"step":void 0,"data-pc-name":"step","data-pc-section":"root","data-p-disabled":this.isStepDisabled,"data-p-active":this.active},header:{id:this.id,role:"tab",taindex:this.disabled?-1:void 0,"aria-controls":this.ariaControls,"data-pc-section":"header",disabled:this.isStepDisabled,onClick:this.onStepClick}}}},components:{StepperSeparator:$a}},Qi=["id","tabindex","aria-controls","disabled"];function Yi(r,e,t,n,s,a){var o=ft("StepperSeparator");return r.asChild?W(r.$slots,"default",{key:1,class:gt(r.cx("root")),active:a.active,value:r.value,a11yAttrs:a.a11yAttrs,activateCallback:a.onStepClick}):($(),X(pt(r.as),w({key:0,class:r.cx("root"),"aria-current":a.active?"step":void 0,role:"presentation","data-p-active":a.active,"data-p-disabled":a.isStepDisabled},a.getPTOptions("root")),{default:F(function(){return[E("button",w({id:a.id,class:r.cx("header"),role:"tab",type:"button",tabindex:a.isStepDisabled?-1:void 0,"aria-controls":a.ariaControls,disabled:a.isStepDisabled,onClick:e[0]||(e[0]=function(){return a.onStepClick&&a.onStepClick.apply(a,arguments)})},a.getPTOptions("header")),[E("span",w({class:r.cx("number")},a.getPTOptions("number")),ae(a.activeValue),17),E("span",w({class:r.cx("title")},a.getPTOptions("title")),[W(r.$slots,"default")],16)],16,Qi),s.isSeparatorVisible?($(),X(o,{key:0})):he("",!0)]}),_:3},16,["class","aria-current","data-p-active","data-p-disabled"]))}Pa.render=Yi;var Zi={root:function(e){var t=e.instance;return["p-steppanel",{"p-steppanel-active":t.isVertical&&t.active}]},content:"p-steppanel-content"},el=M.extend({name:"steppanel",classes:Zi}),Ca={name:"StepperSeparator",hostName:"Stepper",extends:pe};function tl(r,e,t,n,s,a){return $(),H("span",w({class:r.cx("separator")},r.ptm("separator")),null,16)}Ca.render=tl;var nl={name:"BaseStepPanel",extends:pe,props:{value:{type:[String,Number],default:void 0},asChild:{type:Boolean,default:!1},as:{type:[String,Object],default:"DIV"}},style:el,provide:function(){return{$pcStepPanel:this,$parentInstance:this}}},En={name:"StepPanel",extends:nl,inheritAttrs:!1,inject:{$pcStepper:{default:null},$pcStepItem:{default:null},$pcStepList:{default:null}},data:function(){return{isSeparatorVisible:!1}},mounted:function(){if(this.$el){var e,t,n=lr(this.$pcStepper.$el,'[data-pc-name="step"]'),s=ca(this.isVertical?(e=this.$pcStepItem)===null||e===void 0?void 0:e.$el:(t=this.$pcStepList)===null||t===void 0?void 0:t.$el,'[data-pc-name="step"]'),a=pa(s,n);this.isSeparatorVisible=this.isVertical&&a!==n.length-1}},methods:{getPTOptions:function(e){var t=e==="root"?this.ptmi:this.ptm;return t(e,{context:{active:this.active}})},updateValue:function(e){this.$pcStepper.updateValue(e)}},computed:{active:function(){var e,t,n=this.$pcStepItem?(e=this.$pcStepItem)===null||e===void 0?void 0:e.value:this.value;return n===((t=this.$pcStepper)===null||t===void 0?void 0:t.d_value)},isVertical:function(){return!!this.$pcStepItem},activeValue:function(){var e;return this.isVertical?(e=this.$pcStepItem)===null||e===void 0?void 0:e.value:this.value},id:function(){var e;return"".concat((e=this.$pcStepper)===null||e===void 0?void 0:e.id,"_steppanel_").concat(this.activeValue)},ariaControls:function(){var e;return"".concat((e=this.$pcStepper)===null||e===void 0?void 0:e.id,"_step_").concat(this.activeValue)},a11yAttrs:function(){return{id:this.id,role:"tabpanel","aria-controls":this.ariaControls,"data-pc-name":"steppanel","data-p-active":this.active}}},components:{StepperSeparator:Ca}};function rl(r,e,t,n,s,a){var o=ft("StepperSeparator");return a.isVertical?($(),H(kn,{key:0},[r.asChild?W(r.$slots,"default",{key:1,active:a.active,a11yAttrs:a.a11yAttrs,activateCallback:function(l){return a.updateValue(l)}}):($(),X(Ir,w({key:0,name:"p-toggleable-content"},r.ptm("transition")),{default:F(function(){return[mt(($(),X(pt(r.as),w({id:a.id,class:r.cx("root"),role:"tabpanel","aria-controls":a.ariaControls},a.getPTOptions("root")),{default:F(function(){return[s.isSeparatorVisible?($(),X(o,{key:0})):he("",!0),E("div",w({class:r.cx("content")},a.getPTOptions("content")),[W(r.$slots,"default",{active:a.active,activateCallback:function(l){return a.updateValue(l)}})],16)]}),_:3},16,["id","class","aria-controls"])),[[Sn,a.active]])]}),_:3},16))],64)):($(),H(kn,{key:1},[r.asChild?r.asChild&&a.active?W(r.$slots,"default",{key:1,active:a.active,a11yAttrs:a.a11yAttrs,activateCallback:function(l){return a.updateValue(l)}}):he("",!0):mt(($(),X(pt(r.as),w({key:0,id:a.id,class:r.cx("root"),role:"tabpanel","aria-controls":a.ariaControls},a.getPTOptions("root")),{default:F(function(){return[W(r.$slots,"default",{active:a.active,activateCallback:function(l){return a.updateValue(l)}})]}),_:3},16,["id","class","aria-controls"])),[[Sn,a.active]])],64))}En.render=rl;function In(){const r=Pi().shape({productOrService:Ve().required("Product or service is required"),targetAudience:Ve().required("Target audience is required"),regionOrCity:Ve().required("Region or city is required"),startUpCapital:Ve().required("Start-up capital is required"),salesChannels:Ve().required("Sales channels are required"),keyCosts:Ve().required("Key costs are required"),mainGoals:Ve().required("Main goals are required")}),e={productOrService:{label:"What product or service do you plan to offer?",name:"productOrService",type:"text"},targetAudience:{label:"Who is your target audience?",name:"targetAudience",type:"text"},regionOrCity:{label:"What region or city do you plan to work in?",name:"regionOrCity",type:"text"},startUpCapital:{label:"What kind of start-up capital do you plan to invest?",name:"startUpCapital",type:"text"},salesChannels:{label:"What sales channels do you plan to utilize?",name:"salesChannels",type:"text"},keyCosts:{label:"What are the key costs you are planning for?",name:"keyCosts",type:"text"},mainGoals:{label:"What are your main goals for your first year?",name:"mainGoals",type:"textarea"}},t=Me([{id:1,value:"1",label:"Start"},{id:2,value:"2",label:"Quiz"},{id:3,value:"3",label:"Result"}]),n=Me({productOrService:"",targetAudience:"",regionOrCity:"",startUpCapital:"",salesChannels:"",keyCosts:"",mainGoals:""}),s=i=>{sessionStorage.setItem("steps",i)};return{setStorageStepValue:s,getStorageStepValue:()=>sessionStorage.getItem("steps")||"1",setStepValueHandler:async({activateCallback:i,value:l})=>{await s(l),i(l)},stepList:t,formData:n,schema:r,fields:e}}const sl={class:"stepper"},al={class:"stepper__content"},ol=On({__name:"ElInitial",setup(r){const{setStepValueHandler:e}=In(),t=Me("GET STARTED QUIZ");return(n,s)=>($(),X(U(En),{value:"1"},{default:F(({activateCallback:a})=>[E("div",sl,[E("div",al,[V(ba,Ae(Oe(U(ki))),{button:F(()=>[V(wn,{"button-action":()=>U(e)({activateCallback:a,value:"2"}),variant:"default"},{default:F(()=>[Ue(ae(t.value),1)]),_:2},1032,["button-action"])]),_:2},1040)])])]),_:1}))}}),il=Xt(ol,[["__scopeId","data-v-93c0bb6b"]]);function ll(){return{generatePrompt:e=>(console.log("data",e),`
      I am an entrepreneur, you are my assistant. I have come to you to help me with my business plan.
      I want a detailed answer. I will answer a few questions to make it easier for you to write it.
      Create a step-by-step guide for me based on your answers. Your answer should be formatted as follows.
      The answer should be big and understandable to a person.

      1. QuestionWhat product or service do you plan to offer? My answer is: ${e.productOrService}.
      2. Who is your target audience? My answer is: ${e.targetAudience}.
      3. What region or city do you plan to work in? My answer is: ${e.regionOrCity}.
      4. What kind of start-up capital do you plan to invest? My answer is: ${e.startUpCapital}.
      5. What sales channels do you plan to utilize? My answer is: ${e.salesChannels}.
      6. What are the key costs you are planning for? My answer is: ${e.keyCosts}.
      7. What are your main goals for your first year? My answer is: ${e.mainGoals}.


      Your answer should be formatted as follows. The answer should be big and understandable to a person.

      business_plan: [
        {
          "step": 1, // Question number.
          "title": "", // Question title.
          "what_i_have_to_do": "" // What i have to do? Gime me long answer!
          "where_to_start": "" // Where to start? Gime me short answer!
        },
        {
          "step": 2, // Question number.
          "title": "", // Question number.
          "what_i_have_to_do": "" // What i have to do? Gime me long answer!
          "where_to_start": "" // Where to start? Gime me short answer!
        },
        {
          "step": 3, // Question number.
          "title": "", // Question number.
          "what_i_have_to_do": "" // What i have to do? Gime me long answer!
          "where_to_start": "" // Where to start? Gime me short answer!
        },
        {
          "step": 4, // Question number.
          "title": "", // Question number.
          "what_i_have_to_do": "" // What i have to do? Gime me long answer!
          "where_to_start": "" // Where to start? Gime me short answer!
        },
        {
          "step": 5, // Question number.
          "title": "", // Question number.
          "what_i_have_to_do": "" // What i have to do? Gime me long answer!
          "where_to_start": "" // Where to start? Gime me short answer!
        },
        {
          "step": 6, // Question number.
          "title": "", // Question number.
          "what_i_have_to_do": "" // What i have to do? Gime me long answer!
          "where_to_start": "" // Where to start? Gime me short answer!
        },
        {
          "step": 7, // Question number.
          "title": "", // Question number.
          "what_i_have_to_do": "" // What i have to do? Gime me long answer!
          "where_to_start": "" // Where to start? Gime me short answer!
        },
      ],
      others: { // Additional information will be available here.
        sustainability: { // How can I ensure my business is sustainable? Gime me short answer!
          title: "",
          text: ""
        }
        calculations: { // Do I have enough money to start a business? I have ${e.startUpCapital}$. Gime me short answer!
          title: "",
          text: "" 
        }
        technology: { // What technology do I need? Gime me short answer!
          title: "",
          text: "" 
        }
        marketing: { // What marketing strategies should I use? Reach a monthly profit of $1000
          title: "",
          text: ""
        }
        financing: { // What financing options are available? Gime me short answer!
          title: "",
          text: "" 
        }
        community: { // How can I engage with the community? Gime me short answer!
          title: "",
          text: ""
        }
        logistics: { // How should I manage logistics? Gime me short answer!
          title: "",
          text: "" 
        }
        training: { // What training do I need? Gime me short answer!
          title: "",
          text: ""
        }
        branding: { // What should my branding strategy be? Gime me short answer!
          title: "",
          text: "" 
        }
        channels: { // What sales channels should I use? Gime me short answer!
          title: "",
          text: ""
        }
        growth: { // How can I grow my business? Gime me short answer!
          title: "",
          text: "" 
        }
        plans: { // Give me a plan for the next 5 years. Gime me short answer!
          title: "",
          text: ""
        }
        scale: { // How can I scale my business? Gime me short answer!
          title: "",
          text: "" 
        }
        risks: { // What are the risks? Gime me short answer!
          title: "",
          text: ""
        }
        backs: { // When will the business pay off? Gime me short answer!
          title: "",
          text: "" 
        }
        hr: { // What are my human resources needs? Gime me short answer!
          title: "",
          text: ""
        }
      }
    `)}}const cl=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>bt(async()=>{const{default:n}=await Promise.resolve().then(()=>wt);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)};class jr extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class ul extends jr{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class dl extends jr{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class hl extends jr{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ur;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(ur||(ur={}));var fl=function(r,e,t,n){function s(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function i(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):s(u.value).then(i,l)}c((n=n.apply(r,e||[])).next())})};class pl{constructor(e,{headers:t={},customFetch:n,region:s=ur.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=cl(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return fl(this,void 0,void 0,function*(){try{const{headers:s,method:a,body:o}=t;let i={},{region:l}=t;l||(l=this.region),l&&l!=="any"&&(i["x-region"]=l);let c;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(i["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(i["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(i["Content-Type"]="application/json",c=JSON.stringify(o)));const u=yield this.fetch(`${this.url}/${e}`,{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},i),this.headers),s),body:c}).catch(p=>{throw new ul(p)}),d=u.headers.get("x-relay-error");if(d&&d==="true")throw new dl(u);if(!u.ok)throw new hl(u);let h=((n=u.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),f;return h==="application/json"?f=yield u.json():h==="application/octet-stream"?f=yield u.blob():h==="text/event-stream"?f=u:h==="multipart/form-data"?f=yield u.formData():f=yield u.text(),{data:f,error:null}}catch(s){return{data:null,error:s}}})}}var se={},Lr={},Rn={},Qt={},jn={},Ln={},gl=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},yt=gl();const ml=yt.fetch,xa=yt.fetch.bind(yt),Aa=yt.Headers,bl=yt.Request,vl=yt.Response,wt=Object.freeze(Object.defineProperty({__proto__:null,Headers:Aa,Request:bl,Response:vl,default:xa,fetch:ml},Symbol.toStringTag,{value:"Module"})),yl=Ci(wt);var Dn={};Object.defineProperty(Dn,"__esModule",{value:!0});let _l=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Dn.default=_l;var Oa=fe&&fe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ln,"__esModule",{value:!0});const wl=Oa(yl),Sl=Oa(Dn);let kl=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=wl.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var o,i,l;let c=null,u=null,d=null,h=a.status,f=a.statusText;if(a.ok){if(this.method!=="HEAD"){const S=await a.text();S===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=S:u=JSON.parse(S))}const g=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),m=(i=a.headers.get("content-range"))===null||i===void 0?void 0:i.split("/");g&&m&&m.length>1&&(d=parseInt(m[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,d=null,h=406,f="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const g=await a.text();try{c=JSON.parse(g),Array.isArray(c)&&a.status===404&&(u=[],c=null,h=200,f="OK")}catch{a.status===404&&g===""?(h=204,f="No Content"):c={message:g}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,h=200,f="OK"),c&&this.shouldThrowOnError)throw new Sl.default(c)}return{error:c,data:u,count:d,status:h,statusText:f}});return this.shouldThrowOnError||(s=s.catch(a=>{var o,i,l;return{error:{message:`${(o=a==null?void 0:a.name)!==null&&o!==void 0?o:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(i=a==null?void 0:a.stack)!==null&&i!==void 0?i:""}`,hint:"",code:`${(l=a==null?void 0:a.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}};Ln.default=kl;var $l=fe&&fe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(jn,"__esModule",{value:!0});const Pl=$l(Ln);let Cl=class extends Pl.default{select(e){let t=!1;const n=(e??"*").split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:s,referencedTable:a=s}={}){const o=a?`${a}.order`:"order",i=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:s=n}={}){const a=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:s=!1,wal:a=!1,format:o="text"}={}){var i;const l=[e?"analyze":null,t?"verbose":null,n?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),c=(i=this.headers.Accept)!==null&&i!==void 0?i:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};jn.default=Cl;var xl=fe&&fe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Qt,"__esModule",{value:!0});const Al=xl(jn);let Ol=class extends Al.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${a}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}};Qt.default=Ol;var Tl=fe&&fe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Rn,"__esModule",{value:!0});const xt=Tl(Qt);let El=class{constructor(e,{headers:t={},schema:n,fetch:s}){this.url=e,this.headers=t,this.schema=n,this.fetch=s}select(e,{head:t=!1,count:n}={}){const s=t?"HEAD":"GET";let a=!1;const o=(e??"*").split("").map(i=>/\s/.test(i)&&!a?"":(i==='"'&&(a=!a),i)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new xt.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:n=!0}={}){const s="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),t&&a.push(`count=${t}`),n||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const o=e.reduce((i,l)=>i.concat(Object.keys(l)),[]);if(o.length>0){const i=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",i.join(","))}}return new xt.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:s,defaultToNull:a=!0}={}){const o="POST",i=[`resolution=${n?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),a||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const l=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){const c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new xt.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),this.headers.Prefer=s.join(","),new xt.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new xt.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Rn.default=El;var Nn={},Bn={};Object.defineProperty(Bn,"__esModule",{value:!0});Bn.version=void 0;Bn.version="0.0.0-automated";Object.defineProperty(Nn,"__esModule",{value:!0});Nn.DEFAULT_HEADERS=void 0;const Il=Bn;Nn.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Il.version}`};var Ta=fe&&fe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Lr,"__esModule",{value:!0});const Rl=Ta(Rn),jl=Ta(Qt),Ll=Nn;let Dl=class Ea{constructor(e,{headers:t={},schema:n,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},Ll.DEFAULT_HEADERS),t),this.schemaName=n,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new Rl.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Ea(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:s=!1,count:a}={}){let o;const i=new URL(`${this.url}/rpc/${e}`);let l;n||s?(o=n?"HEAD":"GET",Object.entries(t).filter(([u,d])=>d!==void 0).map(([u,d])=>[u,Array.isArray(d)?`{${d.join(",")}}`:`${d}`]).forEach(([u,d])=>{i.searchParams.append(u,d)})):(o="POST",l=t);const c=Object.assign({},this.headers);return a&&(c.Prefer=`count=${a}`),new jl.default({method:o,url:i,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};Lr.default=Dl;var St=fe&&fe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(se,"__esModule",{value:!0});se.PostgrestError=se.PostgrestBuilder=se.PostgrestTransformBuilder=se.PostgrestFilterBuilder=se.PostgrestQueryBuilder=se.PostgrestClient=void 0;const Ia=St(Lr);se.PostgrestClient=Ia.default;const Ra=St(Rn);se.PostgrestQueryBuilder=Ra.default;const ja=St(Qt);se.PostgrestFilterBuilder=ja.default;const La=St(jn);se.PostgrestTransformBuilder=La.default;const Da=St(Ln);se.PostgrestBuilder=Da.default;const Na=St(Dn);se.PostgrestError=Na.default;var Nl=se.default={PostgrestClient:Ia.default,PostgrestQueryBuilder:Ra.default,PostgrestFilterBuilder:ja.default,PostgrestTransformBuilder:La.default,PostgrestBuilder:Da.default,PostgrestError:Na.default};const{PostgrestClient:Bl,PostgrestQueryBuilder:Hh,PostgrestFilterBuilder:Jh,PostgrestTransformBuilder:zh,PostgrestBuilder:Gh,PostgrestError:Kh}=Nl,Ul="2.11.2",Ml={"X-Client-Info":`realtime-js/${Ul}`},Fl="1.0.0",Ba=1e4,Vl=1e3;var lt;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(lt||(lt={}));var le;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(le||(le={}));var be;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(be||(be={}));var dr;(function(r){r.websocket="websocket"})(dr||(dr={}));var Je;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(Je||(Je={}));class Wl{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const s=t.getUint8(1),a=t.getUint8(2);let o=this.HEADER_LENGTH+2;const i=n.decode(e.slice(o,o+s));o=o+s;const l=n.decode(e.slice(o,o+a));o=o+a;const c=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:i,event:l,payload:c}}}class Ua{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var B;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(B||(B={}));const ws=(r,e,t={})=>{var n;const s=(n=t.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((a,o)=>(a[o]=ql(o,r,e,s),a),{})},ql=(r,e,t,n)=>{const s=e.find(i=>i.name===r),a=s==null?void 0:s.type,o=t[r];return a&&!n.includes(a)?Ma(a,o):hr(o)},Ma=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return Gl(e,t)}switch(r){case B.bool:return Hl(e);case B.float4:case B.float8:case B.int2:case B.int4:case B.int8:case B.numeric:case B.oid:return Jl(e);case B.json:case B.jsonb:return zl(e);case B.timestamp:return Kl(e);case B.abstime:case B.date:case B.daterange:case B.int4range:case B.int8range:case B.money:case B.reltime:case B.text:case B.time:case B.timestamptz:case B.timetz:case B.tsrange:case B.tstzrange:return hr(e);default:return hr(e)}},hr=r=>r,Hl=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},Jl=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},zl=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},Gl=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,n=r[t];if(r[0]==="{"&&n==="}"){let a;const o=r.slice(1,t);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(i=>Ma(e,i))}return r},Kl=r=>typeof r=="string"?r.replace(" ","T"):r,Fa=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Jn{constructor(e,t,n={},s=Ba){this.channel=e,this.event=t,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Ss;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(Ss||(Ss={}));class Nt{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:a,onLeave:o,onSync:i}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Nt.syncState(this.state,s,a,o),this.pendingDiffs.forEach(l=>{this.state=Nt.syncDiff(this.state,l,a,o)}),this.pendingDiffs=[],i()}),this.channel._on(n.diff,{},s=>{const{onJoin:a,onLeave:o,onSync:i}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Nt.syncDiff(this.state,s,a,o),i())}),this.onJoin((s,a,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:o})}),this.onLeave((s,a,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,s){const a=this.cloneDeep(e),o=this.transformState(t),i={},l={};return this.map(a,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const d=a[c];if(d){const h=u.map(m=>m.presence_ref),f=d.map(m=>m.presence_ref),p=u.filter(m=>f.indexOf(m.presence_ref)<0),g=d.filter(m=>h.indexOf(m.presence_ref)<0);p.length>0&&(i[c]=p),g.length>0&&(l[c]=g)}else i[c]=u}),this.syncDiff(a,{joins:i,leaves:l},n,s)}static syncDiff(e,t,n,s){const{joins:a,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(a,(i,l)=>{var c;const u=(c=e[i])!==null&&c!==void 0?c:[];if(e[i]=this.cloneDeep(l),u.length>0){const d=e[i].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);e[i].unshift(...h)}n(i,u,l)}),this.map(o,(i,l)=>{let c=e[i];if(!c)return;const u=l.map(d=>d.presence_ref);c=c.filter(d=>u.indexOf(d.presence_ref)<0),e[i]=c,s(i,c,l),c.length===0&&delete e[i]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const s=e[n];return"metas"in s?t[n]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):t[n]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ks;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(ks||(ks={}));var $s;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})($s||($s={}));var Ee;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(Ee||(Ee={}));class Dr{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=le.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Jn(this,be.join,this.params,this.timeout),this.rejoinTimer=new Ua(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=le.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=le.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=le.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=le.errored,this.rejoinTimer.scheduleTimeout())}),this._on(be.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new Nt(this),this.broadcastEndpointURL=Fa(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:a,presence:o,private:i}}=this.params;this._onError(u=>e==null?void 0:e(Ee.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(Ee.CLOSED));const l={},c={broadcast:a,presence:o,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&s!==void 0?s:[],private:i};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:u})=>{var d;if(this.socket.setAuth(),u===void 0){e==null||e(Ee.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,f=(d=h==null?void 0:h.length)!==null&&d!==void 0?d:0,p=[];for(let g=0;g<f;g++){const m=h[g],{filter:{event:S,schema:v,table:b,filter:y}}=m,k=u&&u[g];if(k&&k.event===S&&k.schema===v&&k.table===b&&k.filter===y)p.push(Object.assign(Object.assign({},m),{id:k.id}));else{this.unsubscribe(),e==null||e(Ee.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(Ee.SUBSCRIBED);return}}).receive("error",u=>{e==null||e(Ee.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ee.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e,t={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,i,l;const c=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(i=(o=this.params)===null||o===void 0?void 0:o.config)===null||i===void 0?void 0:i.broadcast)===null||l===void 0)&&l.ack)&&a("ok"),c.receive("ok",()=>a("ok")),c.receive("error",()=>a("error")),c.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=le.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(be.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const s=new Jn(this,be.leave,{},e);s.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,t,n){const s=new AbortController,a=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(a),o}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Jn(this,e,t,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var s,a;const o=e.toLocaleLowerCase(),{close:i,error:l,leave:c,join:u}=be;if(n&&[i,l,c,u].indexOf(o)>=0&&n!==this._joinRef())return;let h=this._onMessage(o,t,n);if(t&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var p,g,m;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((m=(g=f.filter)===null||g===void 0?void 0:g.event)===null||m===void 0?void 0:m.toLocaleLowerCase())===o}).map(f=>f.callback(h,n)):(a=this.bindings[o])===null||a===void 0||a.filter(f=>{var p,g,m,S,v,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const y=f.id,k=(p=f.filter)===null||p===void 0?void 0:p.event;return y&&((g=t.ids)===null||g===void 0?void 0:g.includes(y))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((m=t.data)===null||m===void 0?void 0:m.type.toLocaleLowerCase()))}else{const y=(v=(S=f==null?void 0:f.filter)===null||S===void 0?void 0:S.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return y==="*"||y===((b=t==null?void 0:t.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof h=="object"&&"ids"in h){const p=h.data,{schema:g,table:m,commit_timestamp:S,type:v,errors:b}=p;h=Object.assign(Object.assign({},{schema:g,table:m,commit_timestamp:S,eventType:v,new:{},old:{},errors:b}),this._getPayloadRecords(p))}f.callback(h,n)})}_isClosed(){return this.state===le.closed}_isJoined(){return this.state===le.joined}_isJoining(){return this.state===le.joining}_isLeaving(){return this.state===le.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const s=e.toLocaleLowerCase(),a={type:s,filter:t,callback:n};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&Dr.isEqual(s.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(be.close,{},e)}_onError(e){this._on(be.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=le.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=ws(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=ws(e.columns,e.old_record)),t}}const Xl=()=>{},Ql=typeof WebSocket<"u",Yl=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Zl{constructor(e,t){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Ml,this.params={},this.timeout=Ba,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Xl,this.conn=null,this.sendBuffer=[],this.serializer=new Wl,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let o;return a?o=a:typeof fetch>"u"?o=(...i)=>bt(async()=>{const{default:l}=await Promise.resolve().then(()=>wt);return{default:l}},void 0).then(({default:l})=>l(...i)):o=fetch,(...i)=>o(...i)},this.endPoint=`${e}/${dr.websocket}`,this.httpEndpoint=Fa(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const s=(n=t==null?void 0:t.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(a,o)=>o(JSON.stringify(a)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Ua(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(Ql){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new ec(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),bt(async()=>{const{default:e}=await import("./browser-ksd3QbiQ.js").then(t=>t.b);return{default:e}},__vite__mapDeps([0,1,2,3,4])).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Fl}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case lt.connecting:return Je.Connecting;case lt.open:return Je.Open;case lt.closing:return Je.Closing;default:return Je.Closed}}isConnected(){return this.connectionState()===Je.Open}channel(e,t={config:{}}){const n=new Dr(`realtime:${e}`,t,this);return this.channels.push(n),n}push(e){const{topic:t,event:n,payload:s,ref:a}=e,o=()=>{this.encode(e,i=>{var l;(l=this.conn)===null||l===void 0||l.send(i)})};this.log("push",`${t} ${n} (${a})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let n=null;try{n=JSON.parse(atob(t.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=t,this.channels.forEach(s=>{t&&s.updateJoinPayload({access_token:t}),s.joinedOnce&&s._isJoined()&&s._push(be.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Vl,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:n,event:s,payload:a,ref:o}=t;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${n} ${s} ${o&&"("+o+")"||""}`,a),this.channels.filter(i=>i._isMember(n)).forEach(i=>i._trigger(s,a,o)),this.stateChangeCallbacks.message.forEach(i=>i(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(be.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${n}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([Yl],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}}class ec{constructor(e,t,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=lt.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class Nr extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Y(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class tc extends Nr{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class fr extends Nr{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var nc=function(r,e,t,n){function s(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function i(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):s(u.value).then(i,l)}c((n=n.apply(r,e||[])).next())})};const Va=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>bt(async()=>{const{default:n}=await Promise.resolve().then(()=>wt);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},rc=()=>nc(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield bt(()=>Promise.resolve().then(()=>wt),void 0)).Response:Response}),pr=r=>{if(Array.isArray(r))return r.map(t=>pr(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,n])=>{const s=t.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[s]=pr(n)}),e};var Xe=function(r,e,t,n){function s(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function i(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):s(u.value).then(i,l)}c((n=n.apply(r,e||[])).next())})};const zn=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),sc=(r,e,t)=>Xe(void 0,void 0,void 0,function*(){const n=yield rc();r instanceof n&&!(t!=null&&t.noResolveJson)?r.json().then(s=>{e(new tc(zn(s),r.status||500))}).catch(s=>{e(new fr(zn(s),s))}):e(new fr(zn(r),r))}),ac=(r,e,t,n)=>{const s={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(s.body=JSON.stringify(n)),Object.assign(Object.assign({},s),t))};function Yt(r,e,t,n,s,a){return Xe(this,void 0,void 0,function*(){return new Promise((o,i)=>{r(t,ac(e,n,s,a)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>sc(l,i,n))})})}function $n(r,e,t,n){return Xe(this,void 0,void 0,function*(){return Yt(r,"GET",e,t,n)})}function De(r,e,t,n,s){return Xe(this,void 0,void 0,function*(){return Yt(r,"POST",e,n,s,t)})}function oc(r,e,t,n,s){return Xe(this,void 0,void 0,function*(){return Yt(r,"PUT",e,n,s,t)})}function ic(r,e,t,n){return Xe(this,void 0,void 0,function*(){return Yt(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),n)})}function Wa(r,e,t,n,s){return Xe(this,void 0,void 0,function*(){return Yt(r,"DELETE",e,n,s,t)})}var ne=function(r,e,t,n){function s(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function i(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):s(u.value).then(i,l)}c((n=n.apply(r,e||[])).next())})};const lc={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ps={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class cc{constructor(e,t={},n,s){this.url=e,this.headers=t,this.bucketId=n,this.fetch=Va(s)}uploadOrUpdate(e,t,n,s){return ne(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},Ps),s);let i=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),l&&a.append("metadata",this.encodeMetadata(l)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",o.cacheControl),l&&a.append("metadata",this.encodeMetadata(l))):(a=n,i["cache-control"]=`max-age=${o.cacheControl}`,i["content-type"]=o.contentType,l&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(i=Object.assign(Object.assign({},i),s.headers));const c=this._removeEmptyFolders(t),u=this._getFinalPath(c),d=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:a,headers:i},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield d.json();return d.ok?{data:{path:c,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(a){if(Y(a))return{data:null,error:a};throw a}})}upload(e,t,n){return ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,s){return ne(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),o=this._getFinalPath(a),i=new URL(this.url+`/object/upload/sign/${o}`);i.searchParams.set("token",t);try{let l;const c=Object.assign({upsert:Ps.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const d=yield this.fetch(i.toString(),{method:"PUT",body:l,headers:u}),h=yield d.json();return d.ok?{data:{path:a,fullPath:h.Key},error:null}:{data:null,error:h}}catch(l){if(Y(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return ne(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);t!=null&&t.upsert&&(s["x-upsert"]="true");const a=yield De(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+a.url),i=o.searchParams.get("token");if(!i)throw new Nr("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:i},error:null}}catch(n){if(Y(n))return{data:null,error:n};throw n}})}update(e,t,n){return ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return ne(this,void 0,void 0,function*(){try{return{data:yield De(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Y(s))return{data:null,error:s};throw s}})}copy(e,t,n){return ne(this,void 0,void 0,function*(){try{return{data:{path:(yield De(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Y(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,n){return ne(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),a=yield De(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(s){if(Y(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,n){return ne(this,void 0,void 0,function*(){try{const s=yield De(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(s){if(Y(s))return{data:null,error:s};throw s}})}download(e,t){return ne(this,void 0,void 0,function*(){const s=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=a?`?${a}`:"";try{const i=this._getFinalPath(e);return{data:yield(yield $n(this.fetch,`${this.url}/${s}/${i}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(i){if(Y(i))return{data:null,error:i};throw i}})}info(e){return ne(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const n=yield $n(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:pr(n),error:null}}catch(n){if(Y(n))return{data:null,error:n};throw n}})}exists(e){return ne(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield ic(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Y(n)&&n instanceof fr){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),s=[],a=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";a!==""&&s.push(a);const i=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&s.push(l);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${c}`)}}}remove(e){return ne(this,void 0,void 0,function*(){try{return{data:yield Wa(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Y(t))return{data:null,error:t};throw t}})}list(e,t,n){return ne(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},lc),t),{prefix:e||""});return{data:yield De(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(Y(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const uc="2.7.1",dc={"X-Client-Info":`storage-js/${uc}`};var Ze=function(r,e,t,n){function s(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function i(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):s(u.value).then(i,l)}c((n=n.apply(r,e||[])).next())})};class hc{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},dc),t),this.fetch=Va(n)}listBuckets(){return Ze(this,void 0,void 0,function*(){try{return{data:yield $n(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Y(e))return{data:null,error:e};throw e}})}getBucket(e){return Ze(this,void 0,void 0,function*(){try{return{data:yield $n(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Y(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Ze(this,void 0,void 0,function*(){try{return{data:yield De(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Y(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return Ze(this,void 0,void 0,function*(){try{return{data:yield oc(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Y(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Ze(this,void 0,void 0,function*(){try{return{data:yield De(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Y(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Ze(this,void 0,void 0,function*(){try{return{data:yield Wa(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Y(t))return{data:null,error:t};throw t}})}}class fc extends hc{constructor(e,t={},n){super(e,t,n)}from(e){return new cc(this.url,this.headers,e,this.fetch)}}const pc="2.48.1";let Tt="";typeof Deno<"u"?Tt="deno":typeof document<"u"?Tt="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Tt="react-native":Tt="node";const gc={"X-Client-Info":`supabase-js-${Tt}/${pc}`},mc={headers:gc},bc={schema:"public"},vc={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},yc={};var _c=function(r,e,t,n){function s(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function i(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):s(u.value).then(i,l)}c((n=n.apply(r,e||[])).next())})};const wc=r=>{let e;return r?e=r:typeof fetch>"u"?e=xa:e=fetch,(...t)=>e(...t)},Sc=()=>typeof Headers>"u"?Aa:Headers,kc=(r,e,t)=>{const n=wc(t),s=Sc();return(a,o)=>_c(void 0,void 0,void 0,function*(){var i;const l=(i=yield e())!==null&&i!==void 0?i:r;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",r),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(a,Object.assign(Object.assign({},o),{headers:c}))})};var $c=function(r,e,t,n){function s(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function i(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):s(u.value).then(i,l)}c((n=n.apply(r,e||[])).next())})};function Pc(r){return r.replace(/\/$/,"")}function Cc(r,e){const{db:t,auth:n,realtime:s,global:a}=r,{db:o,auth:i,realtime:l,global:c}=e,u={db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},i),n),realtime:Object.assign(Object.assign({},l),s),global:Object.assign(Object.assign({},c),a),accessToken:()=>$c(this,void 0,void 0,function*(){return""})};return r.accessToken?u.accessToken=r.accessToken:delete u.accessToken,u}const qa="2.67.3",xc="http://localhost:9999",Ac="supabase.auth.token",Oc={"X-Client-Info":`gotrue-js/${qa}`},Cs=10,gr="X-Supabase-Api-Version",Ha={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function Tc(r){return Math.round(Date.now()/1e3)+r}function Ec(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const ke=()=>typeof window<"u"&&typeof document<"u",qe={tested:!1,writable:!1},Bt=()=>{if(!ke())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(qe.tested)return qe.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),qe.tested=!0,qe.writable=!0}catch{qe.tested=!0,qe.writable=!1}return qe.writable};function Ic(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,a)=>{e[a]=s})}catch{}return t.searchParams.forEach((n,s)=>{e[s]=n}),e}const Ja=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>bt(async()=>{const{default:n}=await Promise.resolve().then(()=>wt);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},Rc=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",za=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},an=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},on=async(r,e)=>{await r.removeItem(e)};function jc(r){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",n,s,a,o,i,l,c,u=0;for(r=r.replace("-","+").replace("_","/");u<r.length;)o=e.indexOf(r.charAt(u++)),i=e.indexOf(r.charAt(u++)),l=e.indexOf(r.charAt(u++)),c=e.indexOf(r.charAt(u++)),n=o<<2|i>>4,s=(i&15)<<4|l>>2,a=(l&3)<<6|c,t=t+String.fromCharCode(n),l!=64&&s!=0&&(t=t+String.fromCharCode(s)),c!=64&&a!=0&&(t=t+String.fromCharCode(a));return t}class Un{constructor(){this.promise=new Un.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Un.promiseConstructor=Promise;function xs(r){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=r.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const n=t[1];return JSON.parse(jc(n))}async function Lc(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function Dc(r,e){return new Promise((n,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await r(a);if(!e(a,null,o)){n(o);return}}catch(o){if(!e(a,o)){s(o);return}}})()})}function Nc(r){return("0"+r.toString(16)).substr(-2)}function Bc(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let s="";for(let a=0;a<56;a++)s+=t.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,Nc).join("")}async function Uc(r){const t=new TextEncoder().encode(r),n=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(n);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}function Mc(r){return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Fc(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await Uc(r);return Mc(t)}async function et(r,e,t=!1){const n=Bc();let s=n;t&&(s+="/PASSWORD_RECOVERY"),await za(r,`${e}-code-verifier`,s);const a=await Fc(n);return[a,n===a?"plain":"s256"]}const Vc=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Wc(r){const e=r.headers.get(gr);if(!e||!e.match(Vc))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class Br extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function P(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class qc extends Br{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function Hc(r){return P(r)&&r.name==="AuthApiError"}class Ga extends Br{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Qe extends Br{constructor(e,t,n,s){super(e,n,s),this.name=t,this.status=n}}class je extends Qe{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Jc(r){return P(r)&&r.name==="AuthSessionMissingError"}class Gn extends Qe{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ln extends Qe{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class cn extends Qe{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function zc(r){return P(r)&&r.name==="AuthImplicitGrantRedirectError"}class As extends Qe{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class mr extends Qe{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Kn(r){return P(r)&&r.name==="AuthRetryableFetchError"}class Os extends Qe{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}var Gc=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t};const He=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Kc=[502,503,504];async function Ts(r){var e;if(!Rc(r))throw new mr(He(r),0);if(Kc.includes(r.status))throw new mr(He(r),r.status);let t;try{t=await r.json()}catch(a){throw new Ga(He(a),a)}let n;const s=Wc(r);if(s&&s.getTime()>=Ha["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new Os(He(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new je}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new Os(He(t),r.status,t.weak_password.reasons);throw new qc(He(t),r.status||500,n)}const Xc=(r,e,t,n)=>{const s={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),t))};async function T(r,e,t,n){var s;const a=Object.assign({},n==null?void 0:n.headers);a[gr]||(a[gr]=Ha["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const i=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Qc(r,e,t+i,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function Qc(r,e,t,n,s,a){const o=Xc(e,n,s,a);let i;try{i=await r(t,Object.assign({},o))}catch(l){throw console.error(l),new mr(He(l),0)}if(i.ok||await Ts(i),n!=null&&n.noResolveJson)return i;try{return await i.json()}catch(l){await Ts(l)}}function Le(r){var e;let t=null;tu(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=Tc(r.expires_in)));const n=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:n},error:null}}function Es(r){const e=Le(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=r.weak_password),e}function Be(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function Yc(r){return{data:r,error:null}}function Zc(r){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:s,verification_type:a}=r,o=Gc(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),i={action_link:e,email_otp:t,hashed_token:n,redirect_to:s,verification_type:a},l=Object.assign({},o);return{data:{properties:i,user:l},error:null}}function eu(r){return r}function tu(r){return r.access_token&&r.refresh_token&&r.expires_in}var nu=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t};class ru{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=Ja(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await T(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(P(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await T(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Be})}catch(n){if(P(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=nu(e,["options"]),s=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await T(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Zc,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(P(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await T(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Be})}catch(t){if(P(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,s,a,o,i,l;try{const c={nextPage:null,lastPage:0,total:0},u=await T(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:eu});if(u.error)throw u.error;const d=await u.json(),h=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(i=u.headers.get("link"))===null||i===void 0?void 0:i.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(p=>{const g=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),m=JSON.parse(p.split(";")[1].split("=")[1]);c[`${m}Page`]=g}),c.total=parseInt(h)),{data:Object.assign(Object.assign({},d),c),error:null}}catch(c){if(P(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await T(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Be})}catch(t){if(P(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await T(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Be})}catch(n){if(P(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){try{return await T(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Be})}catch(n){if(P(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:t,error:n}=await T(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:n}}catch(t){if(P(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await T(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(P(t))return{data:null,error:t};throw t}}}const su={getItem:r=>Bt()?globalThis.localStorage.getItem(r):null,setItem:(r,e)=>{Bt()&&globalThis.localStorage.setItem(r,e)},removeItem:r=>{Bt()&&globalThis.localStorage.removeItem(r)}};function Is(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function au(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const tt={debug:!!(globalThis&&Bt()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ka extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class ou extends Ka{}async function iu(r,e,t){tt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),tt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){tt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,s.name);try{return await t()}finally{tt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,s.name)}}else{if(e===0)throw tt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new ou(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(tt.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}au();const lu={url:xc,storageKey:Ac,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Oc,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},At=30*1e3,Rs=3;async function js(r,e,t){return await t()}class Vt{constructor(e){var t,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Vt.nextInstanceID,Vt.nextInstanceID+=1,this.instanceID>0&&ke()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},lu),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new ru({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Ja(s.fetch),this.lock=s.lock||js,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:ke()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=iu:this.lock=js,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Bt()?this.storage=su:(this.memoryStorage={},this.storage=Is(this.memoryStorage)):(this.memoryStorage={},this.storage=Is(this.memoryStorage)),ke()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${qa}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=Ic(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),ke()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:a}=await this._getSessionFromURL(t,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),zc(a)){const l=(e=a.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:i}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",i),await this._saveSession(o),setTimeout(async()=>{i==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return P(t)?{error:t}:{error:new Ga("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,s;try{const a=await T(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Le}),{data:o,error:i}=a;if(i||!o)return{data:{user:null,session:null},error:i};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(a){if(P(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var t,n,s;try{let a;if("email"in e){const{email:u,password:d,options:h}=e;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await et(this.storage,this.storageKey)),a=await T(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:d,data:(t=h==null?void 0:h.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:p},xform:Le})}else if("phone"in e){const{phone:u,password:d,options:h}=e;a=await T(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Le})}else throw new ln("You must provide either an email or phone number and a password");const{data:o,error:i}=a;if(i||!o)return{data:{user:null,session:null},error:i};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(a){if(P(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let t;if("email"in e){const{email:a,password:o,options:i}=e;t=await T(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:Es})}else if("phone"in e){const{phone:a,password:o,options:i}=e;t=await T(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:Es})}else throw new ln("You must provide either an email or phone number and a password");const{data:n,error:s}=t;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Gn}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(t){if(P(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,s,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await an(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(t??"").split("/");try{const{data:a,error:o}=await T(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Le});if(await on(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new Gn}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:o})}catch(a){if(P(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:t,provider:n,token:s,access_token:a,nonce:o}=e,i=await T(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Le}),{data:l,error:c}=i;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Gn}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(t){if(P(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,s,a,o;try{if("email"in e){const{email:i,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await et(this.storage,this.storageKey));const{error:d}=await T(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:i,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:d}}if("phone"in e){const{phone:i,options:l}=e,{data:c,error:u}=await T(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:i,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(a=l==null?void 0:l.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new ln("You must provide either an email or phone number.")}catch(i){if(P(i))return{data:{user:null,session:null},error:i};throw i}}async verifyOtp(e){var t,n;try{let s,a;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,a=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:i}=await T(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:Le});if(i)throw i;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(P(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,n,s;try{let a=null,o=null;return this.flowType==="pkce"&&([a,o]=await et(this.storage,this.storageKey)),await T(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:Yc})}catch(a){if(P(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new je;const{error:s}=await T(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(P(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:a}=e,{error:o}=await T(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:s,options:a}=e,{data:o,error:i}=await T(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:i}}throw new ln("You must provide either an email or phone number and a type")}catch(t){if(P(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await an(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:e},error:null}}const{session:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await T(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Be}):await this._useSession(async t=>{var n,s,a;const{data:o,error:i}=t;if(i)throw i;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new je}:await T(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:Be})})}catch(t){if(P(t))return Jc(t)&&(await this._removeSession(),await on(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:s,error:a}=n;if(a)throw a;if(!s.session)throw new je;const o=s.session;let i=null,l=null;this.flowType==="pkce"&&e.email!=null&&([i,l]=await et(this.storage,this.storageKey));const{data:c,error:u}=await T(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:l}),jwt:o.access_token,xform:Be});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(P(n))return{data:{user:null},error:n};throw n}}_decodeJWT(e){return xs(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new je;const t=Date.now()/1e3;let n=t,s=!0,a=null;const o=xs(e.access_token);if(o.exp&&(n=o.exp,s=n<=t),s){const{session:i,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!i)return{data:{user:null,session:null},error:null};a=i}else{const{data:i,error:l}=await this._getUser(e.access_token);if(l)throw l;a={access_token:e.access_token,refresh_token:e.refresh_token,user:i.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(t){if(P(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:o,error:i}=t;if(i)throw i;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new je;const{session:s,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(P(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!ke())throw new cn("No browser detected.");if(e.error||e.error_description||e.error_code)throw new cn(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new As("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new cn("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new As("No code detected.");const{data:v,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const y=new URL(window.location.href);return y.searchParams.delete("code"),window.history.replaceState(window.history.state,"",y.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:a,refresh_token:o,expires_in:i,expires_at:l,token_type:c}=e;if(!a||!i||!o||!c)throw new cn("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(i);let h=u+d;l&&(h=parseInt(l));const f=h-u;f*1e3<=At&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const p=h-d;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,h,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,h,u);const{data:g,error:m}=await this._getUser(a);if(m)throw m;const S={provider_token:n,provider_refresh_token:s,access_token:a,expires_in:d,expires_at:h,refresh_token:o,token_type:c,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:S,redirectType:e.type},error:null}}catch(n){if(P(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await an(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:s,error:a}=t;if(a)return{error:a};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:i}=await this.admin.signOut(o,e);if(i&&!(Hc(i)&&(i.status===404||i.status===401||i.status===403)))return{error:i}}return e!=="others"&&(await this._removeSession(),await on(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=Ec(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,s;try{const{data:{session:a},error:o}=t;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,t={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await et(this.storage,this.storageKey,!0));try{return await T(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(a){if(P(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(P(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:s}=await this._useSession(async a=>{var o,i,l,c,u;const{data:d,error:h}=a;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await T(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(c=d.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return ke()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(P(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,s;const{data:a,error:o}=t;if(o)throw o;return await T(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(P(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await Dc(async s=>(s>0&&await Lc(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await T(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Le})),(s,a)=>{const o=200*Math.pow(2,s);return a&&Kn(a)&&Date.now()+o-n<At})}catch(n){if(this._debug(t,"error",n),P(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),ke()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await an(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n)){this._debug(t,"session is not valid"),n!==null&&await this._removeSession();return}const s=Math.round(Date.now()/1e3),a=((e=n.expires_at)!==null&&e!==void 0?e:1/0)<s+Cs;if(this._debug(t,`session has${a?"":" not"} expired with margin of ${Cs}s`),a){if(this.autoRefreshToken&&n.refresh_token){const{error:o}=await this._callRefreshToken(n.refresh_token);o&&(console.error(o),Kn(o)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(t,"error",n),console.error(n);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new je;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Un;const{data:a,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!a.session)throw new je;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const i={session:a.session,error:null};return this.refreshingDeferred.resolve(i),i}catch(a){if(this._debug(s,"error",a),P(a)){const o={session:null,error:a};return Kn(a)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async i=>{try{await i.callback(e,t)}catch(l){a.push(l)}});if(await Promise.all(o),a.length>0){for(let i=0;i<a.length;i+=1)console.error(a[i]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await za(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await on(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ke()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),At);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/At);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${At}ms, refresh threshold is ${Rs} ticks`),s<=Rs&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ka)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ke()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const s=[`provider=${encodeURIComponent(t)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,o]=await et(this.storage,this.storageKey),i=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(i.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);s.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:s,error:a}=t;return a?{data:null,error:a}:await T(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(P(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,s;const{data:a,error:o}=t;if(o)return{data:null,error:o};const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await T(this.fetch,"POST",`${this.url}/factors`,{body:i,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(P(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:s,error:a}=t;if(a)return{data:null,error:a};const{data:o,error:i}=await T(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return i?{data:null,error:i}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:i})})}catch(t){if(P(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:s,error:a}=t;return a?{data:null,error:a}:await T(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(P(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(e==null?void 0:e.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),a=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:s},error:a}=e;if(a)return{data:null,error:a};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(s.access_token);let i=null;o.aal&&(i=o.aal);let l=i;((n=(t=s.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:i,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}}Vt.nextInstanceID=0;const cu=Vt;class uu extends cu{constructor(e){super(e)}}var du=function(r,e,t,n){function s(a){return a instanceof t?a:new t(function(o){o(a)})}return new(t||(t=Promise))(function(a,o){function i(u){try{c(n.next(u))}catch(d){o(d)}}function l(u){try{c(n.throw(u))}catch(d){o(d)}}function c(u){u.done?a(u.value):s(u.value).then(i,l)}c((n=n.apply(r,e||[])).next())})};class hu{constructor(e,t,n){var s,a,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const i=Pc(e);this.realtimeUrl=`${i}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${i}/auth/v1`,this.storageUrl=`${i}/storage/v1`,this.functionsUrl=`${i}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:bc,realtime:yc,auth:Object.assign(Object.assign({},vc),{storageKey:l}),global:mc},u=Cc(n??{},c);this.storageKey=(s=u.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=u.global.headers)!==null&&a!==void 0?a:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=kc(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new Bl(`${i}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new pl(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new fc(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return du(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,storageKey:a,flowType:o,lock:i,debug:l},c,u){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new uu({url:this.authUrl,headers:Object.assign(Object.assign({},d),c),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,flowType:o,lock:i,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Zl(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const fu=(r,e,t)=>new hu(r,e,t),pu=fu("https://ufotpegzlfronvdxuwoi.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVmb3RwZWd6bGZyb252ZHh1d29pIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzc4OTcwMDQsImV4cCI6MjA1MzQ3MzAwNH0.KhARkNTKloN2b1nMu_xgUEugq8Ock_4eJvgKItZwxS8"),br="RFC3986",vr={RFC1738:r=>String(r).replace(/%20/g,"+"),RFC3986:r=>String(r)},gu="RFC1738",mu=Array.isArray,we=(()=>{const r=[];for(let e=0;e<256;++e)r.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return r})(),Xn=1024,bu=(r,e,t,n,s)=>{if(r.length===0)return r;let a=r;if(typeof r=="symbol"?a=Symbol.prototype.toString.call(r):typeof r!="string"&&(a=String(r)),t==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(i){return"%26%23"+parseInt(i.slice(2),16)+"%3B"});let o="";for(let i=0;i<a.length;i+=Xn){const l=a.length>=Xn?a.slice(i,i+Xn):a,c=[];for(let u=0;u<l.length;++u){let d=l.charCodeAt(u);if(d===45||d===46||d===95||d===126||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||s===gu&&(d===40||d===41)){c[c.length]=l.charAt(u);continue}if(d<128){c[c.length]=we[d];continue}if(d<2048){c[c.length]=we[192|d>>6]+we[128|d&63];continue}if(d<55296||d>=57344){c[c.length]=we[224|d>>12]+we[128|d>>6&63]+we[128|d&63];continue}u+=1,d=65536+((d&1023)<<10|l.charCodeAt(u)&1023),c[c.length]=we[240|d>>18]+we[128|d>>12&63]+we[128|d>>6&63]+we[128|d&63]}o+=c.join("")}return o};function vu(r){return!r||typeof r!="object"?!1:!!(r.constructor&&r.constructor.isBuffer&&r.constructor.isBuffer(r))}function Ls(r,e){if(mu(r)){const t=[];for(let n=0;n<r.length;n+=1)t.push(e(r[n]));return t}return e(r)}const yu=Object.prototype.hasOwnProperty,Xa={brackets(r){return String(r)+"[]"},comma:"comma",indices(r,e){return String(r)+"["+e+"]"},repeat(r){return String(r)}},$e=Array.isArray,_u=Array.prototype.push,Qa=function(r,e){_u.apply(r,$e(e)?e:[e])},wu=Date.prototype.toISOString,K={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:bu,encodeValuesOnly:!1,format:br,formatter:vr[br],indices:!1,serializeDate(r){return wu.call(r)},skipNulls:!1,strictNullHandling:!1};function Su(r){return typeof r=="string"||typeof r=="number"||typeof r=="boolean"||typeof r=="symbol"||typeof r=="bigint"}const Qn={};function Ya(r,e,t,n,s,a,o,i,l,c,u,d,h,f,p,g,m,S){let v=r,b=S,y=0,k=!1;for(;(b=b.get(Qn))!==void 0&&!k;){const J=b.get(r);if(y+=1,typeof J<"u"){if(J===y)throw new RangeError("Cyclic object value");k=!0}typeof b.get(Qn)>"u"&&(y=0)}if(typeof c=="function"?v=c(e,v):v instanceof Date?v=h==null?void 0:h(v):t==="comma"&&$e(v)&&(v=Ls(v,function(J){return J instanceof Date?h==null?void 0:h(J):J})),v===null){if(a)return l&&!g?l(e,K.encoder,m,"key",f):e;v=""}if(Su(v)||vu(v)){if(l){const J=g?e:l(e,K.encoder,m,"key",f);return[(p==null?void 0:p(J))+"="+(p==null?void 0:p(l(v,K.encoder,m,"value",f)))]}return[(p==null?void 0:p(e))+"="+(p==null?void 0:p(String(v)))]}const x=[];if(typeof v>"u")return x;let I;if(t==="comma"&&$e(v))g&&l&&(v=Ls(v,l)),I=[{value:v.length>0?v.join(",")||null:void 0}];else if($e(c))I=c;else{const J=Object.keys(v);I=u?J.sort(u):J}const ue=i?String(e).replace(/\./g,"%2E"):String(e),z=n&&$e(v)&&v.length===1?ue+"[]":ue;if(s&&$e(v)&&v.length===0)return z+"[]";for(let J=0;J<I.length;++J){const N=I[J],Ye=typeof N=="object"&&typeof N.value<"u"?N.value:v[N];if(o&&Ye===null)continue;const qn=d&&i?N.replace(/\./g,"%2E"):N,hi=$e(v)?typeof t=="function"?t(z,qn):z:z+(d?"."+qn:"["+qn+"]");S.set(r,y);const fs=new WeakMap;fs.set(Qn,S),Qa(x,Ya(Ye,hi,t,n,s,a,o,i,t==="comma"&&g&&$e(v)?null:l,c,u,d,h,f,p,g,m,fs))}return x}function ku(r=K){if(typeof r.allowEmptyArrays<"u"&&typeof r.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof r.encodeDotInKeys<"u"&&typeof r.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(r.encoder!==null&&typeof r.encoder<"u"&&typeof r.encoder!="function")throw new TypeError("Encoder has to be a function.");const e=r.charset||K.charset;if(typeof r.charset<"u"&&r.charset!=="utf-8"&&r.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let t=br;if(typeof r.format<"u"){if(!yu.call(vr,r.format))throw new TypeError("Unknown format option provided.");t=r.format}const n=vr[t];let s=K.filter;(typeof r.filter=="function"||$e(r.filter))&&(s=r.filter);let a;if(r.arrayFormat&&r.arrayFormat in Xa?a=r.arrayFormat:"indices"in r?a=r.indices?"indices":"repeat":a=K.arrayFormat,"commaRoundTrip"in r&&typeof r.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const o=typeof r.allowDots>"u"?r.encodeDotInKeys?!0:K.allowDots:!!r.allowDots;return{addQueryPrefix:typeof r.addQueryPrefix=="boolean"?r.addQueryPrefix:K.addQueryPrefix,allowDots:o,allowEmptyArrays:typeof r.allowEmptyArrays=="boolean"?!!r.allowEmptyArrays:K.allowEmptyArrays,arrayFormat:a,charset:e,charsetSentinel:typeof r.charsetSentinel=="boolean"?r.charsetSentinel:K.charsetSentinel,commaRoundTrip:!!r.commaRoundTrip,delimiter:typeof r.delimiter>"u"?K.delimiter:r.delimiter,encode:typeof r.encode=="boolean"?r.encode:K.encode,encodeDotInKeys:typeof r.encodeDotInKeys=="boolean"?r.encodeDotInKeys:K.encodeDotInKeys,encoder:typeof r.encoder=="function"?r.encoder:K.encoder,encodeValuesOnly:typeof r.encodeValuesOnly=="boolean"?r.encodeValuesOnly:K.encodeValuesOnly,filter:s,format:t,formatter:n,serializeDate:typeof r.serializeDate=="function"?r.serializeDate:K.serializeDate,skipNulls:typeof r.skipNulls=="boolean"?r.skipNulls:K.skipNulls,sort:typeof r.sort=="function"?r.sort:null,strictNullHandling:typeof r.strictNullHandling=="boolean"?r.strictNullHandling:K.strictNullHandling}}function $u(r,e={}){let t=r;const n=ku(e);let s,a;typeof n.filter=="function"?(a=n.filter,t=a("",t)):$e(n.filter)&&(a=n.filter,s=a);const o=[];if(typeof t!="object"||t===null)return"";const i=Xa[n.arrayFormat],l=i==="comma"&&n.commaRoundTrip;s||(s=Object.keys(t)),n.sort&&s.sort(n.sort);const c=new WeakMap;for(let h=0;h<s.length;++h){const f=s[h];n.skipNulls&&t[f]===null||Qa(o,Ya(t[f],f,i,l,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,c))}const u=o.join(n.delimiter);let d=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),u.length>0?d+u:""}const st="4.80.0";let Ds=!1,Ut,Za,eo,yr,to,no,ro,so,ao;function Pu(r,e={auto:!1}){if(Ds)throw new Error(`you must \`import 'openai/shims/${r.kind}'\` before importing anything else from openai`);if(Ut)throw new Error(`can't \`import 'openai/shims/${r.kind}'\` after \`import 'openai/shims/${Ut}'\``);Ds=e.auto,Ut=r.kind,Za=r.fetch,eo=r.FormData,yr=r.File,to=r.ReadableStream,no=r.getMultipartRequestOptions,ro=r.getDefaultAgent,so=r.fileFromPath,ao=r.isFsReadStream}class Cu{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}function xu({manuallyImported:r}={}){const e=r?"You may need to use polyfills":"Add one of these imports before your first `import  from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let t,n,s,a;try{t=fetch,n=Request,s=Response,a=Headers}catch(o){throw new Error(`this environment is missing the following Web Fetch API type: ${o.message}. ${e}`)}return{kind:"web",fetch:t,Request:n,Response:s,Headers:a,FormData:typeof FormData<"u"?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${e}`)}},Blob:typeof Blob<"u"?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${e}`)}},File:typeof File<"u"?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${e}`)}},ReadableStream:typeof ReadableStream<"u"?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${e}`)}},getMultipartRequestOptions:async(o,i)=>({...i,body:new Cu(o)}),getDefaultAgent:o=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:o=>!1}}Ut||Pu(xu(),{auto:!0});class O extends Error{}class ee extends O{constructor(e,t,n,s){super(`${ee.makeMessage(e,t,n)}`),this.status=e,this.headers=s,this.request_id=s==null?void 0:s["x-request-id"],this.error=t;const a=t;this.code=a==null?void 0:a.code,this.param=a==null?void 0:a.param,this.type=a==null?void 0:a.type}static makeMessage(e,t,n){const s=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):n;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,t,n,s){if(!e||!s)return new Mn({message:n,cause:wr(t)});const a=t==null?void 0:t.error;return e===400?new oo(e,a,n,s):e===401?new io(e,a,n,s):e===403?new lo(e,a,n,s):e===404?new co(e,a,n,s):e===409?new uo(e,a,n,s):e===422?new ho(e,a,n,s):e===429?new fo(e,a,n,s):e>=500?new po(e,a,n,s):new ee(e,a,n,s)}}class ve extends ee{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Mn extends ee{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class Ur extends Mn{constructor({message:e}={}){super({message:e??"Request timed out."})}}class oo extends ee{}class io extends ee{}class lo extends ee{}class co extends ee{}class uo extends ee{}class ho extends ee{}class fo extends ee{}class po extends ee{}class go extends O{constructor(){super("Could not parse response content as the length limit was reached")}}class mo extends O{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class Ke{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let t=this.decodeText(e);if(this.trailingCR&&(t="\r"+t,this.trailingCR=!1),t.endsWith("\r")&&(this.trailingCR=!0,t=t.slice(0,-1)),!t)return[];const n=Ke.NEWLINE_CHARS.has(t[t.length-1]||"");let s=t.split(Ke.NEWLINE_REGEXP);return n&&s.pop(),s.length===1&&!n?(this.buffer.push(s[0]),[]):(this.buffer.length>0&&(s=[this.buffer.join("")+s[0],...s.slice(1)],this.buffer=[]),n||(this.buffer=[s.pop()||""]),s)}decodeText(e){if(e==null)return"";if(typeof e=="string")return e;if(typeof Buffer<"u"){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new O(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if(typeof TextDecoder<"u"){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new O(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new O("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}Ke.NEWLINE_CHARS=new Set([`
`,"\r"]);Ke.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function bo(r){if(r[Symbol.asyncIterator])return r;const e=r.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}class Ce{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let n=!1;async function*s(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let a=!1;try{for await(const o of Au(e,t))if(!a){if(o.data.startsWith("[DONE]")){a=!0;continue}if(o.event===null){let i;try{i=JSON.parse(o.data)}catch(l){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),l}if(i&&i.error)throw new ee(void 0,i.error,void 0,void 0);yield i}else{let i;try{i=JSON.parse(o.data)}catch(l){throw console.error("Could not parse message into JSON:",o.data),console.error("From chunk:",o.raw),l}if(o.event=="error")throw new ee(void 0,i.error,i.message,void 0);yield{event:o.event,data:i}}}a=!0}catch(o){if(o instanceof Error&&o.name==="AbortError")return;throw o}finally{a||t.abort()}}return new Ce(s,t)}static fromReadableStream(e,t){let n=!1;async function*s(){const o=new Ke,i=bo(e);for await(const l of i)for(const c of o.decode(l))yield c;for(const l of o.flush())yield l}async function*a(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let o=!1;try{for await(const i of s())o||i&&(yield JSON.parse(i));o=!0}catch(i){if(i instanceof Error&&i.name==="AbortError")return;throw i}finally{o||t.abort()}}return new Ce(a,t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],n=this.iterator(),s=a=>({next:()=>{if(a.length===0){const o=n.next();e.push(o),t.push(o)}return a.shift()}});return[new Ce(()=>s(e),this.controller),new Ce(()=>s(t),this.controller)]}toReadableStream(){const e=this;let t;const n=new TextEncoder;return new to({async start(){t=e[Symbol.asyncIterator]()},async pull(s){try{const{value:a,done:o}=await t.next();if(o)return s.close();const i=n.encode(JSON.stringify(a)+`
`);s.enqueue(i)}catch(a){s.error(a)}},async cancel(){var s;await((s=t.return)==null?void 0:s.call(t))}})}}async function*Au(r,e){if(!r.body)throw e.abort(),new O("Attempted to iterate over a response with no body");const t=new Eu,n=new Ke,s=bo(r.body);for await(const a of Ou(s))for(const o of n.decode(a)){const i=t.decode(o);i&&(yield i)}for(const a of n.flush()){const o=t.decode(a);o&&(yield o)}}async function*Ou(r){let e=new Uint8Array;for await(const t of r){if(t==null)continue;const n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?new TextEncoder().encode(t):t;let s=new Uint8Array(e.length+n.length);s.set(e),s.set(n,e.length),e=s;let a;for(;(a=Tu(e))!==-1;)yield e.slice(0,a),e=e.slice(a)}e.length>0&&(yield e)}function Tu(r){for(let n=0;n<r.length-2;n++){if(r[n]===10&&r[n+1]===10||r[n]===13&&r[n+1]===13)return n+2;if(r[n]===13&&r[n+1]===10&&n+3<r.length&&r[n+2]===13&&r[n+3]===10)return n+4}return-1}class Eu{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,n,s]=Iu(e,":");return s.startsWith(" ")&&(s=s.substring(1)),t==="event"?this.event=s:t==="data"&&this.data.push(s),null}}function Iu(r,e){const t=r.indexOf(e);return t!==-1?[r.substring(0,t),e,r.substring(t+e.length)]:[r,"",""]}const vo=r=>r!=null&&typeof r=="object"&&typeof r.url=="string"&&typeof r.blob=="function",yo=r=>r!=null&&typeof r=="object"&&typeof r.name=="string"&&typeof r.lastModified=="number"&&Fn(r),Fn=r=>r!=null&&typeof r=="object"&&typeof r.size=="number"&&typeof r.type=="string"&&typeof r.text=="function"&&typeof r.slice=="function"&&typeof r.arrayBuffer=="function",Ru=r=>yo(r)||vo(r)||ao(r);async function _o(r,e,t){var s;if(r=await r,yo(r))return r;if(vo(r)){const a=await r.blob();e||(e=new URL(r.url).pathname.split(/[\\/]/).pop()??"unknown_file");const o=Fn(a)?[await a.arrayBuffer()]:[a];return new yr(o,e,t)}const n=await ju(r);if(e||(e=Du(r)??"unknown_file"),!(t!=null&&t.type)){const a=(s=n[0])==null?void 0:s.type;typeof a=="string"&&(t={...t,type:a})}return new yr(n,e,t)}async function ju(r){var t;let e=[];if(typeof r=="string"||ArrayBuffer.isView(r)||r instanceof ArrayBuffer)e.push(r);else if(Fn(r))e.push(await r.arrayBuffer());else if(Nu(r))for await(const n of r)e.push(n);else throw new Error(`Unexpected data type: ${typeof r}; constructor: ${(t=r==null?void 0:r.constructor)==null?void 0:t.name}; props: ${Lu(r)}`);return e}function Lu(r){return`[${Object.getOwnPropertyNames(r).map(t=>`"${t}"`).join(", ")}]`}function Du(r){var e;return Yn(r.name)||Yn(r.filename)||((e=Yn(r.path))==null?void 0:e.split(/[\\/]/).pop())}const Yn=r=>{if(typeof r=="string")return r;if(typeof Buffer<"u"&&r instanceof Buffer)return String(r)},Nu=r=>r!=null&&typeof r=="object"&&typeof r[Symbol.asyncIterator]=="function",Ns=r=>r&&typeof r=="object"&&r.body&&r[Symbol.toStringTag]==="MultipartBody",_t=async r=>{const e=await Bu(r.body);return no(e,r)},Bu=async r=>{const e=new eo;return await Promise.all(Object.entries(r||{}).map(([t,n])=>_r(e,t,n))),e},_r=async(r,e,t)=>{if(t!==void 0){if(t==null)throw new TypeError(`Received null for "${e}"; to pass null in FormData, you must use the string 'null'`);if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")r.append(e,String(t));else if(Ru(t)){const n=await _o(t);r.append(e,n)}else if(Array.isArray(t))await Promise.all(t.map(n=>_r(r,e+"[]",n)));else if(typeof t=="object")await Promise.all(Object.entries(t).map(([n,s])=>_r(r,`${e}[${n}]`,s)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${t} instead`)}};var ct={},Uu=function(r,e,t,n,s){if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(r,t),t},Mu=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},un;async function wo(r){const{response:e}=r;if(r.options.stream)return ut("response",e.status,e.url,e.headers,e.body),r.options.__streamClass?r.options.__streamClass.fromSSEResponse(e,r.controller):Ce.fromSSEResponse(e,r.controller);if(e.status===204)return null;if(r.options.__binaryResponse)return e;const t=e.headers.get("content-type");if((t==null?void 0:t.includes("application/json"))||(t==null?void 0:t.includes("application/vnd.api+json"))){const a=await e.json();return ut("response",e.status,e.url,e.headers,a),So(a,e)}const s=await e.text();return ut("response",e.status,e.url,e.headers,s),s}function So(r,e){return!r||typeof r!="object"||Array.isArray(r)?r:Object.defineProperty(r,"_request_id",{value:e.headers.get("x-request-id"),enumerable:!1})}class Vn extends Promise{constructor(e,t=wo){super(n=>{n(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new Vn(this.responsePromise,async t=>So(e(await this.parseResponse(t),t),t.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class Fu{constructor({baseURL:e,maxRetries:t=2,timeout:n=6e5,httpAgent:s,fetch:a}){this.baseURL=e,this.maxRetries=Zn("maxRetries",t),this.timeout=Zn("timeout",n),this.httpAgent=s,this.fetch=a??Za}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...zu(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${Qu()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,n){return this.request(Promise.resolve(n).then(async s=>{const a=s&&Fn(s==null?void 0:s.body)?new DataView(await s.body.arrayBuffer()):(s==null?void 0:s.body)instanceof DataView?s.body:(s==null?void 0:s.body)instanceof ArrayBuffer?new DataView(s.body):s&&ArrayBuffer.isView(s==null?void 0:s.body)?new DataView(s.body.buffer):s==null?void 0:s.body;return{method:e,path:t,...s,body:a}}))}getAPIList(e,t,n){return this.requestAPIList(t,{method:"get",path:e,...n})}calculateContentLength(e){if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.byteLength(e,"utf8").toString();if(typeof TextEncoder<"u")return new TextEncoder().encode(e).length.toString()}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:t=0}={}){var g;const{method:n,path:s,query:a,headers:o={}}=e,i=ArrayBuffer.isView(e.body)||e.__binaryRequest&&typeof e.body=="string"?e.body:Ns(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,l=this.calculateContentLength(i),c=this.buildURL(s,a);"timeout"in e&&Zn("timeout",e.timeout);const u=e.timeout??this.timeout,d=e.httpAgent??this.httpAgent??ro(c),h=u+1e3;typeof((g=d==null?void 0:d.options)==null?void 0:g.timeout)=="number"&&h>(d.options.timeout??0)&&(d.options.timeout=h),this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const f=this.buildHeaders({options:e,headers:o,contentLength:l,retryCount:t});return{req:{method:n,...i&&{body:i},headers:f,...d&&{agent:d},signal:e.signal??null},url:c,timeout:u}}buildHeaders({options:e,headers:t,contentLength:n,retryCount:s}){const a={};n&&(a["content-length"]=n);const o=this.defaultHeaders(e);return Fs(a,o),Fs(a,t),Ns(e.body)&&Ut!=="node"&&delete a["content-type"],Ws(o,"x-stainless-retry-count")===void 0&&Ws(t,"x-stainless-retry-count")===void 0&&(a["x-stainless-retry-count"]=String(s)),this.validateHeaders(a,t),a}async prepareOptions(e){}async prepareRequest(e,{url:t,options:n}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(t=>[...t])):{...e}:{}}makeStatusError(e,t,n,s){return ee.generate(e,t,n,s)}request(e,t=null){return new Vn(this.makeRequest(e,t))}async makeRequest(e,t){var d,h;const n=await e,s=n.maxRetries??this.maxRetries;t==null&&(t=s),await this.prepareOptions(n);const{req:a,url:o,timeout:i}=this.buildRequest(n,{retryCount:s-t});if(await this.prepareRequest(a,{url:o,options:n}),ut("request",o,n,a.headers),(d=n.signal)!=null&&d.aborted)throw new ve;const l=new AbortController,c=await this.fetchWithTimeout(o,a,i,l).catch(wr);if(c instanceof Error){if((h=n.signal)!=null&&h.aborted)throw new ve;if(t)return this.retryRequest(n,t);throw c.name==="AbortError"?new Ur:new Mn({cause:c})}const u=Wu(c.headers);if(!c.ok){if(t&&this.shouldRetry(c)){const v=`retrying, ${t} attempts remaining`;return ut(`response (error; ${v})`,c.status,o,u),this.retryRequest(n,t,u)}const f=await c.text().catch(v=>wr(v).message),p=Gu(f),g=p?void 0:f;throw ut(`response (error; ${t?"(error; no more retries left)":"(error; not retryable)"})`,c.status,o,u,g),this.makeStatusError(c.status,p,g,u)}return{response:c,options:n,controller:l}}requestAPIList(e,t){const n=this.makeRequest(t,null);return new Vu(this,n,e)}buildURL(e,t){const n=Xu(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),s=this.defaultQuery();return $o(s)||(t={...s,...t}),typeof t=="object"&&t&&!Array.isArray(t)&&(n.search=this.stringifyQuery(t)),n.toString()}stringifyQuery(e){return Object.entries(e).filter(([t,n])=>typeof n<"u").map(([t,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(t)}=`;throw new O(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,t,n,s){const{signal:a,...o}=t||{};a&&a.addEventListener("abort",()=>s.abort());const i=setTimeout(()=>s.abort(),n),l={signal:s.signal,...o};return l.method&&(l.method=l.method.toUpperCase()),this.fetch.call(void 0,e,l).finally(()=>{clearTimeout(i)})}shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,n){let s;const a=n==null?void 0:n["retry-after-ms"];if(a){const i=parseFloat(a);Number.isNaN(i)||(s=i)}const o=n==null?void 0:n["retry-after"];if(o&&!s){const i=parseFloat(o);Number.isNaN(i)?s=Date.parse(o)-Date.now():s=i*1e3}if(!(s&&0<=s&&s<60*1e3)){const i=e.maxRetries??this.maxRetries;s=this.calculateDefaultRetryTimeoutMillis(t,i)}return await Zt(s),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,o=Math.min(.5*Math.pow(2,a),8),i=1-Math.random()*.25;return o*i*1e3}getUserAgent(){return`${this.constructor.name}/JS ${st}`}}class ko{constructor(e,t,n,s){un.set(this,void 0),Uu(this,un,e),this.options=s,this.response=t,this.body=n}hasNextPage(){return this.getPaginatedItems().length?this.nextPageInfo()!=null:!1}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new O("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const t={...this.options};if("params"in e&&typeof t.query=="object")t.query={...t.query,...e.params};else if("url"in e){const n=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(const[s,a]of n)e.url.searchParams.set(s,a);t.query=void 0,t.path=e.url.toString()}return await Mu(this,un,"f").requestAPIList(this.constructor,t)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(un=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class Vu extends Vn{constructor(e,t,n){super(t,async s=>new n(e,s.response,await wo(s),s.options))}async*[Symbol.asyncIterator](){const e=await this;for await(const t of e)yield t}}const Wu=r=>new Proxy(Object.fromEntries(r.entries()),{get(e,t){const n=t.toString();return e[n.toLowerCase()]||e[n]}}),qu={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},oe=r=>typeof r=="object"&&r!==null&&!$o(r)&&Object.keys(r).every(e=>Po(qu,e)),Hu=()=>{var e;if(typeof Deno<"u"&&Deno.build!=null)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":st,"X-Stainless-OS":Us(Deno.build.os),"X-Stainless-Arch":Bs(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:((e=Deno.version)==null?void 0:e.deno)??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":st,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if(Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":st,"X-Stainless-OS":Us(process.platform),"X-Stainless-Arch":Bs(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const r=Ju();return r?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":st,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${r.browser}`,"X-Stainless-Runtime-Version":r.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":st,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Ju(){if(typeof navigator>"u"||!navigator)return null;const r=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of r){const n=t.exec(navigator.userAgent);if(n){const s=n[1]||0,a=n[2]||0,o=n[3]||0;return{browser:e,version:`${s}.${a}.${o}`}}}return null}const Bs=r=>r==="x32"?"x32":r==="x86_64"||r==="x64"?"x64":r==="arm"?"arm":r==="aarch64"||r==="arm64"?"arm64":r?`other:${r}`:"unknown",Us=r=>(r=r.toLowerCase(),r.includes("ios")?"iOS":r==="android"?"Android":r==="darwin"?"MacOS":r==="win32"?"Windows":r==="freebsd"?"FreeBSD":r==="openbsd"?"OpenBSD":r==="linux"?"Linux":r?`Other:${r}`:"Unknown");let Ms;const zu=()=>Ms??(Ms=Hu()),Gu=r=>{try{return JSON.parse(r)}catch{return}},Ku=/^[a-z][a-z0-9+.-]*:/i,Xu=r=>Ku.test(r),Zt=r=>new Promise(e=>setTimeout(e,r)),Zn=(r,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new O(`${r} must be an integer`);if(e<0)throw new O(`${r} must be a positive integer`);return e},wr=r=>{if(r instanceof Error)return r;if(typeof r=="object"&&r!==null)try{return new Error(JSON.stringify(r))}catch{}return new Error(r)},dn=r=>{var e,t,n,s;if(typeof process<"u")return((e=ct==null?void 0:ct[r])==null?void 0:e.trim())??void 0;if(typeof Deno<"u")return(s=(n=(t=Deno.env)==null?void 0:t.get)==null?void 0:n.call(t,r))==null?void 0:s.trim()};function $o(r){if(!r)return!0;for(const e in r)return!1;return!0}function Po(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function Fs(r,e){for(const t in e){if(!Po(e,t))continue;const n=t.toLowerCase();if(!n)continue;const s=e[t];s===null?delete r[n]:s!==void 0&&(r[n]=s)}}const Vs=new Set(["authorization","api-key"]);function ut(r,...e){if(typeof process<"u"&&(ct==null?void 0:ct.DEBUG)==="true"){const t=e.map(n=>{if(!n)return n;if(n.headers){const a={...n,headers:{...n.headers}};for(const o in n.headers)Vs.has(o.toLowerCase())&&(a.headers[o]="REDACTED");return a}let s=null;for(const a in n)Vs.has(a.toLowerCase())&&(s??(s={...n}),s[a]="REDACTED");return s??n});console.log(`OpenAI:DEBUG:${r}`,...t)}}const Qu=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const e=Math.random()*16|0;return(r==="x"?e:e&3|8).toString(16)}),Yu=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u",Zu=r=>typeof(r==null?void 0:r.get)=="function",Ws=(r,e)=>{var n;const t=e.toLowerCase();if(Zu(r)){const s=((n=e[0])==null?void 0:n.toUpperCase())+e.substring(1).replace(/([^\w])(\w)/g,(a,o,i)=>o+i.toUpperCase());for(const a of[e,t,e.toUpperCase(),s]){const o=r.get(a);if(o)return o}}for(const[s,a]of Object.entries(r))if(s.toLowerCase()===t)return Array.isArray(a)?(a.length<=1||console.warn(`Received ${a.length} entries for the ${e} header, using the first entry.`),a[0]):a};function er(r){return r!=null&&typeof r=="object"&&!Array.isArray(r)}class ed extends ko{constructor(e,t,n,s){super(e,t,n,s),this.data=n.data||[],this.object=n.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class _e extends ko{constructor(e,t,n,s){super(e,t,n,s),this.data=n.data||[]}getPaginatedItems(){return this.data??[]}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){var n;const e=this.getPaginatedItems();if(!e.length)return null;const t=(n=e[e.length-1])==null?void 0:n.id;return t?{params:{after:t}}:null}}class L{constructor(e){this._client=e}}let Co=class extends L{create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}},Mr=class extends L{constructor(){super(...arguments),this.completions=new Co(this._client)}};Mr.Completions=Co;class xo extends L{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:{Accept:"application/octet-stream",...t==null?void 0:t.headers},__binaryResponse:!0})}}class Ao extends L{create(e,t){return this._client.post("/audio/transcriptions",_t({body:e,...t}))}}class Oo extends L{create(e,t){return this._client.post("/audio/translations",_t({body:e,...t}))}}class en extends L{constructor(){super(...arguments),this.transcriptions=new Ao(this._client),this.translations=new Oo(this._client),this.speech=new xo(this._client)}}en.Transcriptions=Ao;en.Translations=Oo;en.Speech=xo;class Fr extends L{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(`/batches/${e}`,t)}list(e={},t){return oe(e)?this.list({},e):this._client.getAPIList("/batches",Vr,{query:e,...t})}cancel(e,t){return this._client.post(`/batches/${e}/cancel`,t)}}class Vr extends _e{}Fr.BatchesPage=Vr;class Wr extends L{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,n){return this._client.post(`/assistants/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}list(e={},t){return oe(e)?this.list({},e):this._client.getAPIList("/assistants",qr,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}del(e,t){return this._client.delete(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class qr extends _e{}Wr.AssistantsPage=qr;function qs(r){return typeof r.parse=="function"}const dt=r=>(r==null?void 0:r.role)==="assistant",To=r=>(r==null?void 0:r.role)==="function",Eo=r=>(r==null?void 0:r.role)==="tool";var ge=function(r,e,t,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(r,t):s?s.value=t:e.set(r,t),t},q=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Sr,gn,mn,Et,It,bn,Rt,Te,jt,Pn,Cn,at,Io;class Ro{constructor(){Sr.add(this),this.controller=new AbortController,gn.set(this,void 0),mn.set(this,()=>{}),Et.set(this,()=>{}),It.set(this,void 0),bn.set(this,()=>{}),Rt.set(this,()=>{}),Te.set(this,{}),jt.set(this,!1),Pn.set(this,!1),Cn.set(this,!1),at.set(this,!1),ge(this,gn,new Promise((e,t)=>{ge(this,mn,e,"f"),ge(this,Et,t,"f")}),"f"),ge(this,It,new Promise((e,t)=>{ge(this,bn,e,"f"),ge(this,Rt,t,"f")}),"f"),q(this,gn,"f").catch(()=>{}),q(this,It,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},q(this,Sr,"m",Io).bind(this))},0)}_connected(){this.ended||(q(this,mn,"f").call(this),this._emit("connect"))}get ended(){return q(this,jt,"f")}get errored(){return q(this,Pn,"f")}get aborted(){return q(this,Cn,"f")}abort(){this.controller.abort()}on(e,t){return(q(this,Te,"f")[e]||(q(this,Te,"f")[e]=[])).push({listener:t}),this}off(e,t){const n=q(this,Te,"f")[e];if(!n)return this;const s=n.findIndex(a=>a.listener===t);return s>=0&&n.splice(s,1),this}once(e,t){return(q(this,Te,"f")[e]||(q(this,Te,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,n)=>{ge(this,at,!0,"f"),e!=="error"&&this.once("error",n),this.once(e,t)})}async done(){ge(this,at,!0,"f"),await q(this,It,"f")}_emit(e,...t){if(q(this,jt,"f"))return;e==="end"&&(ge(this,jt,!0,"f"),q(this,bn,"f").call(this));const n=q(this,Te,"f")[e];if(n&&(q(this,Te,"f")[e]=n.filter(s=>!s.once),n.forEach(({listener:s})=>s(...t))),e==="abort"){const s=t[0];!q(this,at,"f")&&!(n!=null&&n.length)&&Promise.reject(s),q(this,Et,"f").call(this,s),q(this,Rt,"f").call(this,s),this._emit("end");return}if(e==="error"){const s=t[0];!q(this,at,"f")&&!(n!=null&&n.length)&&Promise.reject(s),q(this,Et,"f").call(this,s),q(this,Rt,"f").call(this,s),this._emit("end")}}_emitFinal(){}}gn=new WeakMap,mn=new WeakMap,Et=new WeakMap,It=new WeakMap,bn=new WeakMap,Rt=new WeakMap,Te=new WeakMap,jt=new WeakMap,Pn=new WeakMap,Cn=new WeakMap,at=new WeakMap,Sr=new WeakSet,Io=function(e){if(ge(this,Pn,!0,"f"),e instanceof Error&&e.name==="AbortError"&&(e=new ve),e instanceof ve)return ge(this,Cn,!0,"f"),this._emit("abort",e);if(e instanceof O)return this._emit("error",e);if(e instanceof Error){const t=new O(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new O(String(e)))};function jo(r){return(r==null?void 0:r.$brand)==="auto-parseable-response-format"}function tn(r){return(r==null?void 0:r.$brand)==="auto-parseable-tool"}function td(r,e){return!e||!Lo(e)?{...r,choices:r.choices.map(t=>({...t,message:{...t.message,parsed:null,tool_calls:t.message.tool_calls??[]}}))}:Hr(r,e)}function Hr(r,e){const t=r.choices.map(n=>{var s;if(n.finish_reason==="length")throw new go;if(n.finish_reason==="content_filter")throw new mo;return{...n,message:{...n.message,tool_calls:((s=n.message.tool_calls)==null?void 0:s.map(a=>rd(e,a)))??[],parsed:n.message.content&&!n.message.refusal?nd(e,n.message.content):null}}});return{...r,choices:t}}function nd(r,e){var t,n;return((t=r.response_format)==null?void 0:t.type)!=="json_schema"?null:((n=r.response_format)==null?void 0:n.type)==="json_schema"?"$parseRaw"in r.response_format?r.response_format.$parseRaw(e):JSON.parse(e):null}function rd(r,e){var n;const t=(n=r.tools)==null?void 0:n.find(s=>{var a;return((a=s.function)==null?void 0:a.name)===e.function.name});return{...e,function:{...e.function,parsed_arguments:tn(t)?t.$parseRaw(e.function.arguments):t!=null&&t.function.strict?JSON.parse(e.function.arguments):null}}}function sd(r,e){var n;if(!r)return!1;const t=(n=r.tools)==null?void 0:n.find(s=>{var a;return((a=s.function)==null?void 0:a.name)===e.function.name});return tn(t)||(t==null?void 0:t.function.strict)||!1}function Lo(r){var e;return jo(r.response_format)?!0:((e=r.tools)==null?void 0:e.some(t=>tn(t)||t.type==="function"&&t.function.strict===!0))??!1}function ad(r){for(const e of r??[]){if(e.type!=="function")throw new O(`Currently only \`function\` tool types support auto-parsing; Received \`${e.type}\``);if(e.function.strict!==!0)throw new O(`The \`${e.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}var re=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},te,kr,xn,$r,Pr,Cr,Do,xr;const Hs=10;class No extends Ro{constructor(){super(...arguments),te.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var n;this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=(n=e.choices[0])==null?void 0:n.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),(To(e)||Eo(e))&&e.content)this._emit("functionCallResult",e.content);else if(dt(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(dt(e)&&e.tool_calls)for(const n of e.tool_calls)n.type==="function"&&this._emit("functionCall",n.function)}}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new O("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),re(this,te,"m",kr).call(this)}async finalMessage(){return await this.done(),re(this,te,"m",xn).call(this)}async finalFunctionCall(){return await this.done(),re(this,te,"m",$r).call(this)}async finalFunctionCallResult(){return await this.done(),re(this,te,"m",Pr).call(this)}async totalUsage(){return await this.done(),re(this,te,"m",Cr).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=re(this,te,"m",xn).call(this);t&&this._emit("finalMessage",t);const n=re(this,te,"m",kr).call(this);n&&this._emit("finalContent",n);const s=re(this,te,"m",$r).call(this);s&&this._emit("finalFunctionCall",s);const a=re(this,te,"m",Pr).call(this);a!=null&&this._emit("finalFunctionCallResult",a),this._chatCompletions.some(o=>o.usage)&&this._emit("totalUsage",re(this,te,"m",Cr).call(this))}async _createChatCompletion(e,t,n){const s=n==null?void 0:n.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),re(this,te,"m",Do).call(this,t);const a=await e.chat.completions.create({...t,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Hr(a,t))}async _runChatCompletion(e,t,n){for(const s of t.messages)this._addMessage(s,!1);return await this._createChatCompletion(e,t,n)}async _runFunctions(e,t,n){var h;const s="function",{function_call:a="auto",stream:o,...i}=t,l=typeof a!="string"&&(a==null?void 0:a.name),{maxChatCompletions:c=Hs}=n||{},u={};for(const f of t.functions)u[f.name||f.function.name]=f;const d=t.functions.map(f=>({name:f.name||f.function.name,parameters:f.parameters,description:f.description}));for(const f of t.messages)this._addMessage(f,!1);for(let f=0;f<c;++f){const g=(h=(await this._createChatCompletion(e,{...i,function_call:a,functions:d,messages:[...this.messages]},n)).choices[0])==null?void 0:h.message;if(!g)throw new O("missing message in ChatCompletion response");if(!g.function_call)return;const{name:m,arguments:S}=g.function_call,v=u[m];if(v){if(l&&l!==m){const x=`Invalid function_call: ${JSON.stringify(m)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:s,name:m,content:x});continue}}else{const x=`Invalid function_call: ${JSON.stringify(m)}. Available options are: ${d.map(I=>JSON.stringify(I.name)).join(", ")}. Please try again`;this._addMessage({role:s,name:m,content:x});continue}let b;try{b=qs(v)?await v.parse(S):S}catch(x){this._addMessage({role:s,name:m,content:x instanceof Error?x.message:String(x)});continue}const y=await v.function(b,this),k=re(this,te,"m",xr).call(this,y);if(this._addMessage({role:s,name:m,content:k}),l)return}}async _runTools(e,t,n){var f,p,g;const s="tool",{tool_choice:a="auto",stream:o,...i}=t,l=typeof a!="string"&&((f=a==null?void 0:a.function)==null?void 0:f.name),{maxChatCompletions:c=Hs}=n||{},u=t.tools.map(m=>{if(tn(m)){if(!m.$callback)throw new O("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:m.$callback,name:m.function.name,description:m.function.description||"",parameters:m.function.parameters,parse:m.$parseRaw,strict:!0}}}return m}),d={};for(const m of u)m.type==="function"&&(d[m.function.name||m.function.function.name]=m.function);const h="tools"in t?u.map(m=>m.type==="function"?{type:"function",function:{name:m.function.name||m.function.function.name,parameters:m.function.parameters,description:m.function.description,strict:m.function.strict}}:m):void 0;for(const m of t.messages)this._addMessage(m,!1);for(let m=0;m<c;++m){const v=(p=(await this._createChatCompletion(e,{...i,tool_choice:a,tools:h,messages:[...this.messages]},n)).choices[0])==null?void 0:p.message;if(!v)throw new O("missing message in ChatCompletion response");if(!((g=v.tool_calls)!=null&&g.length))return;for(const b of v.tool_calls){if(b.type!=="function")continue;const y=b.id,{name:k,arguments:x}=b.function,I=d[k];if(I){if(l&&l!==k){const N=`Invalid tool_call: ${JSON.stringify(k)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:s,tool_call_id:y,content:N});continue}}else{const N=`Invalid tool_call: ${JSON.stringify(k)}. Available options are: ${Object.keys(d).map(Ye=>JSON.stringify(Ye)).join(", ")}. Please try again`;this._addMessage({role:s,tool_call_id:y,content:N});continue}let ue;try{ue=qs(I)?await I.parse(x):x}catch(N){const Ye=N instanceof Error?N.message:String(N);this._addMessage({role:s,tool_call_id:y,content:Ye});continue}const z=await I.function(ue,this),J=re(this,te,"m",xr).call(this,z);if(this._addMessage({role:s,tool_call_id:y,content:J}),l)return}}}}te=new WeakSet,kr=function(){return re(this,te,"m",xn).call(this).content??null},xn=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(dt(t)){const{function_call:n,...s}=t,a={...s,content:t.content??null,refusal:t.refusal??null};return n&&(a.function_call=n),a}}throw new O("stream ended without producing a ChatCompletionMessage with role=assistant")},$r=function(){var e,t;for(let n=this.messages.length-1;n>=0;n--){const s=this.messages[n];if(dt(s)&&(s!=null&&s.function_call))return s.function_call;if(dt(s)&&((e=s==null?void 0:s.tool_calls)!=null&&e.length))return(t=s.tool_calls.at(-1))==null?void 0:t.function}},Pr=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(To(t)&&t.content!=null||Eo(t)&&t.content!=null&&typeof t.content=="string"&&this.messages.some(n=>{var s;return n.role==="assistant"&&((s=n.tool_calls)==null?void 0:s.some(a=>a.type==="function"&&a.id===t.tool_call_id))}))return t.content}},Cr=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},Do=function(e){if(e.n!=null&&e.n>1)throw new O("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},xr=function(e){return typeof e=="string"?e:e===void 0?"undefined":JSON.stringify(e)};class Wt extends No{static runFunctions(e,t,n){const s=new Wt,a={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runFunctions"}};return s._run(()=>s._runFunctions(e,t,a)),s}static runTools(e,t,n){const s=new Wt,a={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,t,a)),s}_addMessage(e,t=!0){super._addMessage(e,t),dt(e)&&e.content&&this._emit("content",e.content)}}const Bo=1,Uo=2,Mo=4,Fo=8,Vo=16,Wo=32,qo=64,Ho=128,Jo=256,zo=Ho|Jo,Go=Vo|Wo|zo|qo,Ko=Bo|Uo|Go,Xo=Mo|Fo,od=Ko|Xo,Q={STR:Bo,NUM:Uo,ARR:Mo,OBJ:Fo,NULL:Vo,BOOL:Wo,NAN:qo,INFINITY:Ho,MINUS_INFINITY:Jo,INF:zo,SPECIAL:Go,ATOM:Ko,COLLECTION:Xo,ALL:od};class id extends Error{}class ld extends Error{}function cd(r,e=Q.ALL){if(typeof r!="string")throw new TypeError(`expecting str, got ${typeof r}`);if(!r.trim())throw new Error(`${r} is empty`);return ud(r.trim(),e)}const ud=(r,e)=>{const t=r.length;let n=0;const s=h=>{throw new id(`${h} at position ${n}`)},a=h=>{throw new ld(`${h} at position ${n}`)},o=()=>(d(),n>=t&&s("Unexpected end of input"),r[n]==='"'?i():r[n]==="{"?l():r[n]==="["?c():r.substring(n,n+4)==="null"||Q.NULL&e&&t-n<4&&"null".startsWith(r.substring(n))?(n+=4,null):r.substring(n,n+4)==="true"||Q.BOOL&e&&t-n<4&&"true".startsWith(r.substring(n))?(n+=4,!0):r.substring(n,n+5)==="false"||Q.BOOL&e&&t-n<5&&"false".startsWith(r.substring(n))?(n+=5,!1):r.substring(n,n+8)==="Infinity"||Q.INFINITY&e&&t-n<8&&"Infinity".startsWith(r.substring(n))?(n+=8,1/0):r.substring(n,n+9)==="-Infinity"||Q.MINUS_INFINITY&e&&1<t-n&&t-n<9&&"-Infinity".startsWith(r.substring(n))?(n+=9,-1/0):r.substring(n,n+3)==="NaN"||Q.NAN&e&&t-n<3&&"NaN".startsWith(r.substring(n))?(n+=3,NaN):u()),i=()=>{const h=n;let f=!1;for(n++;n<t&&(r[n]!=='"'||f&&r[n-1]==="\\");)f=r[n]==="\\"?!f:!1,n++;if(r.charAt(n)=='"')try{return JSON.parse(r.substring(h,++n-Number(f)))}catch(p){a(String(p))}else if(Q.STR&e)try{return JSON.parse(r.substring(h,n-Number(f))+'"')}catch{return JSON.parse(r.substring(h,r.lastIndexOf("\\"))+'"')}s("Unterminated string literal")},l=()=>{n++,d();const h={};try{for(;r[n]!=="}";){if(d(),n>=t&&Q.OBJ&e)return h;const f=i();d(),n++;try{const p=o();Object.defineProperty(h,f,{value:p,writable:!0,enumerable:!0,configurable:!0})}catch(p){if(Q.OBJ&e)return h;throw p}d(),r[n]===","&&n++}}catch{if(Q.OBJ&e)return h;s("Expected '}' at end of object")}return n++,h},c=()=>{n++;const h=[];try{for(;r[n]!=="]";)h.push(o()),d(),r[n]===","&&n++}catch{if(Q.ARR&e)return h;s("Expected ']' at end of array")}return n++,h},u=()=>{if(n===0){r==="-"&&Q.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(r)}catch(f){if(Q.NUM&e)try{return r[r.length-1]==="."?JSON.parse(r.substring(0,r.lastIndexOf("."))):JSON.parse(r.substring(0,r.lastIndexOf("e")))}catch{}a(String(f))}}const h=n;for(r[n]==="-"&&n++;r[n]&&!",]}".includes(r[n]);)n++;n==t&&!(Q.NUM&e)&&s("Unterminated number literal");try{return JSON.parse(r.substring(h,n))}catch{r.substring(h,n)==="-"&&Q.NUM&e&&s("Not sure what '-' is");try{return JSON.parse(r.substring(h,r.lastIndexOf("e")))}catch(p){a(String(p))}}},d=()=>{for(;n<t&&` 
\r	`.includes(r[n]);)n++};return o()},Js=r=>cd(r,Q.ALL^Q.NUM);var nt=function(r,e,t,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(r,t):s?s.value=t:e.set(r,t),t},D=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},G,xe,rt,Re,tr,hn,nr,rr,sr,fn,ar,zs;class qt extends No{constructor(e){super(),G.add(this),xe.set(this,void 0),rt.set(this,void 0),Re.set(this,void 0),nt(this,xe,e,"f"),nt(this,rt,[],"f")}get currentChatCompletionSnapshot(){return D(this,Re,"f")}static fromReadableStream(e){const t=new qt(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,n){const s=new qt(t);return s._run(()=>s._runChatCompletion(e,{...t,stream:!0},{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),s}async _createChatCompletion(e,t,n){var o;super._createChatCompletion;const s=n==null?void 0:n.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort())),D(this,G,"m",tr).call(this);const a=await e.chat.completions.create({...t,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(const i of a)D(this,G,"m",nr).call(this,i);if((o=a.controller.signal)!=null&&o.aborted)throw new ve;return this._addChatCompletion(D(this,G,"m",fn).call(this))}async _fromReadableStream(e,t){var o;const n=t==null?void 0:t.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),D(this,G,"m",tr).call(this),this._connected();const s=Ce.fromReadableStream(e,this.controller);let a;for await(const i of s)a&&a!==i.id&&this._addChatCompletion(D(this,G,"m",fn).call(this)),D(this,G,"m",nr).call(this,i),a=i.id;if((o=s.controller.signal)!=null&&o.aborted)throw new ve;return this._addChatCompletion(D(this,G,"m",fn).call(this))}[(xe=new WeakMap,rt=new WeakMap,Re=new WeakMap,G=new WeakSet,tr=function(){this.ended||nt(this,Re,void 0,"f")},hn=function(t){let n=D(this,rt,"f")[t.index];return n||(n={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},D(this,rt,"f")[t.index]=n,n)},nr=function(t){var s,a,o,i,l,c,u,d,h,f,p,g,m,S,v;if(this.ended)return;const n=D(this,G,"m",zs).call(this,t);this._emit("chunk",t,n);for(const b of t.choices){const y=n.choices[b.index];b.delta.content!=null&&((s=y.message)==null?void 0:s.role)==="assistant"&&((a=y.message)!=null&&a.content)&&(this._emit("content",b.delta.content,y.message.content),this._emit("content.delta",{delta:b.delta.content,snapshot:y.message.content,parsed:y.message.parsed})),b.delta.refusal!=null&&((o=y.message)==null?void 0:o.role)==="assistant"&&((i=y.message)!=null&&i.refusal)&&this._emit("refusal.delta",{delta:b.delta.refusal,snapshot:y.message.refusal}),((l=b.logprobs)==null?void 0:l.content)!=null&&((c=y.message)==null?void 0:c.role)==="assistant"&&this._emit("logprobs.content.delta",{content:(u=b.logprobs)==null?void 0:u.content,snapshot:((d=y.logprobs)==null?void 0:d.content)??[]}),((h=b.logprobs)==null?void 0:h.refusal)!=null&&((f=y.message)==null?void 0:f.role)==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:(p=b.logprobs)==null?void 0:p.refusal,snapshot:((g=y.logprobs)==null?void 0:g.refusal)??[]});const k=D(this,G,"m",hn).call(this,y);y.finish_reason&&(D(this,G,"m",sr).call(this,y),k.current_tool_call_index!=null&&D(this,G,"m",rr).call(this,y,k.current_tool_call_index));for(const x of b.delta.tool_calls??[])k.current_tool_call_index!==x.index&&(D(this,G,"m",sr).call(this,y),k.current_tool_call_index!=null&&D(this,G,"m",rr).call(this,y,k.current_tool_call_index)),k.current_tool_call_index=x.index;for(const x of b.delta.tool_calls??[]){const I=(m=y.message.tool_calls)==null?void 0:m[x.index];I!=null&&I.type&&((I==null?void 0:I.type)==="function"?this._emit("tool_calls.function.arguments.delta",{name:(S=I.function)==null?void 0:S.name,index:x.index,arguments:I.function.arguments,parsed_arguments:I.function.parsed_arguments,arguments_delta:((v=x.function)==null?void 0:v.arguments)??""}):(I==null||I.type,void 0))}}},rr=function(t,n){var o,i,l;if(D(this,G,"m",hn).call(this,t).done_tool_calls.has(n))return;const a=(o=t.message.tool_calls)==null?void 0:o[n];if(!a)throw new Error("no tool call snapshot");if(!a.type)throw new Error("tool call snapshot missing `type`");if(a.type==="function"){const c=(l=(i=D(this,xe,"f"))==null?void 0:i.tools)==null?void 0:l.find(u=>u.type==="function"&&u.function.name===a.function.name);this._emit("tool_calls.function.arguments.done",{name:a.function.name,index:n,arguments:a.function.arguments,parsed_arguments:tn(c)?c.$parseRaw(a.function.arguments):c!=null&&c.function.strict?JSON.parse(a.function.arguments):null})}else a.type},sr=function(t){var s,a;const n=D(this,G,"m",hn).call(this,t);if(t.message.content&&!n.content_done){n.content_done=!0;const o=D(this,G,"m",ar).call(this);this._emit("content.done",{content:t.message.content,parsed:o?o.$parseRaw(t.message.content):null})}t.message.refusal&&!n.refusal_done&&(n.refusal_done=!0,this._emit("refusal.done",{refusal:t.message.refusal})),(s=t.logprobs)!=null&&s.content&&!n.logprobs_content_done&&(n.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:t.logprobs.content})),(a=t.logprobs)!=null&&a.refusal&&!n.logprobs_refusal_done&&(n.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:t.logprobs.refusal}))},fn=function(){if(this.ended)throw new O("stream has ended, this shouldn't happen");const t=D(this,Re,"f");if(!t)throw new O("request ended without sending any chunks");return nt(this,Re,void 0,"f"),nt(this,rt,[],"f"),dd(t,D(this,xe,"f"))},ar=function(){var n;const t=(n=D(this,xe,"f"))==null?void 0:n.response_format;return jo(t)?t:null},zs=function(t){var n,s,a,o;let i=D(this,Re,"f");const{choices:l,...c}=t;i?Object.assign(i,c):i=nt(this,Re,{...c,choices:[]},"f");for(const{delta:u,finish_reason:d,index:h,logprobs:f=null,...p}of t.choices){let g=i.choices[h];if(g||(g=i.choices[h]={finish_reason:d,index:h,message:{},logprobs:f,...p}),f)if(!g.logprobs)g.logprobs=Object.assign({},f);else{const{content:x,refusal:I,...ue}=f;Object.assign(g.logprobs,ue),x&&((n=g.logprobs).content??(n.content=[]),g.logprobs.content.push(...x)),I&&((s=g.logprobs).refusal??(s.refusal=[]),g.logprobs.refusal.push(...I))}if(d&&(g.finish_reason=d,D(this,xe,"f")&&Lo(D(this,xe,"f")))){if(d==="length")throw new go;if(d==="content_filter")throw new mo}if(Object.assign(g,p),!u)continue;const{content:m,refusal:S,function_call:v,role:b,tool_calls:y,...k}=u;if(Object.assign(g.message,k),S&&(g.message.refusal=(g.message.refusal||"")+S),b&&(g.message.role=b),v&&(g.message.function_call?(v.name&&(g.message.function_call.name=v.name),v.arguments&&((a=g.message.function_call).arguments??(a.arguments=""),g.message.function_call.arguments+=v.arguments)):g.message.function_call=v),m&&(g.message.content=(g.message.content||"")+m,!g.message.refusal&&D(this,G,"m",ar).call(this)&&(g.message.parsed=Js(g.message.content))),y){g.message.tool_calls||(g.message.tool_calls=[]);for(const{index:x,id:I,type:ue,function:z,...J}of y){const N=(o=g.message.tool_calls)[x]??(o[x]={});Object.assign(N,J),I&&(N.id=I),ue&&(N.type=ue),z&&(N.function??(N.function={name:z.name??"",arguments:""})),z!=null&&z.name&&(N.function.name=z.name),z!=null&&z.arguments&&(N.function.arguments+=z.arguments,sd(D(this,xe,"f"),N)&&(N.function.parsed_arguments=Js(N.function.arguments)))}}}return i},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("chunk",s=>{const a=t.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{n=!0;for(const s of t)s.resolve(void 0);t.length=0}),this.on("abort",s=>{n=!0;for(const a of t)a.reject(s);t.length=0}),this.on("error",s=>{n=!0;for(const a of t)a.reject(s);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((a,o)=>t.push({resolve:a,reject:o})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Ce(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function dd(r,e){const{id:t,choices:n,created:s,model:a,system_fingerprint:o,...i}=r,l={...i,id:t,choices:n.map(({message:c,finish_reason:u,index:d,logprobs:h,...f})=>{if(!u)throw new O(`missing finish_reason for choice ${d}`);const{content:p=null,function_call:g,tool_calls:m,...S}=c,v=c.role;if(!v)throw new O(`missing role for choice ${d}`);if(g){const{arguments:b,name:y}=g;if(b==null)throw new O(`missing function_call.arguments for choice ${d}`);if(!y)throw new O(`missing function_call.name for choice ${d}`);return{...f,message:{content:p,function_call:{arguments:b,name:y},role:v,refusal:c.refusal??null},finish_reason:u,index:d,logprobs:h}}return m?{...f,index:d,finish_reason:u,logprobs:h,message:{...S,role:v,content:p,refusal:c.refusal??null,tool_calls:m.map((b,y)=>{const{function:k,type:x,id:I,...ue}=b,{arguments:z,name:J,...N}=k||{};if(I==null)throw new O(`missing choices[${d}].tool_calls[${y}].id
${pn(r)}`);if(x==null)throw new O(`missing choices[${d}].tool_calls[${y}].type
${pn(r)}`);if(J==null)throw new O(`missing choices[${d}].tool_calls[${y}].function.name
${pn(r)}`);if(z==null)throw new O(`missing choices[${d}].tool_calls[${y}].function.arguments
${pn(r)}`);return{...ue,id:I,type:x,function:{...N,name:J,arguments:z}}})}}:{...f,message:{...S,content:p,role:v,refusal:c.refusal??null},finish_reason:u,index:d,logprobs:h}}),created:s,model:a,object:"chat.completion",...o?{system_fingerprint:o}:{}};return td(l,e)}function pn(r){return JSON.stringify(r)}class ht extends qt{static fromReadableStream(e){const t=new ht(null);return t._run(()=>t._fromReadableStream(e)),t}static runFunctions(e,t,n){const s=new ht(null),a={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runFunctions"}};return s._run(()=>s._runFunctions(e,t,a)),s}static runTools(e,t,n){const s=new ht(t),a={...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return s._run(()=>s._runTools(e,t,a)),s}}let Qo=class extends L{parse(e,t){return ad(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t==null?void 0:t.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(n=>Hr(n,e))}runFunctions(e,t){return e.stream?ht.runFunctions(this._client,e,t):Wt.runFunctions(this._client,e,t)}runTools(e,t){return e.stream?ht.runTools(this._client,e,t):Wt.runTools(this._client,e,t)}stream(e,t){return qt.createChatCompletion(this._client,e,t)}};class Ar extends L{constructor(){super(...arguments),this.completions=new Qo(this._client)}}(function(r){r.Completions=Qo})(Ar||(Ar={}));class Yo extends L{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class Jr extends L{constructor(){super(...arguments),this.sessions=new Yo(this._client)}}Jr.Sessions=Yo;var _=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},ie=function(r,e,t,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!s:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(r,t):s?s.value=t:e.set(r,t),t},Z,Or,Pe,vn,me,Ge,ot,ze,An,ce,yn,_n,Mt,Lt,Dt,Gs,Ks,Xs,Qs,Ys,Zs,ea;class ye extends Ro{constructor(){super(...arguments),Z.add(this),Or.set(this,[]),Pe.set(this,{}),vn.set(this,{}),me.set(this,void 0),Ge.set(this,void 0),ot.set(this,void 0),ze.set(this,void 0),An.set(this,void 0),ce.set(this,void 0),yn.set(this,void 0),_n.set(this,void 0),Mt.set(this,void 0)}[(Or=new WeakMap,Pe=new WeakMap,vn=new WeakMap,me=new WeakMap,Ge=new WeakMap,ot=new WeakMap,ze=new WeakMap,An=new WeakMap,ce=new WeakMap,yn=new WeakMap,_n=new WeakMap,Mt=new WeakMap,Z=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("event",s=>{const a=t.shift();a?a.resolve(s):e.push(s)}),this.on("end",()=>{n=!0;for(const s of t)s.resolve(void 0);t.length=0}),this.on("abort",s=>{n=!0;for(const a of t)a.reject(s);t.length=0}),this.on("error",s=>{n=!0;for(const a of t)a.reject(s);t.length=0}),{next:async()=>e.length?{value:e.shift(),done:!1}:n?{value:void 0,done:!0}:new Promise((a,o)=>t.push({resolve:a,reject:o})).then(a=>a?{value:a,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new ye;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){var a;const n=t==null?void 0:t.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),this._connected();const s=Ce.fromReadableStream(e,this.controller);for await(const o of s)_(this,Z,"m",Lt).call(this,o);if((a=s.controller.signal)!=null&&a.aborted)throw new ve;return this._addRun(_(this,Z,"m",Dt).call(this))}toReadableStream(){return new Ce(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,n,s,a){const o=new ye;return o._run(()=>o._runToolAssistantStream(e,t,n,s,{...a,headers:{...a==null?void 0:a.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createToolAssistantStream(e,t,n,s,a){var c;const o=a==null?void 0:a.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const i={...s,stream:!0},l=await e.submitToolOutputs(t,n,i,{...a,signal:this.controller.signal});this._connected();for await(const u of l)_(this,Z,"m",Lt).call(this,u);if((c=l.controller.signal)!=null&&c.aborted)throw new ve;return this._addRun(_(this,Z,"m",Dt).call(this))}static createThreadAssistantStream(e,t,n){const s=new ye;return s._run(()=>s._threadAssistantStream(e,t,{...n,headers:{...n==null?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),s}static createAssistantStream(e,t,n,s){const a=new ye;return a._run(()=>a._runAssistantStream(e,t,n,{...s,headers:{...s==null?void 0:s.headers,"X-Stainless-Helper-Method":"stream"}})),a}currentEvent(){return _(this,yn,"f")}currentRun(){return _(this,_n,"f")}currentMessageSnapshot(){return _(this,me,"f")}currentRunStepSnapshot(){return _(this,Mt,"f")}async finalRunSteps(){return await this.done(),Object.values(_(this,Pe,"f"))}async finalMessages(){return await this.done(),Object.values(_(this,vn,"f"))}async finalRun(){if(await this.done(),!_(this,Ge,"f"))throw Error("Final run was not received.");return _(this,Ge,"f")}async _createThreadAssistantStream(e,t,n){var i;const s=n==null?void 0:n.signal;s&&(s.aborted&&this.controller.abort(),s.addEventListener("abort",()=>this.controller.abort()));const a={...t,stream:!0},o=await e.createAndRun(a,{...n,signal:this.controller.signal});this._connected();for await(const l of o)_(this,Z,"m",Lt).call(this,l);if((i=o.controller.signal)!=null&&i.aborted)throw new ve;return this._addRun(_(this,Z,"m",Dt).call(this))}async _createAssistantStream(e,t,n,s){var l;const a=s==null?void 0:s.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const o={...n,stream:!0},i=await e.create(t,o,{...s,signal:this.controller.signal});this._connected();for await(const c of i)_(this,Z,"m",Lt).call(this,c);if((l=i.controller.signal)!=null&&l.aborted)throw new ve;return this._addRun(_(this,Z,"m",Dt).call(this))}static accumulateDelta(e,t){for(const[n,s]of Object.entries(t)){if(!e.hasOwnProperty(n)){e[n]=s;continue}let a=e[n];if(a==null){e[n]=s;continue}if(n==="index"||n==="type"){e[n]=s;continue}if(typeof a=="string"&&typeof s=="string")a+=s;else if(typeof a=="number"&&typeof s=="number")a+=s;else if(er(a)&&er(s))a=this.accumulateDelta(a,s);else if(Array.isArray(a)&&Array.isArray(s)){if(a.every(o=>typeof o=="string"||typeof o=="number")){a.push(...s);continue}for(const o of s){if(!er(o))throw new Error(`Expected array delta entry to be an object but got: ${o}`);const i=o.index;if(i==null)throw console.error(o),new Error("Expected array delta entry to have an `index` property");if(typeof i!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${i}`);const l=a[i];l==null?a.push(o):a[i]=this.accumulateDelta(l,o)}continue}else throw Error(`Unhandled record type: ${n}, deltaValue: ${s}, accValue: ${a}`);e[n]=a}return e}_addRun(e){return e}async _threadAssistantStream(e,t,n){return await this._createThreadAssistantStream(t,e,n)}async _runAssistantStream(e,t,n,s){return await this._createAssistantStream(t,e,n,s)}async _runToolAssistantStream(e,t,n,s,a){return await this._createToolAssistantStream(n,e,t,s,a)}}Lt=function(e){if(!this.ended)switch(ie(this,yn,e,"f"),_(this,Z,"m",Xs).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":_(this,Z,"m",ea).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":_(this,Z,"m",Ks).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":_(this,Z,"m",Gs).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Dt=function(){if(this.ended)throw new O("stream has ended, this shouldn't happen");if(!_(this,Ge,"f"))throw Error("Final run has not been received");return _(this,Ge,"f")},Gs=function(e){const[t,n]=_(this,Z,"m",Ys).call(this,e,_(this,me,"f"));ie(this,me,t,"f"),_(this,vn,"f")[t.id]=t;for(const s of n){const a=t.content[s.index];(a==null?void 0:a.type)=="text"&&this._emit("textCreated",a.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const s of e.data.delta.content){if(s.type=="text"&&s.text){let a=s.text,o=t.content[s.index];if(o&&o.type=="text")this._emit("textDelta",a,o.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(s.index!=_(this,ot,"f")){if(_(this,ze,"f"))switch(_(this,ze,"f").type){case"text":this._emit("textDone",_(this,ze,"f").text,_(this,me,"f"));break;case"image_file":this._emit("imageFileDone",_(this,ze,"f").image_file,_(this,me,"f"));break}ie(this,ot,s.index,"f")}ie(this,ze,t.content[s.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(_(this,ot,"f")!==void 0){const s=e.data.content[_(this,ot,"f")];if(s)switch(s.type){case"image_file":this._emit("imageFileDone",s.image_file,_(this,me,"f"));break;case"text":this._emit("textDone",s.text,_(this,me,"f"));break}}_(this,me,"f")&&this._emit("messageDone",e.data),ie(this,me,void 0,"f")}},Ks=function(e){const t=_(this,Z,"m",Qs).call(this,e);switch(ie(this,Mt,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const n=e.data.delta;if(n.step_details&&n.step_details.type=="tool_calls"&&n.step_details.tool_calls&&t.step_details.type=="tool_calls")for(const a of n.step_details.tool_calls)a.index==_(this,An,"f")?this._emit("toolCallDelta",a,t.step_details.tool_calls[a.index]):(_(this,ce,"f")&&this._emit("toolCallDone",_(this,ce,"f")),ie(this,An,a.index,"f"),ie(this,ce,t.step_details.tool_calls[a.index],"f"),_(this,ce,"f")&&this._emit("toolCallCreated",_(this,ce,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":ie(this,Mt,void 0,"f"),e.data.step_details.type=="tool_calls"&&_(this,ce,"f")&&(this._emit("toolCallDone",_(this,ce,"f")),ie(this,ce,void 0,"f")),this._emit("runStepDone",e.data,t);break}},Xs=function(e){_(this,Or,"f").push(e),this._emit("event",e)},Qs=function(e){switch(e.event){case"thread.run.step.created":return _(this,Pe,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=_(this,Pe,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let n=e.data;if(n.delta){const s=ye.accumulateDelta(t,n.delta);_(this,Pe,"f")[e.data.id]=s}return _(this,Pe,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":_(this,Pe,"f")[e.data.id]=e.data;break}if(_(this,Pe,"f")[e.data.id])return _(this,Pe,"f")[e.data.id];throw new Error("No snapshot available")},Ys=function(e,t){let n=[];switch(e.event){case"thread.message.created":return[e.data,n];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let s=e.data;if(s.delta.content)for(const a of s.delta.content)if(a.index in t.content){let o=t.content[a.index];t.content[a.index]=_(this,Z,"m",Zs).call(this,a,o)}else t.content[a.index]=a,n.push(a);return[t,n];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,n];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},Zs=function(e,t){return ye.accumulateDelta(t,e)},ea=function(e){switch(ie(this,_n,e.data,"f"),e.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":ie(this,Ge,e.data,"f"),_(this,ce,"f")&&(this._emit("toolCallDone",_(this,ce,"f")),ie(this,ce,void 0,"f"));break}};class zr extends L{create(e,t,n){return this._client.post(`/threads/${e}/messages`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,t,n){return this._client.get(`/threads/${e}/messages/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,t,n,s){return this._client.post(`/threads/${e}/messages/${t}`,{body:n,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(e,t={},n){return oe(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/messages`,Gr,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,t,n){return this._client.delete(`/threads/${e}/messages/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}}class Gr extends _e{}zr.MessagesPage=Gr;class Kr extends L{retrieve(e,t,n,s={},a){return oe(s)?this.retrieve(e,t,n,{},s):this._client.get(`/threads/${e}/runs/${t}/steps/${n}`,{query:s,...a,headers:{"OpenAI-Beta":"assistants=v2",...a==null?void 0:a.headers}})}list(e,t,n={},s){return oe(n)?this.list(e,t,{},n):this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,Xr,{query:n,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}}class Xr extends _e{}Kr.RunStepsPage=Xr;class nn extends L{constructor(){super(...arguments),this.steps=new Kr(this._client)}create(e,t,n){const{include:s,...a}=t;return this._client.post(`/threads/${e}/runs`,{query:{include:s},body:a,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers},stream:t.stream??!1})}retrieve(e,t,n){return this._client.get(`/threads/${e}/runs/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}update(e,t,n,s){return this._client.post(`/threads/${e}/runs/${t}`,{body:n,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}list(e,t={},n){return oe(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/runs`,Qr,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}cancel(e,t,n){return this._client.post(`/threads/${e}/runs/${t}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}async createAndPoll(e,t,n){const s=await this.create(e,t,n);return await this.poll(e,s.id,n)}createAndStream(e,t,n){return ye.createAssistantStream(e,this._client.beta.threads.runs,t,n)}async poll(e,t,n){const s={...n==null?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for(n!=null&&n.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:a,response:o}=await this.retrieve(e,t,{...n,headers:{...n==null?void 0:n.headers,...s}}).withResponse();switch(a.status){case"queued":case"in_progress":case"cancelling":let i=5e3;if(n!=null&&n.pollIntervalMs)i=n.pollIntervalMs;else{const l=o.headers.get("openai-poll-after-ms");if(l){const c=parseInt(l);isNaN(c)||(i=c)}}await Zt(i);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return a}}}stream(e,t,n){return ye.createAssistantStream(e,this._client.beta.threads.runs,t,n)}submitToolOutputs(e,t,n,s){return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,{body:n,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers},stream:n.stream??!1})}async submitToolOutputsAndPoll(e,t,n,s){const a=await this.submitToolOutputs(e,t,n,s);return await this.poll(e,a.id,s)}submitToolOutputsStream(e,t,n,s){return ye.createToolAssistantStream(e,t,this._client.beta.threads.runs,n,s)}}class Qr extends _e{}nn.RunsPage=Qr;nn.Steps=Kr;nn.RunStepsPage=Xr;class kt extends L{constructor(){super(...arguments),this.runs=new nn(this._client),this.messages=new zr(this._client)}create(e={},t){return oe(e)?this.create({},e):this._client.post("/threads",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,n){return this._client.post(`/threads/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,t){return this._client.delete(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers},stream:e.stream??!1})}async createAndRunPoll(e,t){const n=await this.createAndRun(e,t);return await this.runs.poll(n.thread_id,n.id,t)}createAndRunStream(e,t){return ye.createThreadAssistantStream(e,this._client.beta.threads,t)}}kt.Runs=nn;kt.RunsPage=Qr;kt.Messages=zr;kt.MessagesPage=Gr;const hd=async r=>{const e=await Promise.allSettled(r),t=e.filter(s=>s.status==="rejected");if(t.length){for(const s of t)console.error(s.reason);throw new Error(`${t.length} promise(s) failed - see the above errors`)}const n=[];for(const s of e)s.status==="fulfilled"&&n.push(s.value);return n};let Yr=class extends L{create(e,t,n){return this._client.post(`/vector_stores/${e}/files`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,t,n){return this._client.get(`/vector_stores/${e}/files/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}list(e,t={},n){return oe(t)?this.list(e,{},t):this._client.getAPIList(`/vector_stores/${e}/files`,Wn,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}del(e,t,n){return this._client.delete(`/vector_stores/${e}/files/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}async createAndPoll(e,t,n){const s=await this.create(e,t,n);return await this.poll(e,s.id,n)}async poll(e,t,n){const s={...n==null?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for(n!=null&&n.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const a=await this.retrieve(e,t,{...n,headers:s}).withResponse(),o=a.data;switch(o.status){case"in_progress":let i=5e3;if(n!=null&&n.pollIntervalMs)i=n.pollIntervalMs;else{const l=a.response.headers.get("openai-poll-after-ms");if(l){const c=parseInt(l);isNaN(c)||(i=c)}}await Zt(i);break;case"failed":case"completed":return o}}}async upload(e,t,n){const s=await this._client.files.create({file:t,purpose:"assistants"},n);return this.create(e,{file_id:s.id},n)}async uploadAndPoll(e,t,n){const s=await this.upload(e,t,n);return await this.poll(e,s.id,n)}};class Wn extends _e{}Yr.VectorStoreFilesPage=Wn;class Zo extends L{create(e,t,n){return this._client.post(`/vector_stores/${e}/file_batches`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}retrieve(e,t,n){return this._client.get(`/vector_stores/${e}/file_batches/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}cancel(e,t,n){return this._client.post(`/vector_stores/${e}/file_batches/${t}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}async createAndPoll(e,t,n){const s=await this.create(e,t);return await this.poll(e,s.id,n)}listFiles(e,t,n={},s){return oe(n)?this.listFiles(e,t,{},n):this._client.getAPIList(`/vector_stores/${e}/file_batches/${t}/files`,Wn,{query:n,...s,headers:{"OpenAI-Beta":"assistants=v2",...s==null?void 0:s.headers}})}async poll(e,t,n){const s={...n==null?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for(n!=null&&n.pollIntervalMs&&(s["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:a,response:o}=await this.retrieve(e,t,{...n,headers:s}).withResponse();switch(a.status){case"in_progress":let i=5e3;if(n!=null&&n.pollIntervalMs)i=n.pollIntervalMs;else{const l=o.headers.get("openai-poll-after-ms");if(l){const c=parseInt(l);isNaN(c)||(i=c)}}await Zt(i);break;case"failed":case"cancelled":case"completed":return a}}}async uploadAndPoll(e,{files:t,fileIds:n=[]},s){if(t==null||t.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const a=(s==null?void 0:s.maxConcurrency)??5,o=Math.min(a,t.length),i=this._client,l=t.values(),c=[...n];async function u(h){for(let f of h){const p=await i.files.create({file:f,purpose:"assistants"},s);c.push(p.id)}}const d=Array(o).fill(l).map(u);return await hd(d),await this.createAndPoll(e,{file_ids:c})}}class $t extends L{constructor(){super(...arguments),this.files=new Yr(this._client),this.fileBatches=new Zo(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}update(e,t,n){return this._client.post(`/vector_stores/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...n==null?void 0:n.headers}})}list(e={},t){return oe(e)?this.list({},e):this._client.getAPIList("/vector_stores",Zr,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}del(e,t){return this._client.delete(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...t==null?void 0:t.headers}})}}class Zr extends _e{}$t.VectorStoresPage=Zr;$t.Files=Yr;$t.VectorStoreFilesPage=Wn;$t.FileBatches=Zo;class Fe extends L{constructor(){super(...arguments),this.realtime=new Jr(this._client),this.vectorStores=new $t(this._client),this.chat=new Ar(this._client),this.assistants=new Wr(this._client),this.threads=new kt(this._client)}}Fe.Realtime=Jr;Fe.VectorStores=$t;Fe.VectorStoresPage=Zr;Fe.Assistants=Wr;Fe.AssistantsPage=qr;Fe.Threads=kt;class ei extends L{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}class ti extends L{create(e,t){return this._client.post("/embeddings",{body:e,...t})}}class es extends L{create(e,t){return this._client.post("/files",_t({body:e,...t}))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(e={},t){return oe(e)?this.list({},e):this._client.getAPIList("/files",ts,{query:e,...t})}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,{...t,headers:{Accept:"application/binary",...t==null?void 0:t.headers},__binaryResponse:!0})}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,t)}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:n=30*60*1e3}={}){const s=new Set(["processed","error","deleted"]),a=Date.now();let o=await this.retrieve(e);for(;!o.status||!s.has(o.status);)if(await Zt(t),o=await this.retrieve(e),Date.now()-a>n)throw new Ur({message:`Giving up on waiting for file ${e} to finish processing after ${n} milliseconds.`});return o}}class ts extends _e{}es.FileObjectsPage=ts;class ns extends L{list(e,t={},n){return oe(t)?this.list(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,rs,{query:t,...n})}}class rs extends _e{}ns.FineTuningJobCheckpointsPage=rs;class Pt extends L{constructor(){super(...arguments),this.checkpoints=new ns(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return oe(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",ss,{query:e,...t})}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},n){return oe(t)?this.listEvents(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,as,{query:t,...n})}}class ss extends _e{}class as extends _e{}Pt.FineTuningJobsPage=ss;Pt.FineTuningJobEventsPage=as;Pt.Checkpoints=ns;Pt.FineTuningJobCheckpointsPage=rs;class rn extends L{constructor(){super(...arguments),this.jobs=new Pt(this._client)}}rn.Jobs=Pt;rn.FineTuningJobsPage=ss;rn.FineTuningJobEventsPage=as;class ni extends L{createVariation(e,t){return this._client.post("/images/variations",_t({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",_t({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}class os extends L{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",is,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}}class is extends ed{}os.ModelsPage=is;class ri extends L{create(e,t){return this._client.post("/moderations",{body:e,...t})}}class si extends L{create(e,t,n){return this._client.post(`/uploads/${e}/parts`,_t({body:t,...n}))}}class ls extends L{constructor(){super(...arguments),this.parts=new si(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(`/uploads/${e}/cancel`,t)}complete(e,t,n){return this._client.post(`/uploads/${e}/complete`,{body:t,...n})}}ls.Parts=si;var ai;class R extends Fu{constructor({baseURL:e=dn("OPENAI_BASE_URL"),apiKey:t=dn("OPENAI_API_KEY"),organization:n=dn("OPENAI_ORG_ID")??null,project:s=dn("OPENAI_PROJECT_ID")??null,...a}={}){if(t===void 0)throw new O("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const o={apiKey:t,organization:n,project:s,...a,baseURL:e||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&Yu())throw new O(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);super({baseURL:o.baseURL,timeout:o.timeout??6e5,httpAgent:o.httpAgent,maxRetries:o.maxRetries,fetch:o.fetch}),this.completions=new ei(this),this.chat=new Mr(this),this.embeddings=new ti(this),this.files=new es(this),this.images=new ni(this),this.audio=new en(this),this.moderations=new ri(this),this.models=new os(this),this.fineTuning=new rn(this),this.beta=new Fe(this),this.batches=new Fr(this),this.uploads=new ls(this),this._options=o,this.apiKey=t,this.organization=n,this.project=s}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return $u(e,{arrayFormat:"brackets"})}}ai=R;R.OpenAI=ai;R.DEFAULT_TIMEOUT=6e5;R.OpenAIError=O;R.APIError=ee;R.APIConnectionError=Mn;R.APIConnectionTimeoutError=Ur;R.APIUserAbortError=ve;R.NotFoundError=co;R.ConflictError=uo;R.RateLimitError=fo;R.BadRequestError=oo;R.AuthenticationError=io;R.InternalServerError=po;R.PermissionDeniedError=lo;R.UnprocessableEntityError=ho;R.toFile=_o;R.fileFromPath=so;R.Completions=ei;R.Chat=Mr;R.Embeddings=ti;R.Files=es;R.FileObjectsPage=ts;R.Images=ni;R.Audio=en;R.Moderations=ri;R.Models=os;R.ModelsPage=is;R.FineTuning=rn;R.Beta=Fe;R.Batches=Fr;R.BatchesPage=Vr;R.Uploads=ls;const oi=gi("businessStore",()=>{const{generatePrompt:r}=ll(),e=Me(),t=Me(!1);return{resetOpenAiData:()=>{e.value=void 0},fetchOpenAi:async a=>{const{data:o}=await pu.from("client").select().single(),i="You are a helpful assistant designed to output JSON.",l=r(a),c=new R({organization:"org-gMMLBDt8GYoH6XvDrRNR9dDS",project:"proj_13bhHRRlUbgQnmsrdOEaVlAH",apiKey:o.key,dangerouslyAllowBrowser:!0});e.value=void 0,t.value=!0;const u=await c.chat.completions.create({response_format:{type:"json_object"},model:"gpt-4-turbo",store:!0,messages:[{content:i,role:"system"},{content:l,role:"user"}]});t.value=!1;const d=u.choices[0].message.content;d&&(e.value=JSON.parse(d),console.log(JSON.parse(d)))},openAiData:e,isLoaded:t}},{persist:{storage:sessionStorage,pick:["openAiData"]}}),fd={class:"stepper"},pd={class:"stepper__content"},gd={class:"stepper__content-col-2"},md={class:"stepper__content-col-1"},bd={class:"stepper__actions stepper__actions-between"},vd=On({__name:"ElQuizai",setup(r){const{formData:e,fields:t,schema:n,setStepValueHandler:s}=In(),a=oi(),{validate:o}=xi(),i=Me("Next"),l=Me("Back"),c=async({activateCallback:u,value:d})=>{await o()&&(a.fetchOpenAi(d),s({activateCallback:u,value:"3"}))};return(u,d)=>($(),X(U(En),{value:"2"},{default:F(({activateCallback:h})=>[V(U(Ai),{ref:"form","validation-schema":U(n),"initial-values":U(e),onSubmit:f=>c({activateCallback:h,value:f})},{default:F(()=>[E("div",fd,[E("div",pd,[V(ba,Ae(Oe(U($i))),null,16),E("section",gd,[V(We,Ae(Oe(U(t).productOrService)),null,16),V(We,Ae(Oe(U(t).targetAudience)),null,16),V(We,Ae(Oe(U(t).regionOrCity)),null,16),V(We,Ae(Oe(U(t).startUpCapital)),null,16),V(We,Ae(Oe(U(t).salesChannels)),null,16),V(We,Ae(Oe(U(t).keyCosts)),null,16)]),E("section",md,[V(We,Ae(Oe(U(t).mainGoals)),null,16)])])]),E("div",bd,[V(wn,{"button-action":()=>U(s)({activateCallback:h,value:"1"}),variant:"default"},{default:F(()=>[Ue(ae(l.value),1)]),_:2},1032,["button-action"]),V(wn,{variant:"primary",type:"submit"},{default:F(()=>[Ue(ae(i.value),1)]),_:1})])]),_:2},1032,["validation-schema","initial-values","onSubmit"])]),_:1}))}}),yd=Xt(vd,[["__scopeId","data-v-444a56b5"]]),_d={},wd={class:"flex flex-col items-center justify-center w-full h-full gap-4"};function Sd(r,e){return $(),H("div",wd,e[0]||(e[0]=[E("i",{class:"text-gray-400 w-fit h-fit pi pi-spin pi-slack",style:{"font-size":"5rem"}},null,-1),E("span",{class:"text-lg text-gray-600"},"Loading...",-1)]))}const kd=Xt(_d,[["render",Sd]]);var $d=`
.p-icon {
    display: inline-block;
    vertical-align: baseline;
}

.p-icon-spin {
    -webkit-animation: p-icon-spin 2s infinite linear;
    animation: p-icon-spin 2s infinite linear;
}

@-webkit-keyframes p-icon-spin {
    0% {
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
    }
    100% {
        -webkit-transform: rotate(359deg);
        transform: rotate(359deg);
    }
}

@keyframes p-icon-spin {
    0% {
        -webkit-transform: rotate(0deg);
        transform: rotate(0deg);
    }
    100% {
        -webkit-transform: rotate(359deg);
        transform: rotate(359deg);
    }
}
`,Pd=M.extend({name:"baseicon",css:$d});function Ht(r){"@babel/helpers - typeof";return Ht=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ht(r)}function ta(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),t.push.apply(t,n)}return t}function na(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ta(Object(t),!0).forEach(function(n){Cd(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ta(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Cd(r,e,t){return(e=xd(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function xd(r){var e=Ad(r,"string");return Ht(e)=="symbol"?e:e+""}function Ad(r,e){if(Ht(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(Ht(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var cs={name:"BaseIcon",extends:pe,props:{label:{type:String,default:void 0},spin:{type:Boolean,default:!1}},style:Pd,provide:function(){return{$pcIcon:this,$parentInstance:this}},methods:{pti:function(){var e=Tn(this.label);return na(na({},!this.isUnstyled&&{class:["p-icon",{"p-icon-spin":this.spin}]}),{},{role:e?void 0:"img","aria-label":e?void 0:this.label,"aria-hidden":e})}}},us={name:"MinusIcon",extends:cs};function Od(r,e,t,n,s,a){return $(),H("svg",w({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.pti()),e[0]||(e[0]=[E("path",{d:"M13.2222 7.77778H0.777778C0.571498 7.77778 0.373667 7.69584 0.227806 7.54998C0.0819442 7.40412 0 7.20629 0 7.00001C0 6.79373 0.0819442 6.5959 0.227806 6.45003C0.373667 6.30417 0.571498 6.22223 0.777778 6.22223H13.2222C13.4285 6.22223 13.6263 6.30417 13.7722 6.45003C13.9181 6.5959 14 6.79373 14 7.00001C14 7.20629 13.9181 7.40412 13.7722 7.54998C13.6263 7.69584 13.4285 7.77778 13.2222 7.77778Z",fill:"currentColor"},null,-1)]),16)}us.render=Od;var ds={name:"PlusIcon",extends:cs};function Td(r,e,t,n,s,a){return $(),H("svg",w({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.pti()),e[0]||(e[0]=[E("path",{d:"M7.67742 6.32258V0.677419C7.67742 0.497757 7.60605 0.325452 7.47901 0.198411C7.35197 0.0713707 7.17966 0 7 0C6.82034 0 6.64803 0.0713707 6.52099 0.198411C6.39395 0.325452 6.32258 0.497757 6.32258 0.677419V6.32258H0.677419C0.497757 6.32258 0.325452 6.39395 0.198411 6.52099C0.0713707 6.64803 0 6.82034 0 7C0 7.17966 0.0713707 7.35197 0.198411 7.47901C0.325452 7.60605 0.497757 7.67742 0.677419 7.67742H6.32258V13.3226C6.32492 13.5015 6.39704 13.6725 6.52358 13.799C6.65012 13.9255 6.82106 13.9977 7 14C7.17966 14 7.35197 13.9286 7.47901 13.8016C7.60605 13.6745 7.67742 13.5022 7.67742 13.3226V7.67742H13.3226C13.5022 7.67742 13.6745 7.60605 13.8016 7.47901C13.9286 7.35197 14 7.17966 14 7C13.9977 6.82106 13.9255 6.65012 13.799 6.52358C13.6725 6.39704 13.5015 6.32492 13.3226 6.32258H7.67742Z",fill:"currentColor"},null,-1)]),16)}ds.render=Td;function Jt(r){"@babel/helpers - typeof";return Jt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jt(r)}function ra(r,e){return jd(r)||Rd(r,e)||Id(r,e)||Ed()}function Ed(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Id(r,e){if(r){if(typeof r=="string")return sa(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?sa(r,e):void 0}}function sa(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function Rd(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,s,a,o,i=[],l=!0,c=!1;try{if(a=(t=t.call(r)).next,e!==0)for(;!(l=(n=a.call(t)).done)&&(i.push(n.value),i.length!==e);l=!0);}catch(u){c=!0,s=u}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw s}}return i}}function jd(r){if(Array.isArray(r))return r}function aa(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),t.push.apply(t,n)}return t}function j(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?aa(Object(t),!0).forEach(function(n){Tr(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):aa(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Tr(r,e,t){return(e=Ld(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Ld(r){var e=Dd(r,"string");return Jt(e)=="symbol"?e:e+""}function Dd(r,e){if(Jt(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(Jt(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var C={_getMeta:function(){return[ps(arguments.length<=0?void 0:arguments[0])||arguments.length<=0?void 0:arguments[0],ir(ps(arguments.length<=0?void 0:arguments[0])?arguments.length<=0?void 0:arguments[0]:arguments.length<=1?void 0:arguments[1])]},_getConfig:function(e,t){var n,s,a;return(n=(e==null||(s=e.instance)===null||s===void 0?void 0:s.$primevue)||(t==null||(a=t.ctx)===null||a===void 0||(a=a.appContext)===null||a===void 0||(a=a.config)===null||a===void 0||(a=a.globalProperties)===null||a===void 0?void 0:a.$primevue))===null||n===void 0?void 0:n.config},_getOptionValue:ha,_getPTValue:function(){var e,t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,l=function(){var v=C._getOptionValue.apply(C,arguments);return it(v)||fa(v)?{class:v}:v},c=((e=n.binding)===null||e===void 0||(e=e.value)===null||e===void 0?void 0:e.ptOptions)||((t=n.$primevueConfig)===null||t===void 0?void 0:t.ptOptions)||{},u=c.mergeSections,d=u===void 0?!0:u,h=c.mergeProps,f=h===void 0?!1:h,p=i?C._useDefaultPT(n,n.defaultPT(),l,a,o):void 0,g=C._usePT(n,C._getPT(s,n.$name),l,a,j(j({},o),{},{global:p||{}})),m=C._getPTDatasets(n,a);return d||!d&&g?f?C._mergeProps(n,f,p,g,m):j(j(j({},p),g),m):j(j({},g),m)},_getPTDatasets:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n="data-pc-";return j(j({},t==="root"&&Tr({},"".concat(n,"name"),Ie(e.$name))),{},Tr({},"".concat(n,"section"),Ie(t)))},_getPT:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,s=function(o){var i,l=n?n(o):o,c=Ie(t);return(i=l==null?void 0:l[c])!==null&&i!==void 0?i:l};return e!=null&&e.hasOwnProperty("_usept")?{_usept:e._usept,originalValue:s(e.originalValue),value:s(e.value)}:s(e)},_usePT:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0,o=function(m){return n(m,s,a)};if(t!=null&&t.hasOwnProperty("_usept")){var i,l=t._usept||((i=e.$primevueConfig)===null||i===void 0?void 0:i.ptOptions)||{},c=l.mergeSections,u=c===void 0?!0:c,d=l.mergeProps,h=d===void 0?!1:d,f=o(t.originalValue),p=o(t.value);return f===void 0&&p===void 0?void 0:it(p)?p:it(f)?f:u||!u&&p?h?C._mergeProps(e,h,f,p):j(j({},f),p):p}return o(t)},_useDefaultPT:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;return C._usePT(e,t,n,s,a)},_loadStyles:function(e,t,n){var s,a=C._getConfig(t,n),o={nonce:a==null||(s=a.csp)===null||s===void 0?void 0:s.nonce};C._loadCoreStyles(e.$instance,o),C._loadThemeStyles(e.$instance,o),C._loadScopedThemeStyles(e.$instance,o),C._themeChangeListener(function(){return C._loadThemeStyles(e.$instance,o)})},_loadCoreStyles:function(){var e,t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;if(!Ne.isStyleNameLoaded((e=n.$style)===null||e===void 0?void 0:e.name)&&(t=n.$style)!==null&&t!==void 0&&t.name){var a;M.loadCSS(s),(a=n.$style)===null||a===void 0||a.loadCSS(s),Ne.setLoadedStyleName(n.$style.name)}},_loadThemeStyles:function(){var e,t,n,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;if(!(s!=null&&s.isUnstyled()||(s==null||(e=s.theme)===null||e===void 0?void 0:e.call(s))==="none")){if(!de.isStyleNameLoaded("common")){var o,i,l=((o=s.$style)===null||o===void 0||(i=o.getCommonTheme)===null||i===void 0?void 0:i.call(o))||{},c=l.primitive,u=l.semantic,d=l.global,h=l.style;M.load(c==null?void 0:c.css,j({name:"primitive-variables"},a)),M.load(u==null?void 0:u.css,j({name:"semantic-variables"},a)),M.load(d==null?void 0:d.css,j({name:"global-variables"},a)),M.loadTheme(j({name:"global-style"},a),h),de.setLoadedStyleName("common")}if(!de.isStyleNameLoaded((t=s.$style)===null||t===void 0?void 0:t.name)&&(n=s.$style)!==null&&n!==void 0&&n.name){var f,p,g,m,S=((f=s.$style)===null||f===void 0||(p=f.getDirectiveTheme)===null||p===void 0?void 0:p.call(f))||{},v=S.css,b=S.style;(g=s.$style)===null||g===void 0||g.load(v,j({name:"".concat(s.$style.name,"-variables")},a)),(m=s.$style)===null||m===void 0||m.loadTheme(j({name:"".concat(s.$style.name,"-style")},a),b),de.setLoadedStyleName(s.$style.name)}if(!de.isStyleNameLoaded("layer-order")){var y,k,x=(y=s.$style)===null||y===void 0||(k=y.getLayerOrderThemeCSS)===null||k===void 0?void 0:k.call(y);M.load(x,j({name:"layer-order",first:!0},a)),de.setLoadedStyleName("layer-order")}}},_loadScopedThemeStyles:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=e.preset();if(n&&e.$attrSelector){var s,a,o,i=((s=e.$style)===null||s===void 0||(a=s.getPresetTheme)===null||a===void 0?void 0:a.call(s,n,"[".concat(e.$attrSelector,"]")))||{},l=i.css,c=(o=e.$style)===null||o===void 0?void 0:o.load(l,j({name:"".concat(e.$attrSelector,"-").concat(e.$style.name)},t));e.scopedStyleEl=c.el}},_themeChangeListener:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){};Ne.clearLoadedStyleNames(),da.on("theme:change",e)},_hook:function(e,t,n,s,a,o){var i,l,c="on".concat(mi(t)),u=C._getConfig(s,a),d=n==null?void 0:n.$instance,h=C._usePT(d,C._getPT(s==null||(i=s.value)===null||i===void 0?void 0:i.pt,e),C._getOptionValue,"hooks.".concat(c)),f=C._useDefaultPT(d,u==null||(l=u.pt)===null||l===void 0||(l=l.directives)===null||l===void 0?void 0:l[e],C._getOptionValue,"hooks.".concat(c)),p={el:n,binding:s,vnode:a,prevVnode:o};h==null||h(d,p),f==null||f(d,p)},_mergeProps:function(){for(var e=arguments.length>1?arguments[1]:void 0,t=arguments.length,n=new Array(t>2?t-2:0),s=2;s<t;s++)n[s-2]=arguments[s];return ua(e)?e.apply(void 0,n):w.apply(void 0,n)},_extend:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=function(o,i,l,c,u){var d,h,f,p;i._$instances=i._$instances||{};var g=C._getConfig(l,c),m=i._$instances[e]||{},S=Tn(m)?j(j({},t),t==null?void 0:t.methods):{};i._$instances[e]=j(j({},m),{},{$name:e,$host:i,$binding:l,$modifiers:l==null?void 0:l.modifiers,$value:l==null?void 0:l.value,$el:m.$el||i||void 0,$style:j({classes:void 0,inlineStyles:void 0,load:function(){},loadCSS:function(){},loadTheme:function(){}},t==null?void 0:t.style),$primevueConfig:g,$attrSelector:(d=i.$pd)===null||d===void 0||(d=d[e])===null||d===void 0?void 0:d.attrSelector,defaultPT:function(){return C._getPT(g==null?void 0:g.pt,void 0,function(b){var y;return b==null||(y=b.directives)===null||y===void 0?void 0:y[e]})},isUnstyled:function(){var b,y;return((b=i.$instance)===null||b===void 0||(b=b.$binding)===null||b===void 0||(b=b.value)===null||b===void 0?void 0:b.unstyled)!==void 0?(y=i.$instance)===null||y===void 0||(y=y.$binding)===null||y===void 0||(y=y.value)===null||y===void 0?void 0:y.unstyled:g==null?void 0:g.unstyled},theme:function(){var b;return(b=i.$instance)===null||b===void 0||(b=b.$primevueConfig)===null||b===void 0?void 0:b.theme},preset:function(){var b;return(b=i.$instance)===null||b===void 0||(b=b.$binding)===null||b===void 0||(b=b.value)===null||b===void 0?void 0:b.dt},ptm:function(){var b,y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return C._getPTValue(i.$instance,(b=i.$instance)===null||b===void 0||(b=b.$binding)===null||b===void 0||(b=b.value)===null||b===void 0?void 0:b.pt,y,j({},k))},ptmo:function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return C._getPTValue(i.$instance,b,y,k,!1)},cx:function(){var b,y,k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",x=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(b=i.$instance)!==null&&b!==void 0&&b.isUnstyled()?void 0:C._getOptionValue((y=i.$instance)===null||y===void 0||(y=y.$style)===null||y===void 0?void 0:y.classes,k,j({},x))},sx:function(){var b,y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return k?C._getOptionValue((b=i.$instance)===null||b===void 0||(b=b.$style)===null||b===void 0?void 0:b.inlineStyles,y,j({},x)):void 0}},S),i.$instance=i._$instances[e],(h=(f=i.$instance)[o])===null||h===void 0||h.call(f,i,l,c,u),i["$".concat(e)]=i.$instance,C._hook(e,o,i,l,c,u),i.$pd||(i.$pd={}),i.$pd[e]=j(j({},(p=i.$pd)===null||p===void 0?void 0:p[e]),{},{name:e,instance:i.$instance})},s=function(o){var i,l,c,u,d,h=(i=o.$instance)===null||i===void 0?void 0:i.watch;h==null||(l=h.config)===null||l===void 0||l.call(o.$instance,(c=o.$instance)===null||c===void 0?void 0:c.$primevueConfig),gs.on("config:change",function(f){var p,g=f.newValue,m=f.oldValue;return h==null||(p=h.config)===null||p===void 0?void 0:p.call(o.$instance,g,m)}),h==null||(u=h["config.ripple"])===null||u===void 0||u.call(o.$instance,(d=o.$instance)===null||d===void 0||(d=d.$primevueConfig)===null||d===void 0?void 0:d.ripple),gs.on("config:ripple:change",function(f){var p,g=f.newValue,m=f.oldValue;return h==null||(p=h["config.ripple"])===null||p===void 0?void 0:p.call(o.$instance,g,m)})};return{created:function(o,i,l,c){o.$pd||(o.$pd={}),o.$pd[e]={name:e,attrSelector:Rr("pd")},n("created",o,i,l,c)},beforeMount:function(o,i,l,c){C._loadStyles(o,i,l),n("beforeMount",o,i,l,c),s(o)},mounted:function(o,i,l,c){C._loadStyles(o,i,l),n("mounted",o,i,l,c)},beforeUpdate:function(o,i,l,c){n("beforeUpdate",o,i,l,c)},updated:function(o,i,l,c){C._loadStyles(o,i,l),n("updated",o,i,l,c)},beforeUnmount:function(o,i,l,c){n("beforeUnmount",o,i,l,c)},unmounted:function(o,i,l,c){var u;(u=o.$instance)===null||u===void 0||(u=u.scopedStyleEl)===null||u===void 0||(u=u.value)===null||u===void 0||u.remove(),n("unmounted",o,i,l,c)}}},extend:function(){var e=C._getMeta.apply(C,arguments),t=ra(e,2),n=t[0],s=t[1];return j({extend:function(){var o=C._getMeta.apply(C,arguments),i=ra(o,2),l=i[0],c=i[1];return C.extend(l,j(j(j({},s),s==null?void 0:s.methods),c))}},C._extend(n,s))}},Nd=function(e){var t=e.dt;return`
.p-ink {
    display: block;
    position: absolute;
    background: `.concat(t("ripple.background"),`;
    border-radius: 100%;
    transform: scale(0);
    pointer-events: none;
}

.p-ink-active {
    animation: ripple 0.4s linear;
}

@keyframes ripple {
    100% {
        opacity: 0;
        transform: scale(2.5);
    }
}
`)},Bd={root:"p-ink"},Ud=M.extend({name:"ripple-directive",theme:Nd,classes:Bd}),Md=C.extend({style:Ud});function zt(r){"@babel/helpers - typeof";return zt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zt(r)}function Fd(r){return Hd(r)||qd(r)||Wd(r)||Vd()}function Vd(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wd(r,e){if(r){if(typeof r=="string")return Er(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Er(r,e):void 0}}function qd(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function Hd(r){if(Array.isArray(r))return Er(r)}function Er(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function oa(r,e,t){return(e=Jd(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Jd(r){var e=zd(r,"string");return zt(e)=="symbol"?e:e+""}function zd(r,e){if(zt(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(zt(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var hs=Md.extend("ripple",{watch:{"config.ripple":function(e){e?(this.createRipple(this.$host),this.bindEvents(this.$host),this.$host.setAttribute("data-pd-ripple",!0),this.$host.style.overflow="hidden",this.$host.style.position="relative"):(this.remove(this.$host),this.$host.removeAttribute("data-pd-ripple"))}},unmounted:function(e){this.remove(e)},timeout:void 0,methods:{bindEvents:function(e){e.addEventListener("mousedown",this.onMouseDown.bind(this))},unbindEvents:function(e){e.removeEventListener("mousedown",this.onMouseDown.bind(this))},createRipple:function(e){var t=bi("span",oa(oa({role:"presentation","aria-hidden":!0,"data-p-ink":!0,"data-p-ink-active":!1,class:!this.isUnstyled()&&this.cx("root"),onAnimationEnd:this.onAnimationEnd.bind(this)},this.$attrSelector,""),"p-bind",this.ptm("root")));e.appendChild(t),this.$el=t},remove:function(e){var t=this.getInk(e);t&&(this.$host.style.overflow="",this.$host.style.position="",this.unbindEvents(e),t.removeEventListener("animationend",this.onAnimationEnd),t.remove())},onMouseDown:function(e){var t=this,n=e.currentTarget,s=this.getInk(n);if(!(!s||getComputedStyle(s,null).display==="none")){if(!this.isUnstyled()&&Hn(s,"p-ink-active"),s.setAttribute("data-p-ink-active","false"),!ms(s)&&!bs(s)){var a=Math.max(vi(n),yi(n));s.style.height=a+"px",s.style.width=a+"px"}var o=_i(n),i=e.pageX-o.left+document.body.scrollTop-bs(s)/2,l=e.pageY-o.top+document.body.scrollLeft-ms(s)/2;s.style.top=l+"px",s.style.left=i+"px",!this.isUnstyled()&&wi(s,"p-ink-active"),s.setAttribute("data-p-ink-active","true"),this.timeout=setTimeout(function(){s&&(!t.isUnstyled()&&Hn(s,"p-ink-active"),s.setAttribute("data-p-ink-active","false"))},401)}},onAnimationEnd:function(e){this.timeout&&clearTimeout(this.timeout),!this.isUnstyled()&&Hn(e.currentTarget,"p-ink-active"),e.currentTarget.setAttribute("data-p-ink-active","false")},getInk:function(e){return e&&e.children?Fd(e.children).find(function(t){return Si(t,"data-pc-name")==="ripple"}):void 0}}}),Gd=function(e){var t=e.dt;return`
.p-fieldset {
    background: `.concat(t("fieldset.background"),`;
    border: 1px solid `).concat(t("fieldset.border.color"),`;
    border-radius: `).concat(t("fieldset.border.radius"),`;
    color: `).concat(t("fieldset.color"),`;
    padding: `).concat(t("fieldset.padding"),`;
    margin: 0;
}

.p-fieldset-legend {
    background: `).concat(t("fieldset.legend.background"),`;
    border-radius: `).concat(t("fieldset.legend.border.radius"),`;
    border-width: `).concat(t("fieldset.legend.border.width"),`;
    border-style: solid;
    border-color: `).concat(t("fieldset.legend.border.color"),`;
    padding: `).concat(t("fieldset.legend.padding"),`;
    transition: background `).concat(t("fieldset.transition.duration"),", color ").concat(t("fieldset.transition.duration"),", outline-color ").concat(t("fieldset.transition.duration"),", box-shadow ").concat(t("fieldset.transition.duration"),`;
}

.p-fieldset-toggleable > .p-fieldset-legend {
    padding: 0;
}

.p-fieldset-toggle-button {
    cursor: pointer;
    user-select: none;
    overflow: hidden;
    position: relative;
    text-decoration: none;
    display: flex;
    gap: `).concat(t("fieldset.legend.gap"),`;
    align-items: center;
    justify-content: center;
    padding: `).concat(t("fieldset.legend.padding"),`;
    background: transparent;
    border: 0 none;
    border-radius: `).concat(t("fieldset.legend.border.radius"),`;
    transition: background `).concat(t("fieldset.transition.duration"),", color ").concat(t("fieldset.transition.duration"),", outline-color ").concat(t("fieldset.transition.duration"),", box-shadow ").concat(t("fieldset.transition.duration"),`;
    outline-color: transparent;
}

.p-fieldset-legend-label {
    font-weight: `).concat(t("fieldset.legend.font.weight"),`;
}

.p-fieldset-toggle-button:focus-visible {
    box-shadow: `).concat(t("fieldset.legend.focus.ring.shadow"),`;
    outline: `).concat(t("fieldset.legend.focus.ring.width")," ").concat(t("fieldset.legend.focus.ring.style")," ").concat(t("fieldset.legend.focus.ring.color"),`;
    outline-offset: `).concat(t("fieldset.legend.focus.ring.offset"),`;
}

.p-fieldset-toggleable > .p-fieldset-legend:hover {
    color: `).concat(t("fieldset.legend.hover.color"),`;
    background: `).concat(t("fieldset.legend.hover.background"),`;
}

.p-fieldset-toggle-icon {
    color: `).concat(t("fieldset.toggle.icon.color"),`;
    transition: color `).concat(t("fieldset.transition.duration"),`;
}

.p-fieldset-toggleable > .p-fieldset-legend:hover .p-fieldset-toggle-icon {
    color: `).concat(t("fieldset.toggle.icon.hover.color"),`;
}

.p-fieldset .p-fieldset-content {
    padding: `).concat(t("fieldset.content.padding"),`;
}
`)},Kd={root:function(e){var t=e.props;return["p-fieldset p-component",{"p-fieldset-toggleable":t.toggleable}]},legend:"p-fieldset-legend",legendLabel:"p-fieldset-legend-label",toggleButton:"p-fieldset-toggle-button",toggleIcon:"p-fieldset-toggle-icon",contentContainer:"p-fieldset-content-container",content:"p-fieldset-content"},Xd=M.extend({name:"fieldset",theme:Gd,classes:Kd}),Qd={name:"BaseFieldset",extends:pe,props:{legend:String,toggleable:Boolean,collapsed:Boolean,toggleButtonProps:{type:null,default:null}},style:Xd,provide:function(){return{$pcFieldset:this,$parentInstance:this}}},ii={name:"Fieldset",extends:Qd,inheritAttrs:!1,emits:["update:collapsed","toggle"],data:function(){return{id:this.$attrs.id,d_collapsed:this.collapsed}},watch:{"$attrs.id":function(e){this.id=e||vt()},collapsed:function(e){this.d_collapsed=e}},mounted:function(){this.id=this.id||vt()},methods:{toggle:function(e){this.d_collapsed=!this.d_collapsed,this.$emit("update:collapsed",this.d_collapsed),this.$emit("toggle",{originalEvent:e,value:this.d_collapsed})},onKeyDown:function(e){(e.code==="Enter"||e.code==="NumpadEnter"||e.code==="Space")&&(this.toggle(e),e.preventDefault())}},computed:{buttonAriaLabel:function(){return this.toggleButtonProps&&this.toggleButtonProps.ariaLabel?this.toggleButtonProps.ariaLabel:this.legend}},directives:{ripple:hs},components:{PlusIcon:ds,MinusIcon:us}};function Gt(r){"@babel/helpers - typeof";return Gt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gt(r)}function ia(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),t.push.apply(t,n)}return t}function la(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ia(Object(t),!0).forEach(function(n){Yd(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ia(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function Yd(r,e,t){return(e=Zd(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function Zd(r){var e=eh(r,"string");return Gt(e)=="symbol"?e:e+""}function eh(r,e){if(Gt(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(Gt(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var th=["id"],nh=["id","aria-controls","aria-expanded","aria-label"],rh=["id","aria-labelledby"];function sh(r,e,t,n,s,a){var o=ga("ripple");return $(),H("fieldset",w({class:r.cx("root")},r.ptmi("root")),[E("legend",w({class:r.cx("legend")},r.ptm("legend")),[W(r.$slots,"legend",{toggleCallback:a.toggle},function(){return[r.toggleable?he("",!0):($(),H("span",w({key:0,id:s.id+"_header",class:r.cx("legendLabel")},r.ptm("legendLabel")),ae(r.legend),17,th)),r.toggleable?mt(($(),H("button",w({key:1,id:s.id+"_header",type:"button","aria-controls":s.id+"_content","aria-expanded":!s.d_collapsed,"aria-label":a.buttonAriaLabel,class:r.cx("toggleButton"),onClick:e[0]||(e[0]=function(){return a.toggle&&a.toggle.apply(a,arguments)}),onKeydown:e[1]||(e[1]=function(){return a.onKeyDown&&a.onKeyDown.apply(a,arguments)})},la(la({},r.toggleButtonProps),r.ptm("toggleButton"))),[W(r.$slots,r.$slots.toggleicon?"toggleicon":"togglericon",{collapsed:s.d_collapsed,class:gt(r.cx("toggleIcon"))},function(){return[($(),X(pt(s.d_collapsed?"PlusIcon":"MinusIcon"),w({class:r.cx("toggleIcon")},r.ptm("toggleIcon")),null,16,["class"]))]}),E("span",w({class:r.cx("legendLabel")},r.ptm("legendLabel")),ae(r.legend),17)],16,nh)),[[o]]):he("",!0)]})],16),V(Ir,w({name:"p-toggleable-content"},r.ptm("transition")),{default:F(function(){return[mt(E("div",w({id:s.id+"_content",class:r.cx("contentContainer"),role:"region","aria-labelledby":s.id+"_header"},r.ptm("contentContainer")),[E("div",w({class:r.cx("content")},r.ptm("content")),[W(r.$slots,"default")],16)],16,rh),[[Sn,!s.d_collapsed]])]}),_:3},16)],16)}ii.render=sh;var li={name:"SpinnerIcon",extends:cs};function ah(r,e,t,n,s,a){return $(),H("svg",w({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.pti()),e[0]||(e[0]=[E("path",{d:"M6.99701 14C5.85441 13.999 4.72939 13.7186 3.72012 13.1832C2.71084 12.6478 1.84795 11.8737 1.20673 10.9284C0.565504 9.98305 0.165424 8.89526 0.041387 7.75989C-0.0826496 6.62453 0.073125 5.47607 0.495122 4.4147C0.917119 3.35333 1.59252 2.4113 2.46241 1.67077C3.33229 0.930247 4.37024 0.413729 5.4857 0.166275C6.60117 -0.0811796 7.76026 -0.0520535 8.86188 0.251112C9.9635 0.554278 10.9742 1.12227 11.8057 1.90555C11.915 2.01493 11.9764 2.16319 11.9764 2.31778C11.9764 2.47236 11.915 2.62062 11.8057 2.73C11.7521 2.78503 11.688 2.82877 11.6171 2.85864C11.5463 2.8885 11.4702 2.90389 11.3933 2.90389C11.3165 2.90389 11.2404 2.8885 11.1695 2.85864C11.0987 2.82877 11.0346 2.78503 10.9809 2.73C9.9998 1.81273 8.73246 1.26138 7.39226 1.16876C6.05206 1.07615 4.72086 1.44794 3.62279 2.22152C2.52471 2.99511 1.72683 4.12325 1.36345 5.41602C1.00008 6.70879 1.09342 8.08723 1.62775 9.31926C2.16209 10.5513 3.10478 11.5617 4.29713 12.1803C5.48947 12.7989 6.85865 12.988 8.17414 12.7157C9.48963 12.4435 10.6711 11.7264 11.5196 10.6854C12.3681 9.64432 12.8319 8.34282 12.8328 7C12.8328 6.84529 12.8943 6.69692 13.0038 6.58752C13.1132 6.47812 13.2616 6.41667 13.4164 6.41667C13.5712 6.41667 13.7196 6.47812 13.8291 6.58752C13.9385 6.69692 14 6.84529 14 7C14 8.85651 13.2622 10.637 11.9489 11.9497C10.6356 13.2625 8.85432 14 6.99701 14Z",fill:"currentColor"},null,-1)]),16)}li.render=ah;var oh=function(e){var t=e.dt;return`
.p-badge {
    display: inline-flex;
    border-radius: `.concat(t("badge.border.radius"),`;
    align-items: center;
    justify-content: center;
    padding: `).concat(t("badge.padding"),`;
    background: `).concat(t("badge.primary.background"),`;
    color: `).concat(t("badge.primary.color"),`;
    font-size: `).concat(t("badge.font.size"),`;
    font-weight: `).concat(t("badge.font.weight"),`;
    min-width: `).concat(t("badge.min.width"),`;
    height: `).concat(t("badge.height"),`;
}

.p-badge-dot {
    width: `).concat(t("badge.dot.size"),`;
    min-width: `).concat(t("badge.dot.size"),`;
    height: `).concat(t("badge.dot.size"),`;
    border-radius: 50%;
    padding: 0;
}

.p-badge-circle {
    padding: 0;
    border-radius: 50%;
}

.p-badge-secondary {
    background: `).concat(t("badge.secondary.background"),`;
    color: `).concat(t("badge.secondary.color"),`;
}

.p-badge-success {
    background: `).concat(t("badge.success.background"),`;
    color: `).concat(t("badge.success.color"),`;
}

.p-badge-info {
    background: `).concat(t("badge.info.background"),`;
    color: `).concat(t("badge.info.color"),`;
}

.p-badge-warn {
    background: `).concat(t("badge.warn.background"),`;
    color: `).concat(t("badge.warn.color"),`;
}

.p-badge-danger {
    background: `).concat(t("badge.danger.background"),`;
    color: `).concat(t("badge.danger.color"),`;
}

.p-badge-contrast {
    background: `).concat(t("badge.contrast.background"),`;
    color: `).concat(t("badge.contrast.color"),`;
}

.p-badge-sm {
    font-size: `).concat(t("badge.sm.font.size"),`;
    min-width: `).concat(t("badge.sm.min.width"),`;
    height: `).concat(t("badge.sm.height"),`;
}

.p-badge-lg {
    font-size: `).concat(t("badge.lg.font.size"),`;
    min-width: `).concat(t("badge.lg.min.width"),`;
    height: `).concat(t("badge.lg.height"),`;
}

.p-badge-xl {
    font-size: `).concat(t("badge.xl.font.size"),`;
    min-width: `).concat(t("badge.xl.min.width"),`;
    height: `).concat(t("badge.xl.height"),`;
}
`)},ih={root:function(e){var t=e.props,n=e.instance;return["p-badge p-component",{"p-badge-circle":or(t.value)&&String(t.value).length===1,"p-badge-dot":Tn(t.value)&&!n.$slots.default,"p-badge-sm":t.size==="small","p-badge-lg":t.size==="large","p-badge-xl":t.size==="xlarge","p-badge-info":t.severity==="info","p-badge-success":t.severity==="success","p-badge-warn":t.severity==="warn","p-badge-danger":t.severity==="danger","p-badge-secondary":t.severity==="secondary","p-badge-contrast":t.severity==="contrast"}]}},lh=M.extend({name:"badge",theme:oh,classes:ih}),ch={name:"BaseBadge",extends:pe,props:{value:{type:[String,Number],default:null},severity:{type:String,default:null},size:{type:String,default:null}},style:lh,provide:function(){return{$pcBadge:this,$parentInstance:this}}},ci={name:"Badge",extends:ch,inheritAttrs:!1};function uh(r,e,t,n,s,a){return $(),H("span",w({class:r.cx("root")},r.ptmi("root")),[W(r.$slots,"default",{},function(){return[Ue(ae(r.value),1)]})],16)}ci.render=uh;function Kt(r){"@babel/helpers - typeof";return Kt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kt(r)}function Se(r,e,t){return(e=dh(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function dh(r){var e=hh(r,"string");return Kt(e)=="symbol"?e:e+""}function hh(r,e){if(Kt(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(Kt(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}var fh=function(e){var t=e.dt;return`
.p-button {
    display: inline-flex;
    cursor: pointer;
    user-select: none;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    position: relative;
    color: `.concat(t("button.primary.color"),`;
    background: `).concat(t("button.primary.background"),`;
    border: 1px solid `).concat(t("button.primary.border.color"),`;
    padding: `).concat(t("button.padding.y")," ").concat(t("button.padding.x"),`;
    font-size: 1rem;
    font-family: inherit;
    font-feature-settings: inherit;
    transition: background `).concat(t("button.transition.duration"),", color ").concat(t("button.transition.duration"),", border-color ").concat(t("button.transition.duration"),`,
            outline-color `).concat(t("button.transition.duration"),", box-shadow ").concat(t("button.transition.duration"),`;
    border-radius: `).concat(t("button.border.radius"),`;
    outline-color: transparent;
    gap: `).concat(t("button.gap"),`;
}

.p-button:disabled {
    cursor: default;
}

.p-button-icon-right {
    order: 1;
}

.p-button-icon-right:dir(rtl) {
    order: -1;
}

.p-button:not(.p-button-vertical) .p-button-icon:not(.p-button-icon-right):dir(rtl) {
    order: 1;
}

.p-button-icon-bottom {
    order: 2;
}

.p-button-icon-only {
    width: `).concat(t("button.icon.only.width"),`;
    padding-inline-start: 0;
    padding-inline-end: 0;
    gap: 0;
}

.p-button-icon-only.p-button-rounded {
    border-radius: 50%;
    height: `).concat(t("button.icon.only.width"),`;
}

.p-button-icon-only .p-button-label {
    visibility: hidden;
    width: 0;
}

.p-button-sm {
    font-size: `).concat(t("button.sm.font.size"),`;
    padding: `).concat(t("button.sm.padding.y")," ").concat(t("button.sm.padding.x"),`;
}

.p-button-sm .p-button-icon {
    font-size: `).concat(t("button.sm.font.size"),`;
}

.p-button-lg {
    font-size: `).concat(t("button.lg.font.size"),`;
    padding: `).concat(t("button.lg.padding.y")," ").concat(t("button.lg.padding.x"),`;
}

.p-button-lg .p-button-icon {
    font-size: `).concat(t("button.lg.font.size"),`;
}

.p-button-vertical {
    flex-direction: column;
}

.p-button-label {
    font-weight: `).concat(t("button.label.font.weight"),`;
}

.p-button-fluid {
    width: 100%;
}

.p-button-fluid.p-button-icon-only {
    width: `).concat(t("button.icon.only.width"),`;
}

.p-button:not(:disabled):hover {
    background: `).concat(t("button.primary.hover.background"),`;
    border: 1px solid `).concat(t("button.primary.hover.border.color"),`;
    color: `).concat(t("button.primary.hover.color"),`;
}

.p-button:not(:disabled):active {
    background: `).concat(t("button.primary.active.background"),`;
    border: 1px solid `).concat(t("button.primary.active.border.color"),`;
    color: `).concat(t("button.primary.active.color"),`;
}

.p-button:focus-visible {
    box-shadow: `).concat(t("button.primary.focus.ring.shadow"),`;
    outline: `).concat(t("button.focus.ring.width")," ").concat(t("button.focus.ring.style")," ").concat(t("button.primary.focus.ring.color"),`;
    outline-offset: `).concat(t("button.focus.ring.offset"),`;
}

.p-button .p-badge {
    min-width: `).concat(t("button.badge.size"),`;
    height: `).concat(t("button.badge.size"),`;
    line-height: `).concat(t("button.badge.size"),`;
}

.p-button-raised {
    box-shadow: `).concat(t("button.raised.shadow"),`;
}

.p-button-rounded {
    border-radius: `).concat(t("button.rounded.border.radius"),`;
}

.p-button-secondary {
    background: `).concat(t("button.secondary.background"),`;
    border: 1px solid `).concat(t("button.secondary.border.color"),`;
    color: `).concat(t("button.secondary.color"),`;
}

.p-button-secondary:not(:disabled):hover {
    background: `).concat(t("button.secondary.hover.background"),`;
    border: 1px solid `).concat(t("button.secondary.hover.border.color"),`;
    color: `).concat(t("button.secondary.hover.color"),`;
}

.p-button-secondary:not(:disabled):active {
    background: `).concat(t("button.secondary.active.background"),`;
    border: 1px solid `).concat(t("button.secondary.active.border.color"),`;
    color: `).concat(t("button.secondary.active.color"),`;
}

.p-button-secondary:focus-visible {
    outline-color: `).concat(t("button.secondary.focus.ring.color"),`;
    box-shadow: `).concat(t("button.secondary.focus.ring.shadow"),`;
}

.p-button-success {
    background: `).concat(t("button.success.background"),`;
    border: 1px solid `).concat(t("button.success.border.color"),`;
    color: `).concat(t("button.success.color"),`;
}

.p-button-success:not(:disabled):hover {
    background: `).concat(t("button.success.hover.background"),`;
    border: 1px solid `).concat(t("button.success.hover.border.color"),`;
    color: `).concat(t("button.success.hover.color"),`;
}

.p-button-success:not(:disabled):active {
    background: `).concat(t("button.success.active.background"),`;
    border: 1px solid `).concat(t("button.success.active.border.color"),`;
    color: `).concat(t("button.success.active.color"),`;
}

.p-button-success:focus-visible {
    outline-color: `).concat(t("button.success.focus.ring.color"),`;
    box-shadow: `).concat(t("button.success.focus.ring.shadow"),`;
}

.p-button-info {
    background: `).concat(t("button.info.background"),`;
    border: 1px solid `).concat(t("button.info.border.color"),`;
    color: `).concat(t("button.info.color"),`;
}

.p-button-info:not(:disabled):hover {
    background: `).concat(t("button.info.hover.background"),`;
    border: 1px solid `).concat(t("button.info.hover.border.color"),`;
    color: `).concat(t("button.info.hover.color"),`;
}

.p-button-info:not(:disabled):active {
    background: `).concat(t("button.info.active.background"),`;
    border: 1px solid `).concat(t("button.info.active.border.color"),`;
    color: `).concat(t("button.info.active.color"),`;
}

.p-button-info:focus-visible {
    outline-color: `).concat(t("button.info.focus.ring.color"),`;
    box-shadow: `).concat(t("button.info.focus.ring.shadow"),`;
}

.p-button-warn {
    background: `).concat(t("button.warn.background"),`;
    border: 1px solid `).concat(t("button.warn.border.color"),`;
    color: `).concat(t("button.warn.color"),`;
}

.p-button-warn:not(:disabled):hover {
    background: `).concat(t("button.warn.hover.background"),`;
    border: 1px solid `).concat(t("button.warn.hover.border.color"),`;
    color: `).concat(t("button.warn.hover.color"),`;
}

.p-button-warn:not(:disabled):active {
    background: `).concat(t("button.warn.active.background"),`;
    border: 1px solid `).concat(t("button.warn.active.border.color"),`;
    color: `).concat(t("button.warn.active.color"),`;
}

.p-button-warn:focus-visible {
    outline-color: `).concat(t("button.warn.focus.ring.color"),`;
    box-shadow: `).concat(t("button.warn.focus.ring.shadow"),`;
}

.p-button-help {
    background: `).concat(t("button.help.background"),`;
    border: 1px solid `).concat(t("button.help.border.color"),`;
    color: `).concat(t("button.help.color"),`;
}

.p-button-help:not(:disabled):hover {
    background: `).concat(t("button.help.hover.background"),`;
    border: 1px solid `).concat(t("button.help.hover.border.color"),`;
    color: `).concat(t("button.help.hover.color"),`;
}

.p-button-help:not(:disabled):active {
    background: `).concat(t("button.help.active.background"),`;
    border: 1px solid `).concat(t("button.help.active.border.color"),`;
    color: `).concat(t("button.help.active.color"),`;
}

.p-button-help:focus-visible {
    outline-color: `).concat(t("button.help.focus.ring.color"),`;
    box-shadow: `).concat(t("button.help.focus.ring.shadow"),`;
}

.p-button-danger {
    background: `).concat(t("button.danger.background"),`;
    border: 1px solid `).concat(t("button.danger.border.color"),`;
    color: `).concat(t("button.danger.color"),`;
}

.p-button-danger:not(:disabled):hover {
    background: `).concat(t("button.danger.hover.background"),`;
    border: 1px solid `).concat(t("button.danger.hover.border.color"),`;
    color: `).concat(t("button.danger.hover.color"),`;
}

.p-button-danger:not(:disabled):active {
    background: `).concat(t("button.danger.active.background"),`;
    border: 1px solid `).concat(t("button.danger.active.border.color"),`;
    color: `).concat(t("button.danger.active.color"),`;
}

.p-button-danger:focus-visible {
    outline-color: `).concat(t("button.danger.focus.ring.color"),`;
    box-shadow: `).concat(t("button.danger.focus.ring.shadow"),`;
}

.p-button-contrast {
    background: `).concat(t("button.contrast.background"),`;
    border: 1px solid `).concat(t("button.contrast.border.color"),`;
    color: `).concat(t("button.contrast.color"),`;
}

.p-button-contrast:not(:disabled):hover {
    background: `).concat(t("button.contrast.hover.background"),`;
    border: 1px solid `).concat(t("button.contrast.hover.border.color"),`;
    color: `).concat(t("button.contrast.hover.color"),`;
}

.p-button-contrast:not(:disabled):active {
    background: `).concat(t("button.contrast.active.background"),`;
    border: 1px solid `).concat(t("button.contrast.active.border.color"),`;
    color: `).concat(t("button.contrast.active.color"),`;
}

.p-button-contrast:focus-visible {
    outline-color: `).concat(t("button.contrast.focus.ring.color"),`;
    box-shadow: `).concat(t("button.contrast.focus.ring.shadow"),`;
}

.p-button-outlined {
    background: transparent;
    border-color: `).concat(t("button.outlined.primary.border.color"),`;
    color: `).concat(t("button.outlined.primary.color"),`;
}

.p-button-outlined:not(:disabled):hover {
    background: `).concat(t("button.outlined.primary.hover.background"),`;
    border-color: `).concat(t("button.outlined.primary.border.color"),`;
    color: `).concat(t("button.outlined.primary.color"),`;
}

.p-button-outlined:not(:disabled):active {
    background: `).concat(t("button.outlined.primary.active.background"),`;
    border-color: `).concat(t("button.outlined.primary.border.color"),`;
    color: `).concat(t("button.outlined.primary.color"),`;
}

.p-button-outlined.p-button-secondary {
    border-color: `).concat(t("button.outlined.secondary.border.color"),`;
    color: `).concat(t("button.outlined.secondary.color"),`;
}

.p-button-outlined.p-button-secondary:not(:disabled):hover {
    background: `).concat(t("button.outlined.secondary.hover.background"),`;
    border-color: `).concat(t("button.outlined.secondary.border.color"),`;
    color: `).concat(t("button.outlined.secondary.color"),`;
}

.p-button-outlined.p-button-secondary:not(:disabled):active {
    background: `).concat(t("button.outlined.secondary.active.background"),`;
    border-color: `).concat(t("button.outlined.secondary.border.color"),`;
    color: `).concat(t("button.outlined.secondary.color"),`;
}

.p-button-outlined.p-button-success {
    border-color: `).concat(t("button.outlined.success.border.color"),`;
    color: `).concat(t("button.outlined.success.color"),`;
}

.p-button-outlined.p-button-success:not(:disabled):hover {
    background: `).concat(t("button.outlined.success.hover.background"),`;
    border-color: `).concat(t("button.outlined.success.border.color"),`;
    color: `).concat(t("button.outlined.success.color"),`;
}

.p-button-outlined.p-button-success:not(:disabled):active {
    background: `).concat(t("button.outlined.success.active.background"),`;
    border-color: `).concat(t("button.outlined.success.border.color"),`;
    color: `).concat(t("button.outlined.success.color"),`;
}

.p-button-outlined.p-button-info {
    border-color: `).concat(t("button.outlined.info.border.color"),`;
    color: `).concat(t("button.outlined.info.color"),`;
}

.p-button-outlined.p-button-info:not(:disabled):hover {
    background: `).concat(t("button.outlined.info.hover.background"),`;
    border-color: `).concat(t("button.outlined.info.border.color"),`;
    color: `).concat(t("button.outlined.info.color"),`;
}

.p-button-outlined.p-button-info:not(:disabled):active {
    background: `).concat(t("button.outlined.info.active.background"),`;
    border-color: `).concat(t("button.outlined.info.border.color"),`;
    color: `).concat(t("button.outlined.info.color"),`;
}

.p-button-outlined.p-button-warn {
    border-color: `).concat(t("button.outlined.warn.border.color"),`;
    color: `).concat(t("button.outlined.warn.color"),`;
}

.p-button-outlined.p-button-warn:not(:disabled):hover {
    background: `).concat(t("button.outlined.warn.hover.background"),`;
    border-color: `).concat(t("button.outlined.warn.border.color"),`;
    color: `).concat(t("button.outlined.warn.color"),`;
}

.p-button-outlined.p-button-warn:not(:disabled):active {
    background: `).concat(t("button.outlined.warn.active.background"),`;
    border-color: `).concat(t("button.outlined.warn.border.color"),`;
    color: `).concat(t("button.outlined.warn.color"),`;
}

.p-button-outlined.p-button-help {
    border-color: `).concat(t("button.outlined.help.border.color"),`;
    color: `).concat(t("button.outlined.help.color"),`;
}

.p-button-outlined.p-button-help:not(:disabled):hover {
    background: `).concat(t("button.outlined.help.hover.background"),`;
    border-color: `).concat(t("button.outlined.help.border.color"),`;
    color: `).concat(t("button.outlined.help.color"),`;
}

.p-button-outlined.p-button-help:not(:disabled):active {
    background: `).concat(t("button.outlined.help.active.background"),`;
    border-color: `).concat(t("button.outlined.help.border.color"),`;
    color: `).concat(t("button.outlined.help.color"),`;
}

.p-button-outlined.p-button-danger {
    border-color: `).concat(t("button.outlined.danger.border.color"),`;
    color: `).concat(t("button.outlined.danger.color"),`;
}

.p-button-outlined.p-button-danger:not(:disabled):hover {
    background: `).concat(t("button.outlined.danger.hover.background"),`;
    border-color: `).concat(t("button.outlined.danger.border.color"),`;
    color: `).concat(t("button.outlined.danger.color"),`;
}

.p-button-outlined.p-button-danger:not(:disabled):active {
    background: `).concat(t("button.outlined.danger.active.background"),`;
    border-color: `).concat(t("button.outlined.danger.border.color"),`;
    color: `).concat(t("button.outlined.danger.color"),`;
}

.p-button-outlined.p-button-contrast {
    border-color: `).concat(t("button.outlined.contrast.border.color"),`;
    color: `).concat(t("button.outlined.contrast.color"),`;
}

.p-button-outlined.p-button-contrast:not(:disabled):hover {
    background: `).concat(t("button.outlined.contrast.hover.background"),`;
    border-color: `).concat(t("button.outlined.contrast.border.color"),`;
    color: `).concat(t("button.outlined.contrast.color"),`;
}

.p-button-outlined.p-button-contrast:not(:disabled):active {
    background: `).concat(t("button.outlined.contrast.active.background"),`;
    border-color: `).concat(t("button.outlined.contrast.border.color"),`;
    color: `).concat(t("button.outlined.contrast.color"),`;
}

.p-button-outlined.p-button-plain {
    border-color: `).concat(t("button.outlined.plain.border.color"),`;
    color: `).concat(t("button.outlined.plain.color"),`;
}

.p-button-outlined.p-button-plain:not(:disabled):hover {
    background: `).concat(t("button.outlined.plain.hover.background"),`;
    border-color: `).concat(t("button.outlined.plain.border.color"),`;
    color: `).concat(t("button.outlined.plain.color"),`;
}

.p-button-outlined.p-button-plain:not(:disabled):active {
    background: `).concat(t("button.outlined.plain.active.background"),`;
    border-color: `).concat(t("button.outlined.plain.border.color"),`;
    color: `).concat(t("button.outlined.plain.color"),`;
}

.p-button-text {
    background: transparent;
    border-color: transparent;
    color: `).concat(t("button.text.primary.color"),`;
}

.p-button-text:not(:disabled):hover {
    background: `).concat(t("button.text.primary.hover.background"),`;
    border-color: transparent;
    color: `).concat(t("button.text.primary.color"),`;
}

.p-button-text:not(:disabled):active {
    background: `).concat(t("button.text.primary.active.background"),`;
    border-color: transparent;
    color: `).concat(t("button.text.primary.color"),`;
}

.p-button-text.p-button-secondary {
    background: transparent;
    border-color: transparent;
    color: `).concat(t("button.text.secondary.color"),`;
}

.p-button-text.p-button-secondary:not(:disabled):hover {
    background: `).concat(t("button.text.secondary.hover.background"),`;
    border-color: transparent;
    color: `).concat(t("button.text.secondary.color"),`;
}

.p-button-text.p-button-secondary:not(:disabled):active {
    background: `).concat(t("button.text.secondary.active.background"),`;
    border-color: transparent;
    color: `).concat(t("button.text.secondary.color"),`;
}

.p-button-text.p-button-success {
    background: transparent;
    border-color: transparent;
    color: `).concat(t("button.text.success.color"),`;
}

.p-button-text.p-button-success:not(:disabled):hover {
    background: `).concat(t("button.text.success.hover.background"),`;
    border-color: transparent;
    color: `).concat(t("button.text.success.color"),`;
}

.p-button-text.p-button-success:not(:disabled):active {
    background: `).concat(t("button.text.success.active.background"),`;
    border-color: transparent;
    color: `).concat(t("button.text.success.color"),`;
}

.p-button-text.p-button-info {
    background: transparent;
    border-color: transparent;
    color: `).concat(t("button.text.info.color"),`;
}

.p-button-text.p-button-info:not(:disabled):hover {
    background: `).concat(t("button.text.info.hover.background"),`;
    border-color: transparent;
    color: `).concat(t("button.text.info.color"),`;
}

.p-button-text.p-button-info:not(:disabled):active {
    background: `).concat(t("button.text.info.active.background"),`;
    border-color: transparent;
    color: `).concat(t("button.text.info.color"),`;
}

.p-button-text.p-button-warn {
    background: transparent;
    border-color: transparent;
    color: `).concat(t("button.text.warn.color"),`;
}

.p-button-text.p-button-warn:not(:disabled):hover {
    background: `).concat(t("button.text.warn.hover.background"),`;
    border-color: transparent;
    color: `).concat(t("button.text.warn.color"),`;
}

.p-button-text.p-button-warn:not(:disabled):active {
    background: `).concat(t("button.text.warn.active.background"),`;
    border-color: transparent;
    color: `).concat(t("button.text.warn.color"),`;
}

.p-button-text.p-button-help {
    background: transparent;
    border-color: transparent;
    color: `).concat(t("button.text.help.color"),`;
}

.p-button-text.p-button-help:not(:disabled):hover {
    background: `).concat(t("button.text.help.hover.background"),`;
    border-color: transparent;
    color: `).concat(t("button.text.help.color"),`;
}

.p-button-text.p-button-help:not(:disabled):active {
    background: `).concat(t("button.text.help.active.background"),`;
    border-color: transparent;
    color: `).concat(t("button.text.help.color"),`;
}

.p-button-text.p-button-danger {
    background: transparent;
    border-color: transparent;
    color: `).concat(t("button.text.danger.color"),`;
}

.p-button-text.p-button-danger:not(:disabled):hover {
    background: `).concat(t("button.text.danger.hover.background"),`;
    border-color: transparent;
    color: `).concat(t("button.text.danger.color"),`;
}

.p-button-text.p-button-danger:not(:disabled):active {
    background: `).concat(t("button.text.danger.active.background"),`;
    border-color: transparent;
    color: `).concat(t("button.text.danger.color"),`;
}

.p-button-text.p-button-contrast {
    background: transparent;
    border-color: transparent;
    color: `).concat(t("button.text.contrast.color"),`;
}

.p-button-text.p-button-contrast:not(:disabled):hover {
    background: `).concat(t("button.text.contrast.hover.background"),`;
    border-color: transparent;
    color: `).concat(t("button.text.contrast.color"),`;
}

.p-button-text.p-button-contrast:not(:disabled):active {
    background: `).concat(t("button.text.contrast.active.background"),`;
    border-color: transparent;
    color: `).concat(t("button.text.contrast.color"),`;
}

.p-button-text.p-button-plain {
    background: transparent;
    border-color: transparent;
    color: `).concat(t("button.text.plain.color"),`;
}

.p-button-text.p-button-plain:not(:disabled):hover {
    background: `).concat(t("button.text.plain.hover.background"),`;
    border-color: transparent;
    color: `).concat(t("button.text.plain.color"),`;
}

.p-button-text.p-button-plain:not(:disabled):active {
    background: `).concat(t("button.text.plain.active.background"),`;
    border-color: transparent;
    color: `).concat(t("button.text.plain.color"),`;
}

.p-button-link {
    background: transparent;
    border-color: transparent;
    color: `).concat(t("button.link.color"),`;
}

.p-button-link:not(:disabled):hover {
    background: transparent;
    border-color: transparent;
    color: `).concat(t("button.link.hover.color"),`;
}

.p-button-link:not(:disabled):hover .p-button-label {
    text-decoration: underline;
}

.p-button-link:not(:disabled):active {
    background: transparent;
    border-color: transparent;
    color: `).concat(t("button.link.active.color"),`;
}
`)},ph={root:function(e){var t=e.instance,n=e.props;return["p-button p-component",Se(Se(Se(Se(Se(Se(Se(Se(Se({"p-button-icon-only":t.hasIcon&&!n.label&&!n.badge,"p-button-vertical":(n.iconPos==="top"||n.iconPos==="bottom")&&n.label,"p-button-loading":n.loading,"p-button-link":n.link||n.variant==="link"},"p-button-".concat(n.severity),n.severity),"p-button-raised",n.raised),"p-button-rounded",n.rounded),"p-button-text",n.text||n.variant==="text"),"p-button-outlined",n.outlined||n.variant==="outlined"),"p-button-sm",n.size==="small"),"p-button-lg",n.size==="large"),"p-button-plain",n.plain),"p-button-fluid",t.hasFluid)]},loadingIcon:"p-button-loading-icon",icon:function(e){var t=e.props;return["p-button-icon",Se({},"p-button-icon-".concat(t.iconPos),t.label)]},label:"p-button-label"},gh=M.extend({name:"button",theme:fh,classes:ph}),mh={name:"BaseButton",extends:pe,props:{label:{type:String,default:null},icon:{type:String,default:null},iconPos:{type:String,default:"left"},iconClass:{type:[String,Object],default:null},badge:{type:String,default:null},badgeClass:{type:[String,Object],default:null},badgeSeverity:{type:String,default:"secondary"},loading:{type:Boolean,default:!1},loadingIcon:{type:String,default:void 0},as:{type:[String,Object],default:"BUTTON"},asChild:{type:Boolean,default:!1},link:{type:Boolean,default:!1},severity:{type:String,default:null},raised:{type:Boolean,default:!1},rounded:{type:Boolean,default:!1},text:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},size:{type:String,default:null},variant:{type:String,default:null},plain:{type:Boolean,default:!1},fluid:{type:Boolean,default:null}},style:gh,provide:function(){return{$pcButton:this,$parentInstance:this}}},ui={name:"Button",extends:mh,inheritAttrs:!1,inject:{$pcFluid:{default:null}},methods:{getPTOptions:function(e){var t=e==="root"?this.ptmi:this.ptm;return t(e,{context:{disabled:this.disabled}})}},computed:{disabled:function(){return this.$attrs.disabled||this.$attrs.disabled===""||this.loading},defaultAriaLabel:function(){return this.label?this.label+(this.badge?" "+this.badge:""):this.$attrs.ariaLabel},hasIcon:function(){return this.icon||this.$slots.icon},attrs:function(){return w(this.asAttrs,this.a11yAttrs,this.getPTOptions("root"))},asAttrs:function(){return this.as==="BUTTON"?{type:"button",disabled:this.disabled}:void 0},a11yAttrs:function(){return{"aria-label":this.defaultAriaLabel,"data-pc-name":"button","data-p-disabled":this.disabled,"data-p-severity":this.severity}},hasFluid:function(){return Tn(this.fluid)?!!this.$pcFluid:this.fluid}},components:{SpinnerIcon:li,Badge:ci},directives:{ripple:hs}};function bh(r,e,t,n,s,a){var o=ft("SpinnerIcon"),i=ft("Badge"),l=ga("ripple");return r.asChild?W(r.$slots,"default",{key:1,class:gt(r.cx("root")),a11yAttrs:a.a11yAttrs}):mt(($(),X(pt(r.as),w({key:0,class:r.cx("root")},a.attrs),{default:F(function(){return[W(r.$slots,"default",{},function(){return[r.loading?W(r.$slots,"loadingicon",w({key:0,class:[r.cx("loadingIcon"),r.cx("icon")]},r.ptm("loadingIcon")),function(){return[r.loadingIcon?($(),H("span",w({key:0,class:[r.cx("loadingIcon"),r.cx("icon"),r.loadingIcon]},r.ptm("loadingIcon")),null,16)):($(),X(o,w({key:1,class:[r.cx("loadingIcon"),r.cx("icon")],spin:""},r.ptm("loadingIcon")),null,16,["class"]))]}):W(r.$slots,"icon",w({key:1,class:[r.cx("icon")]},r.ptm("icon")),function(){return[r.icon?($(),H("span",w({key:0,class:[r.cx("icon"),r.icon,r.iconClass]},r.ptm("icon")),null,16)):he("",!0)]}),E("span",w({class:r.cx("label")},r.ptm("label")),ae(r.label||""),17),r.badge?($(),X(i,{key:2,value:r.badge,class:gt(r.badgeClass),severity:r.badgeSeverity,unstyled:r.unstyled,pt:r.ptm("pcBadge")},null,8,["value","class","severity","unstyled","pt"])):he("",!0)]})]}),_:3},16,["class"])),[[l]])}ui.render=bh;var vh=function(e){var t=e.dt;return`
.p-panel {
    border: 1px solid `.concat(t("panel.border.color"),`;
    border-radius: `).concat(t("panel.border.radius"),`;
    background: `).concat(t("panel.background"),`;
    color: `).concat(t("panel.color"),`;
}

.p-panel-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: `).concat(t("panel.header.padding"),`;
    background: `).concat(t("panel.header.background"),`;
    color: `).concat(t("panel.header.color"),`;
    border-style: solid;
    border-width: `).concat(t("panel.header.border.width"),`;
    border-color: `).concat(t("panel.header.border.color"),`;
    border-radius: `).concat(t("panel.header.border.radius"),`;
}

.p-panel-toggleable .p-panel-header {
    padding: `).concat(t("panel.toggleable.header.padding"),`;
}

.p-panel-title {
    line-height: 1;
    font-weight: `).concat(t("panel.title.font.weight"),`;
}

.p-panel-content {
    padding: `).concat(t("panel.content.padding"),`;
}

.p-panel-footer {
    padding: `).concat(t("panel.footer.padding"),`;
}
`)},yh={root:function(e){var t=e.props;return["p-panel p-component",{"p-panel-toggleable":t.toggleable}]},header:"p-panel-header",title:"p-panel-title",headerActions:"p-panel-header-actions",pcToggleButton:"p-panel-toggle-button",contentContainer:"p-panel-content-container",content:"p-panel-content",footer:"p-panel-footer"},_h=M.extend({name:"panel",theme:vh,classes:yh}),wh={name:"BasePanel",extends:pe,props:{header:String,toggleable:Boolean,collapsed:Boolean,toggleButtonProps:{type:Object,default:function(){return{severity:"secondary",text:!0,rounded:!0}}}},style:_h,provide:function(){return{$pcPanel:this,$parentInstance:this}}},di={name:"Panel",extends:wh,inheritAttrs:!1,emits:["update:collapsed","toggle"],data:function(){return{id:this.$attrs.id,d_collapsed:this.collapsed}},watch:{"$attrs.id":function(e){this.id=e||vt()},collapsed:function(e){this.d_collapsed=e}},mounted:function(){this.id=this.id||vt()},methods:{toggle:function(e){this.d_collapsed=!this.d_collapsed,this.$emit("update:collapsed",this.d_collapsed),this.$emit("toggle",{originalEvent:e,value:this.d_collapsed})},onKeyDown:function(e){(e.code==="Enter"||e.code==="NumpadEnter"||e.code==="Space")&&(this.toggle(e),e.preventDefault())}},computed:{buttonAriaLabel:function(){return this.toggleButtonProps&&this.toggleButtonProps.ariaLabel?this.toggleButtonProps.ariaLabel:this.header}},components:{PlusIcon:ds,MinusIcon:us,Button:ui},directives:{ripple:hs}},Sh=["id"],kh=["id","aria-labelledby"];function $h(r,e,t,n,s,a){var o=ft("Button");return $(),H("div",w({class:r.cx("root")},r.ptmi("root")),[E("div",w({class:r.cx("header")},r.ptm("header")),[W(r.$slots,"header",{id:s.id+"_header",class:gt(r.cx("title"))},function(){return[r.header?($(),H("span",w({key:0,id:s.id+"_header",class:r.cx("title")},r.ptm("title")),ae(r.header),17,Sh)):he("",!0)]}),E("div",w({class:r.cx("headerActions")},r.ptm("headerActions")),[W(r.$slots,"icons"),r.toggleable?($(),X(o,w({key:0,id:s.id+"_header",class:r.cx("pcToggleButton"),"aria-label":a.buttonAriaLabel,"aria-controls":s.id+"_content","aria-expanded":!s.d_collapsed,unstyled:r.unstyled,onClick:a.toggle,onKeydown:a.onKeyDown},r.toggleButtonProps,{pt:r.ptm("pcToggleButton")}),{icon:F(function(i){return[W(r.$slots,r.$slots.toggleicon?"toggleicon":"togglericon",{collapsed:s.d_collapsed},function(){return[($(),X(pt(s.d_collapsed?"PlusIcon":"MinusIcon"),w({class:i.class},r.ptm("pcToggleButton").icon),null,16,["class"]))]})]}),_:3},16,["id","class","aria-label","aria-controls","aria-expanded","unstyled","onClick","onKeydown","pt"])):he("",!0)],16)],16),V(Ir,w({name:"p-toggleable-content"},r.ptm("transition")),{default:F(function(){return[mt(E("div",w({id:s.id+"_content",class:r.cx("contentContainer"),role:"region","aria-labelledby":s.id+"_header"},r.ptm("contentContainer")),[E("div",w({class:r.cx("content")},r.ptm("content")),[W(r.$slots,"default")],16),r.$slots.footer?($(),H("div",w({key:0,class:r.cx("footer")},r.ptm("footer")),[W(r.$slots,"footer")],16)):he("",!0)],16,kh),[[Sn,!s.d_collapsed]])]}),_:3},16)],16)}di.render=$h;const Ph={class:"stepper__wrapper"},Ch={class:"stepper__content"},xh={key:1,class:"grid gap-4"},Ah={class:"stepper__answers"},Oh={class:"stepper__answers-content"},Th={class:"stepper__others"},Eh={class:"stepper__actions stepper__actions-between"},Ih=On({__name:"ElResult",setup(r){const{setStepValueHandler:e}=In(),t=oi(),n=Me("BACK"),s=cr(()=>{var o,i;return(o=t.openAiData)!=null&&o.others?Object.keys((i=t.openAiData)==null?void 0:i.others).map(l=>{var c,u;return{title:(c=t.openAiData)==null?void 0:c.others[l].title,text:(u=t.openAiData)==null?void 0:u.others[l].text}}):[]}),a=cr(()=>{var o;return((o=t.openAiData)==null?void 0:o.business_plan)||[]});return(o,i)=>{const l=ft("masonry-wall");return $(),X(U(En),{value:"3"},{default:F(({activateCallback:c})=>[E("div",Ph,[E("div",Ch,[U(t).isLoaded?($(),X(kd,{key:0})):($(),H("div",xh,[E("div",Ah,[($(!0),H(kn,null,ma(a.value,(u,d)=>($(),X(U(ii),{key:u.step,legend:`Step ${u.step}. ${u.title}`,class:gt(d===a.value.length-1?"stepper__answers-single":"stepper__answers-double")},{default:F(()=>[E("div",Oh,[i[0]||(i[0]=E("b",null,"1:",-1)),Ue(" "+ae(u.what_i_have_to_do)+" ",1),i[1]||(i[1]=E("b",null,"2:",-1)),Ue(" "+ae(u.where_to_start),1)])]),_:2},1032,["legend","class"]))),128))]),E("div",Th,[V(l,{items:s.value,"column-width":250,"ssr-columns":1,gap:16},{default:F(({item:u})=>[V(U(di),{header:u.title},{default:F(()=>[E("div",null,ae(u.text),1)]),_:2},1032,["header"])]),_:1},8,["items"])])]))])]),E("div",Eh,[V(wn,{"button-action":()=>U(e)({activateCallback:c,value:"2"}),variant:"default"},{default:F(()=>[Ue(ae(n.value),1)]),_:2},1032,["button-action"])])]),_:1})}}}),Rh=Xt(Ih,[["__scopeId","data-v-27620d92"]]),jh={class:"business"},Lh=On({__name:"BusinessView",setup(r){const{stepList:e,getStorageStepValue:t}=In(),n=cr(()=>t());return(s,a)=>($(),X(fi,null,{content:F(()=>[E("section",jh,[V(U(wa),{value:n.value,class:"business__content"},{default:F(()=>[V(U(Sa),null,{default:F(()=>[($(!0),H(kn,null,ma(U(e),o=>($(),X(U(Pa),{key:o.id,value:o.value,class:"business__header"},{default:F(()=>[Ue(ae(o.label),1)]),_:2},1032,["value"]))),128))]),_:1}),V(U(ka),null,{default:F(()=>[V(il),V(yd),V(Rh)]),_:1})]),_:1},8,["value"])])]),_:1}))}}),sf=Xt(Lh,[["__scopeId","data-v-3da1119b"]]);export{sf as default};
